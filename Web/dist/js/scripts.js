var app=angular.module("app",["ui.router","satellizer"]),CONSTANTS=function(){var e={};return e.API_BASE_URL="http://discoverbandapi.int/public/api",e}();app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(e,t,r){r.loginUrl=CONSTANTS.API_BASE_URL+"/login",r.signupUrl=CONSTANTS.API_BASE_URL+"/register",t.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/pages/home.html",controller:"homeController as home"}).state("solo",{url:"/solo",templateUrl:"app/pages/solo.html",controller:"soloController as solo"}).state("merged",{url:"/merged",templateUrl:"app/pages/merged.html",controller:"mergedController as merged"}).state("profile",{url:"/profile",templateUrl:"app/pages/profile.html",controller:"profileController as profile"})}]),app.controller("homeController",["instrumentService","filterService",function(e,t){function r(){n.filterData=o.filterData}var n=this,o=t;r()}]),app.controller("mergeController",function(){function e(){}e()}),app.controller("mergedController",function(){function e(){t.test="Merged"}var t=this;e()}),app.controller("profileController",["userService",function(e){function t(){n.getUser().then(function(e){r.username=e.data.username,r.email=e.data.email})}var r=this,n=e,o=document.getElementById("update-profile-spinner"),a={lines:13,length:28,width:12,radius:42,scale:.15,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"89%",left:"25.5%",shadow:!1,hwaccel:!1,position:"absolute"};r.update=function(){var e=new Spinner(a).spin(o);r.loading=!0;var t={username:r.username,email:r.email};n.updateUser(t).then(function(t){e.stop(),r.loading=!1},function(t){e.stop(),r.loading=!1})},t()}]),app.controller("soloController",["$scope","bandService","soloService","instrumentService","filterService",function(e,t,r,n,o){function a(){d.getTracks().then(function(e){s.soloTracks=e.data,s.filteredTracks=s.soloTracks,i()},function(e){console.log(e)})}function i(){s.filteredTracks=[],angular.forEach(s.soloTracks,function(e,t){goodSearch=!0,""!=!s.filterData.artist||e.artist.name.match(new RegExp(s.filterData.artist,"i"))||(goodSearch=!1),""!=!s.filterData.title||e.songname.match(new RegExp(s.filterData.title,"i"))||(goodSearch=!1),s.filterData[e.instrument_id]||(goodSearch=!1),goodSearch&&s.filteredTracks.push(e)})}function l(e,t,r){for(var n=0,o=e.length;n<o;n++)if(e[n][r]===t)return n;return-1}function c(){a(),s.instruments=p.instruments,s.filterData=f.filterData,s.bandTrackIdArray=[],angular.forEach(u.trackArray,function(e,t){s.bandTrackIdArray.push(e.id)})}var s=this,u=t,d=r,p=n,f=o;s.addToBand=function(e){u.trackArray.push(e),angular.forEach(u.trackArray,function(e,t){s.bandTrackIdArray.push(e.id)}),console.log("Track added to new band: "+e),console.log(u.trackArray)},s.removeFromBand=function(e){index=l(u.trackArray,e.id,"id"),index>-1&&(u.trackArray.splice(index,1),s.bandTrackArray=u.trackArray,intIndex=s.bandTrackIdArray.indexOf(e.id),intIndex>-1&&s.bandTrackIdArray.splice(intIndex,1)),console.log("Track removed from new band: "+e),console.log(u.trackArray)},e.$watch(function(){return s.filterData},function(){s.filterData&&i()},!0),s.track1=new Audio("dist/audio/Behemoth - Conquer All - Drum.mp3"),s.track2=new Audio("dist/audio/Behemoth - Conquer All - Guitar.mp3"),c()}]),app.filter("band",function(){return function(e,t){var r=!1;return angular.forEach(t,function(t,n){t==e&&(r=!0)}),r}}),app.service("bandService",function(){var e=this;e.testValue="This value is from a service!",e.trackArray=[],e.testFunction=function(){alert("Test function called from inside service!")}}),app.service("filterService",["instrumentService",function(e){function t(){r.createFilterData()}var r=this,n=e;r.createFilterData=function(){r.filterData={artist:"",title:""},angular.forEach(n.instruments,function(e,t){r.filterData[e.id]=!0})},t()}]),app.service("instrumentService",["$http",function(e){function t(t,r){return r?"":r={},e.get(t,r)}var r=this;r.getInstruments=function(){var e=CONSTANTS.API_BASE_URL+"/instruments";r.instruments=t(e)},r.instruments=[{name:"Lead-guitar",id:1},{name:"Drum",id:2},{name:"Bass",id:3},{name:"Keys",id:4}]}]),app.service("soloService",["$http",function(e){function t(t,r){return r?"":r={},e.get(t,r)}var r=this;r.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/tracks";return t(e)},r.getTrackById=function(e){var r=CONSTANTS.API_BASE_URL+"/tracks/"+e;return t(r)}}]),app.service("userService",["$http",function(e){var t=this;t.getUser=function(){return e.get(CONSTANTS.API_BASE_URL+"/user")},t.updateUser=function(t){return e.post(CONSTANTS.API_BASE_URL+"/user",t)}}]),app.directive("dcbLogin",["userService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-login/dcb-login.html",replace:!0,scope:{},controllerAs:"login",controller:["$auth","$rootScope",function(t,r){var n=this,o=e,a=document.getElementById("login-spinner"),i={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};n.login=function(){var e=new Spinner(i).spin(a);n.loading=!0;var l={email:n.email,password:n.password};t.login(l).then(function(t){e.stop(),n.loading=!1,$("#login_modal").modal(),$("#login_modal").modal("close"),o.getUser().then(function(e){r.username=e.data.username,r.email=e.data.email})},function(t){e.stop(),n.loading=!1,console.log(t)})}}]}}]),app.directive("dcbRegister",["userService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-register/dcb-register.html",replace:!0,scope:{},controllerAs:"register",controller:["$auth","$rootScope",function(t,r){var n=this,o=e,a=document.getElementById("register-spinner"),i={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};n.register=function(){var e=new Spinner(i).spin(a);n.loading=!0;var l={username:n.username,email:n.email,password:n.password};t.signup(l).then(function(a){t.login(l).then(function(t){e.stop(),n.loading=!1,$("#register_modal").modal(),$("#register_modal").modal("close"),o.getUser().then(function(e){r.username=e.data.username})},function(t){e.stop(),n.loading=!1,console.log(t)})})["catch"](function(t){e.stop(),n.loading=!1,console.log(t)})}}]}}]),app.directive("dcbHeader",function(){return{restrict:"E",templateUrl:"app/directives/dcb-header/dcb-header.html",replace:!0,scope:{},controllerAs:"head",controller:["userService","$auth","$rootScope",function(e,t,r){function n(){t.isAuthenticated()&&a.getUser().then(function(e){r.username=e.data.username}),o.value="This is a directive test value!"}var o=this,a=e;o.showLogin=function(){$("#login_modal").modal(),$("#login_modal").modal("open")},o.logout=function(){t.logout()},o.showRegister=function(){$("#register_modal").modal(),$("#register_modal").modal("open")},o.isAuthenticated=function(){return t.isAuthenticated()},n()}]}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsInJvdXRlcy5qcyIsImhvbWVDb250cm9sbGVyLmpzIiwibWVyZ2VDb250cm9sbGVyLmpzIiwibWVyZ2VkQ29udHJvbGxlci5qcyIsInByb2ZpbGVDb250cm9sbGVyLmpzIiwic29sb0NvbnRyb2xsZXIuanMiLCJiYW5kRmlsdGVyLmpzIiwiYmFuZFNlcnZpY2UuanMiLCJmaWx0ZXJTZXJ2aWNlLmpzIiwiaW5zdHJ1bWVudFNlcnZpY2UuanMiLCJzb2xvU2VydmljZS5qcyIsInVzZXJTZXJ2aWNlLmpzIiwiZGNiLWxvZ2luL2RjYi1sb2dpbi5qcyIsImRjYi1yZWdpc3Rlci9kY2ItcmVnaXN0ZXIuanMiLCJkY2ItaGVhZGVyL2RjYi1oZWFkZXIuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsIkNPTlNUQU5UUyIsIkFQSV9CQVNFX1VSTCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGF1dGhQcm92aWRlciIsImxvZ2luVXJsIiwic2lnbnVwVXJsIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJpbnN0cnVtZW50U2VydmljZSIsImZpbHRlclNlcnZpY2UiLCJfaW5pdCIsInZtIiwiZmlsdGVyRGF0YSIsImZsdFN2YyIsInRoaXMiLCJ0ZXN0IiwidXNlclNlcnZpY2UiLCJ1c2VyU3ZjIiwiZ2V0VXNlciIsInRoZW4iLCJkYXRhIiwidXNlcm5hbWUiLCJlbWFpbCIsInRhcmdldCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvcHRzIiwibGluZXMiLCJsZW5ndGgiLCJ3aWR0aCIsInJhZGl1cyIsInNjYWxlIiwiY29ybmVycyIsImNvbG9yIiwib3BhY2l0eSIsInJvdGF0ZSIsImRpcmVjdGlvbiIsInNwZWVkIiwidHJhaWwiLCJmcHMiLCJ6SW5kZXgiLCJjbGFzc05hbWUiLCJ0b3AiLCJsZWZ0Iiwic2hhZG93IiwiaHdhY2NlbCIsInBvc2l0aW9uIiwidXBkYXRlIiwic3Bpbm5lciIsIlNwaW5uZXIiLCJzcGluIiwibG9hZGluZyIsInVzZXJpbmZvIiwidXBkYXRlVXNlciIsInN0b3AiLCJlcnJvciIsIiRzY29wZSIsImJhbmRTZXJ2aWNlIiwic29sb1NlcnZpY2UiLCJnZXRTb2xvVHJhY2tzIiwic29sb1N2YyIsImdldFRyYWNrcyIsInNvbG9UcmFja3MiLCJmaWx0ZXJlZFRyYWNrcyIsImZpbHRlciIsImNvbnNvbGUiLCJsb2ciLCJmb3JFYWNoIiwidHJhY2siLCJrZXkiLCJnb29kU2VhcmNoIiwiYXJ0aXN0IiwibmFtZSIsIm1hdGNoIiwiUmVnRXhwIiwidGl0bGUiLCJzb25nbmFtZSIsImluc3RydW1lbnRfaWQiLCJwdXNoIiwiYXJyYXlPYmplY3RJbmRleE9mIiwibXlBcnJheSIsInNlYXJjaFRlcm0iLCJwcm9wZXJ0eSIsImkiLCJsZW4iLCJpbnN0cnVtZW50cyIsImluc3RTdmMiLCJiYW5kVHJhY2tJZEFycmF5IiwiYmFuZFN2YyIsInRyYWNrQXJyYXkiLCJpZCIsImFkZFRvQmFuZCIsInJlbW92ZUZyb21CYW5kIiwiaW5kZXgiLCJzcGxpY2UiLCJiYW5kVHJhY2tBcnJheSIsImludEluZGV4IiwiaW5kZXhPZiIsIiR3YXRjaCIsInRyYWNrMSIsIkF1ZGlvIiwidHJhY2syIiwidHJhY2tJZCIsImxpc3QiLCJyZXR1cm5WYWx1ZSIsInNlcnZpY2UiLCJzdmMiLCJ0ZXN0VmFsdWUiLCJ0ZXN0RnVuY3Rpb24iLCJhbGVydCIsImNyZWF0ZUZpbHRlckRhdGEiLCJ2YWx1ZSIsIiRodHRwIiwiZ2V0RGF0YSIsIm9wdGlvbnMiLCJnZXQiLCJnZXRJbnN0cnVtZW50cyIsImdldFRyYWNrQnlJZCIsInBvc3QiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInJlcGxhY2UiLCJzY29wZSIsImNvbnRyb2xsZXJBcyIsIiRhdXRoIiwiJHJvb3RTY29wZSIsImxvZ2luIiwiY3JlZGVudGlhbHMiLCJwYXNzd29yZCIsIiQiLCJtb2RhbCIsInJlZ2lzdGVyIiwidXNlciIsInNpZ251cCIsInJlc3BvbnNlIiwiaXNBdXRoZW50aWNhdGVkIiwic2hvd0xvZ2luIiwibG9nb3V0Iiwic2hvd1JlZ2lzdGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxLQUFNQyxRQUFRQyxPQUFPLE9BQVEsWUFBYSxlQ0ExQ0MsVUFBYSxXQUVoQixHQUFJRCxLQUlKLE9BRkFBLEdBQU9FLGFBQWUsd0NBRWZGLElDTlJGLEtBQUlLLFFBQUEsaUJBQUEscUJBQUEsZ0JBQU8sU0FBU0MsRUFBZ0JDLEVBQW9CQyxHQUN0REEsRUFBY0MsU0FBY04sVUFBVUMsYUFBZSxTQUNyREksRUFBY0UsVUFBY1AsVUFBVUMsYUFBZSxZQUNyREcsRUFBbUJJLFVBQVUsS0FFN0JMLEVBQ0dNLE1BQU0sUUFDTEMsSUFBSyxJQUNMQyxZQUFhLHNCQUNiQyxXQUFZLDJCQUVkSCxNQUFNLFFBQ0pDLElBQUssUUFDTEMsWUFBYSxzQkFDYkMsV0FBWSwyQkFFYkgsTUFBTSxVQUNMQyxJQUFLLFVBQ0xDLFlBQWEsd0JBQ2JDLFdBQVksK0JBRWJILE1BQU0sV0FDTEMsSUFBSyxXQUNMQyxZQUFhLHlCQUNiQyxXQUFZLG9DQ3hCbEJmLElBQUllLFdBQVcsa0JBQUEsb0JBQUEsZ0JBQWtCLFNBQVNDLEVBQW1CQyxHQU01RCxRQUFTQyxLQUdSQyxFQUFHQyxXQUFhQyxFQUFPRCxXQVB4QixHQUFJRCxHQUFLRyxLQUVMRCxFQUFTSixDQVFiQyxRQ1pEbEIsSUFBSWUsV0FBVyxrQkFBbUIsV0FHakMsUUFBU0csTUFJVEEsTUNQRGxCLElBQUllLFdBQVcsbUJBQW9CLFdBR2xDLFFBQVNHLEtBQ1JDLEVBQUdJLEtBQU8sU0FIWCxHQUFJSixHQUFLRyxJQU1USixPQ1BEbEIsSUFBSWUsV0FBVyxxQkFBQSxjQUFxQixTQUFTUyxHQTZCNUMsUUFBU04sS0FDUk8sRUFBUUMsVUFBVUMsS0FBSyxTQUFVQyxHQUNoQ1QsRUFBR1UsU0FBV0QsRUFBS0EsS0FBS0MsU0FDeEJWLEVBQUdX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LFdBQ2RQLEVBQUUsZ0JBQWdCQyxRQUNsQkQsRUFBRSxnQkFBZ0JDLE1BQU0sU0FHekJ2SCxFQUFHOEgsT0FBUyxXQUNYYixFQUFNYSxVQUdQOUgsRUFBRytILGFBQWUsV0FDakJULEVBQUUsbUJBQW1CQyxRQUNyQkQsRUFBRSxtQkFBbUJDLE1BQU0sU0FHNUJ2SCxFQUFHNEgsZ0JBQWtCLFdBQ3BCLE1BQU9YLEdBQU1XLG1CQUdkN0giLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLCBbXCJ1aS5yb3V0ZXJcIiwgXCJzYXRlbGxpemVyXCJdKTsiLCJ2YXIgQ09OU1RBTlRTID0gKGZ1bmN0aW9uICgpIHtcclxuXHRcclxuXHR2YXIgbW9kdWxlID0ge307XHJcblxyXG5cdG1vZHVsZS5BUElfQkFTRV9VUkwgPSBcImh0dHA6Ly9kaXNjb3ZlcmJhbmRhcGkuaW50L3B1YmxpYy9hcGlcIjtcclxuXHJcblx0cmV0dXJuIG1vZHVsZTtcclxufSgpKTsiLCJhcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRhdXRoUHJvdmlkZXIpIHtcclxuICAkYXV0aFByb3ZpZGVyLmxvZ2luVXJsICAgID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArICcvbG9naW4nO1xyXG4gICRhdXRoUHJvdmlkZXIuc2lnbnVwVXJsICAgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgJy9yZWdpc3Rlcic7XHJcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAuc3RhdGUoJ2hvbWUnLCB7XHJcbiAgICAgIHVybDogXCIvXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9ob21lLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogXCJob21lQ29udHJvbGxlciBhcyBob21lXCJcclxuICAgIH0pXHJcbiAgXHQuc3RhdGUoJ3NvbG8nLCB7XHJcbiAgICAgIHVybDogXCIvc29sb1wiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvc29sby5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwic29sb0NvbnRyb2xsZXIgYXMgc29sb1wiXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKCdtZXJnZWQnLCB7XHJcbiAgICAgIHVybDogXCIvbWVyZ2VkXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9tZXJnZWQuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcIm1lcmdlZENvbnRyb2xsZXIgYXMgbWVyZ2VkXCJcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XHJcbiAgICAgIHVybDogXCIvcHJvZmlsZVwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvcHJvZmlsZS5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwicHJvZmlsZUNvbnRyb2xsZXIgYXMgcHJvZmlsZVwiXHJcbiAgICB9KVxyXG59KTsiLCJhcHAuY29udHJvbGxlcihcImhvbWVDb250cm9sbGVyXCIsIGZ1bmN0aW9uKGluc3RydW1lbnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHR2YXIgaW5zdFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xyXG5cdHZhciBmbHRTdmMgPSBmaWx0ZXJTZXJ2aWNlO1xyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdC8vaW5zdFN2Yy5nZXRJbnN0cnVtZW50cygpO1xyXG5cclxuXHRcdHZtLmZpbHRlckRhdGEgPSBmbHRTdmMuZmlsdGVyRGF0YTtcclxuXHR9XHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwibWVyZ2VDb250cm9sbGVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuY29udHJvbGxlcihcIm1lcmdlZENvbnRyb2xsZXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHJcblx0ZnVuY3Rpb24gX2luaXQoKSB7XHJcblx0XHR2bS50ZXN0ID0gXCJNZXJnZWRcIjtcclxuXHR9XHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwicHJvZmlsZUNvbnRyb2xsZXJcIiwgZnVuY3Rpb24odXNlclNlcnZpY2UpIHtcclxuXHRcclxuXHR2YXIgdm0gXHRcdD0gdGhpcztcclxuXHR2YXIgdXNlclN2YyA9IHVzZXJTZXJ2aWNlO1xyXG5cdHZhciB0YXJnZXQgXHQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGUtcHJvZmlsZS1zcGlubmVyJyk7XHJcblxyXG5cdHZhciBvcHRzID0ge1xyXG5cdFx0XHRsaW5lczogMTMgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XHJcblx0XHQsIGxlbmd0aDogMjggLy8gVGhlIGxlbmd0aCBvZiBlYWNoIGxpbmVcclxuXHRcdCwgd2lkdGg6IDEyIC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xyXG5cdFx0LCByYWRpdXM6IDQyIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxyXG5cdFx0LCBzY2FsZTogMC4xNSAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXHJcblx0XHQsIGNvcm5lcnM6IDEgLy8gQ29ybmVyIHJvdW5kbmVzcyAoMC4uMSlcclxuXHRcdCwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXHJcblx0XHQsIG9wYWNpdHk6IDAuMjUgLy8gT3BhY2l0eSBvZiB0aGUgbGluZXNcclxuXHRcdCwgcm90YXRlOiAwIC8vIFRoZSByb3RhdGlvbiBvZmZzZXRcclxuXHRcdCwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcclxuXHRcdCwgc3BlZWQ6IDEgLy8gUm91bmRzIHBlciBzZWNvbmRcclxuXHRcdCwgdHJhaWw6IDYwIC8vIEFmdGVyZ2xvdyBwZXJjZW50YWdlXHJcblx0XHQsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXHJcblx0XHQsIHpJbmRleDogMmU5IC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxyXG5cdFx0LCBjbGFzc05hbWU6ICdzcGlubmVyJyAvLyBUaGUgQ1NTIGNsYXNzIHRvIGFzc2lnbiB0byB0aGUgc3Bpbm5lclxyXG5cdFx0LCB0b3A6ICc4OSUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdCwgbGVmdDogJzI1LjUlJyAvLyBMZWZ0IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxyXG5cdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XHJcblx0XHQsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxyXG5cdFx0LCBwb3NpdGlvbjogJ2Fic29sdXRlJyAvLyBFbGVtZW50IHBvc2l0aW9uaW5nXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdHVzZXJTdmMuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0dm0udXNlcm5hbWUgPSBkYXRhLmRhdGEudXNlcm5hbWU7XHJcblx0XHRcdHZtLmVtYWlsIFx0PSBkYXRhLmRhdGEuZW1haWw7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNwaW5uZXIgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XHJcblx0ICAgIHZtLmxvYWRpbmcgXHQ9IHRydWU7XHJcblxyXG5cdFx0dmFyIHVzZXJpbmZvID0ge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogdm0udXNlcm5hbWUsXHJcbiAgICAgICAgICAgIGVtYWlsOiB2bS5lbWFpbFxyXG4gICAgICAgIH1cclxuXHJcblx0XHR1c2VyU3ZjLnVwZGF0ZVVzZXIodXNlcmluZm8pXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzcGlubmVyLnN0b3AoKTtcclxuXHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c3Bpbm5lci5zdG9wKCk7XHJcblx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwic29sb0NvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCBiYW5kU2VydmljZSwgc29sb1NlcnZpY2UsIGluc3RydW1lbnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHR2YXIgYmFuZFN2YyA9IGJhbmRTZXJ2aWNlO1xyXG5cdHZhciBzb2xvU3ZjID0gc29sb1NlcnZpY2U7XHJcblx0dmFyIGluc3RTdmMgPSBpbnN0cnVtZW50U2VydmljZTtcclxuXHR2YXIgZmx0U3ZjID0gZmlsdGVyU2VydmljZTtcclxuXHJcblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdGZ1bmN0aW9uIHBsYXlBdWRpb0ZpbGUodHJhY2spXHJcblx0e1xyXG5cdFx0dHJhY2sucGxheSgpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0U29sb1RyYWNrcygpXHJcblx0e1xyXG5cdFx0c29sb1N2Yy5nZXRUcmFja3MoKVxyXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dm0uc29sb1RyYWNrcyA9IGRhdGEuZGF0YTtcclxuXHRcdFx0XHR2bS5maWx0ZXJlZFRyYWNrcyA9IHZtLnNvbG9UcmFja3M7XHJcblx0XHRcdFx0ZmlsdGVyKCk7XHJcblx0XHRcdFxyXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBmaWx0ZXIoKVxyXG5cdHtcclxuXHRcdHZtLmZpbHRlcmVkVHJhY2tzID0gW107XHJcblxyXG5cdFx0YW5ndWxhci5mb3JFYWNoKHZtLnNvbG9UcmFja3MsIGZ1bmN0aW9uKHRyYWNrLCBrZXkpXHJcblx0XHR7XHJcblx0XHRcdC8vY29uc29sZS5sb2codHJhY2spO1xyXG5cdFx0XHRnb29kU2VhcmNoID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhLmFydGlzdCA9PSBcIlwiICYmICF0cmFjay5hcnRpc3QubmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEuYXJ0aXN0LCBcImlcIikpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS50aXRsZSA9PSBcIlwiICYmICF0cmFjay5zb25nbmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEudGl0bGUsIFwiaVwiKSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhW3RyYWNrLmluc3RydW1lbnRfaWRdKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0aWYoZ29vZFNlYXJjaClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZtLmZpbHRlcmVkVHJhY2tzLnB1c2godHJhY2spO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vY29uc29sZS5sb2codm0uZmlsdGVyZWRUcmFja3MpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBhcnJheU9iamVjdEluZGV4T2YobXlBcnJheSwgc2VhcmNoVGVybSwgcHJvcGVydHkpIHtcclxuICAgIFx0XHJcbiAgICBcdGZvcih2YXIgaSA9IDAsIGxlbiA9IG15QXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBcdGlmIChteUFycmF5W2ldW3Byb3BlcnR5XSA9PT0gc2VhcmNoVGVybSkgcmV0dXJuIGk7XHJcbiAgICBcdH1cclxuXHJcbiAgICBcdHJldHVybiAtMTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0Z2V0U29sb1RyYWNrcygpO1xyXG5cdFx0dm0uaW5zdHJ1bWVudHMgPSBpbnN0U3ZjLmluc3RydW1lbnRzO1xyXG5cdFx0dm0uZmlsdGVyRGF0YSA9IGZsdFN2Yy5maWx0ZXJEYXRhO1xyXG5cdFx0dm0uYmFuZFRyYWNrSWRBcnJheSA9IFtdO1xyXG5cclxuXHRcdGFuZ3VsYXIuZm9yRWFjaChiYW5kU3ZjLnRyYWNrQXJyYXksIGZ1bmN0aW9uKHRyYWNrLCBrZXkpIHtcclxuXHRcdFx0dm0uYmFuZFRyYWNrSWRBcnJheS5wdXNoKHRyYWNrLmlkKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vdm0udHJhY2sxLnBsYXkoKTtcclxuXHRcdC8vc2V0VGltZW91dChmdW5jdGlvbigpe3BsYXlBdWRpb0ZpbGUodm0udHJhY2syKX0sIDQwMCk7XHJcblx0fVxyXG5cclxuXHQvL1ZtIGZ1bmN0aW9uc1xyXG5cdHZtLmFkZFRvQmFuZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XHJcblxyXG5cdFx0YmFuZFN2Yy50cmFja0FycmF5LnB1c2godHJhY2spO1xyXG5cdFx0YW5ndWxhci5mb3JFYWNoKGJhbmRTdmMudHJhY2tBcnJheSwgZnVuY3Rpb24odHJhY2ssIGtleSkge1xyXG5cdFx0XHR2bS5iYW5kVHJhY2tJZEFycmF5LnB1c2godHJhY2suaWQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coXCJUcmFjayBhZGRlZCB0byBuZXcgYmFuZDogXCIgKyB0cmFjayk7XHJcblx0XHRjb25zb2xlLmxvZyhiYW5kU3ZjLnRyYWNrQXJyYXkpO1xyXG5cdH1cclxuXHJcblx0dm0ucmVtb3ZlRnJvbUJhbmQgPSBmdW5jdGlvbih0cmFjaykge1xyXG5cdFx0XHJcblx0XHRpbmRleCA9IGFycmF5T2JqZWN0SW5kZXhPZihiYW5kU3ZjLnRyYWNrQXJyYXksIHRyYWNrLmlkLCBcImlkXCIpO1xyXG5cdFx0aWYgKGluZGV4ID4gLTEpIHtcclxuXHRcdFx0YmFuZFN2Yy50cmFja0FycmF5LnNwbGljZShpbmRleCwgMSk7XHJcblx0XHRcdHZtLmJhbmRUcmFja0FycmF5ID0gYmFuZFN2Yy50cmFja0FycmF5O1xyXG5cclxuXHRcdFx0aW50SW5kZXggPSB2bS5iYW5kVHJhY2tJZEFycmF5LmluZGV4T2YodHJhY2suaWQpO1xyXG5cdFx0XHRpZiAoaW50SW5kZXggPiAtMSkge1xyXG5cdFx0XHRcdHZtLmJhbmRUcmFja0lkQXJyYXkuc3BsaWNlKGludEluZGV4LCAxKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiVHJhY2sgcmVtb3ZlZCBmcm9tIG5ldyBiYW5kOiBcIiArIHRyYWNrKTtcclxuXHRcdGNvbnNvbGUubG9nKGJhbmRTdmMudHJhY2tBcnJheSk7XHJcblx0fVxyXG5cclxuXHQvL1dhdGNoZXNcclxuXHQkc2NvcGUuJHdhdGNoKFxyXG5cdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gdm0uZmlsdGVyRGF0YSB9LCBcclxuXHRcdGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdGlmKHZtLmZpbHRlckRhdGEpIFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZmlsdGVyKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIHRydWUpO1xyXG5cclxuXHJcblxyXG5cdHZtLnRyYWNrMSA9IG5ldyBBdWRpbyhcImRpc3QvYXVkaW8vQmVoZW1vdGggLSBDb25xdWVyIEFsbCAtIERydW0ubXAzXCIpO1xyXG5cdHZtLnRyYWNrMiA9IG5ldyBBdWRpbyhcImRpc3QvYXVkaW8vQmVoZW1vdGggLSBDb25xdWVyIEFsbCAtIEd1aXRhci5tcDNcIik7XHJcblxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuZmlsdGVyKFwiYmFuZFwiLCBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gZnVuY3Rpb24odHJhY2tJZCwgbGlzdCkge1xyXG5cdFx0dmFyIHJldHVyblZhbHVlID0gZmFsc2U7XHJcblx0XHRcclxuXHRcdGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbihpZCwgaW5kZXgpIHtcclxuXHRcdFx0aWYoaWQgPT0gdHJhY2tJZCkge1xyXG5cdFx0XHRcdHJldHVyblZhbHVlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fVxyXG59KTsiLCJhcHAuc2VydmljZShcImJhbmRTZXJ2aWNlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdHZhciBzdmMgPSB0aGlzO1xyXG5cdHN2Yy50ZXN0VmFsdWUgPSBcIlRoaXMgdmFsdWUgaXMgZnJvbSBhIHNlcnZpY2UhXCI7XHJcblxyXG5cdHN2Yy50cmFja0FycmF5ID0gW107XHJcblxyXG5cdFxyXG5cclxuXHJcblxyXG5cclxuXHRzdmMudGVzdEZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHRhbGVydChcIlRlc3QgZnVuY3Rpb24gY2FsbGVkIGZyb20gaW5zaWRlIHNlcnZpY2UhXCIpO1xyXG5cdH1cclxufSkiLCJhcHAuc2VydmljZShcImZpbHRlclNlcnZpY2VcIiwgZnVuY3Rpb24oaW5zdHJ1bWVudFNlcnZpY2UpIHtcclxuXHRcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHR2YXIgaW5zdFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xyXG5cclxuXHJcblx0c3ZjLmNyZWF0ZUZpbHRlckRhdGEgPSBmdW5jdGlvbigpXHJcblx0e1xyXG5cdFx0c3ZjLmZpbHRlckRhdGEgPSB7XHRcImFydGlzdFwiOiBcIlwiLFxyXG5cdFx0XHRcdFx0XHRcdFwidGl0bGVcIjogXCJcIixcclxuXHRcdFx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdGFuZ3VsYXIuZm9yRWFjaChpbnN0U3ZjLmluc3RydW1lbnRzLCBmdW5jdGlvbih2YWx1ZSwga2V5KVxyXG5cdFx0e1xyXG5cdFx0XHRzdmMuZmlsdGVyRGF0YVt2YWx1ZS5pZF0gPSB0cnVlO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdHN2Yy5jcmVhdGVGaWx0ZXJEYXRhKCk7XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KSIsImFwcC5zZXJ2aWNlKFwiaW5zdHJ1bWVudFNlcnZpY2VcIiwgZnVuY3Rpb24oJGh0dHApIHtcclxuXHRcclxuXHQvL0dsb2JhbHNcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHJcblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdGZ1bmN0aW9uIGdldERhdGEgKHVybCwgb3B0aW9ucykge1xyXG5cclxuXHRcdCFvcHRpb25zID8gb3B0aW9ucyA9IHt9IDogXCJcIjtcclxuXHJcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcclxuXHR9XHJcblxyXG5cdC8vU3ZjIGZ1bmN0aW9uc1xyXG5cdHN2Yy5nZXRJbnN0cnVtZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL2luc3RydW1lbnRzXCI7XHJcblx0XHRcclxuXHRzdmMuaW5zdHJ1bWVudHMgPSBnZXREYXRhKHVybCk7XHJcblx0fVxyXG5cclxuXHRzdmMuaW5zdHJ1bWVudHMgPSBbe1xyXG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwiTGVhZC1ndWl0YXJcIixcclxuXHRcdFx0XHRcdFx0XHRcImlkXCI6MVxyXG5cdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJEcnVtXCIsXHJcblx0XHRcdFx0XHRcdFx0XCJpZFwiOjJcclxuXHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwiQmFzc1wiLFxyXG5cdFx0XHRcdFx0XHRcdFwiaWRcIjozXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIktleXNcIixcclxuXHRcdFx0XHRcdFx0XHRcImlkXCI6NFxyXG5cdFx0XHRcdFx0XHR9XTtcclxufSkiLCJhcHAuc2VydmljZShcInNvbG9TZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblx0XHJcblx0Ly9HbG9iYWxzXHJcblx0dmFyIHN2YyA9IHRoaXM7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBnZXREYXRhICh1cmwsIG9wdGlvbnMpIHtcclxuXHJcblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XHJcblxyXG5cdFx0cmV0dXJuICRodHRwLmdldCh1cmwsIG9wdGlvbnMpXHJcblx0fVxyXG5cclxuXHQvL1N2YyBmdW5jdGlvbnNcclxuXHRzdmMuZ2V0VHJhY2tzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdHJhY2tzXCI7XHJcblx0XHRcclxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XHJcblx0fVxyXG5cclxuXHRzdmMuZ2V0VHJhY2tCeUlkID0gZnVuY3Rpb24gKGlkKSB7XHJcblxyXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi90cmFja3MvXCIgKyBpZDtcclxuXHJcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xyXG5cdH1cclxufSkiLCJhcHAuc2VydmljZShcInVzZXJTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XHRcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHJcblx0c3ZjLmdldFVzZXIgPSBmdW5jdGlvbigpXHJcblx0e1xyXG5cdFx0cmV0dXJuICRodHRwLmdldChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdXNlclwiKTtcclxuXHR9XHJcblxyXG5cdHN2Yy51cGRhdGVVc2VyID0gZnVuY3Rpb24oZGF0YSlcclxuXHR7XHJcblx0XHRyZXR1cm4gJGh0dHAucG9zdChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdXNlclwiLCBkYXRhKTtcclxuXHR9XHJcbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYkxvZ2luXCIsIGZ1bmN0aW9uKHVzZXJTZXJ2aWNlKSB7XHJcblx0cmV0dXJuIHtcclxuXHRcdHJlc3RyaWN0OiBcIkVcIixcclxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1sb2dpbi9kY2ItbG9naW4uaHRtbFwiLFxyXG5cdFx0cmVwbGFjZTogdHJ1ZSxcclxuXHRcdHNjb3BlOiB7fSxcclxuXHRcdGNvbnRyb2xsZXJBczogXCJsb2dpblwiLFxyXG5cdFx0Y29udHJvbGxlcjogZnVuY3Rpb24oJGF1dGgsICRyb290U2NvcGUpIHtcclxuXHRcdFx0dmFyIHZtIFx0XHRcdD0gdGhpcztcclxuXHRcdFx0dmFyIHVzZXJTdmMgXHQ9IHVzZXJTZXJ2aWNlO1xyXG5cdFx0XHR2YXIgdGFyZ2V0IFx0XHQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbi1zcGlubmVyJyk7XHJcblxyXG5cdFx0XHR2YXIgb3B0cyA9IHtcclxuXHQgIFx0XHRcdGxpbmVzOiAxMyAvLyBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIGRyYXdcclxuXHRcdFx0XHQsIGxlbmd0aDogMjggLy8gVGhlIGxlbmd0aCBvZiBlYWNoIGxpbmVcclxuXHRcdFx0XHQsIHdpZHRoOiAxNCAvLyBUaGUgbGluZSB0aGlja25lc3NcclxuXHRcdFx0XHQsIHJhZGl1czogNDIgLy8gVGhlIHJhZGl1cyBvZiB0aGUgaW5uZXIgY2lyY2xlXHJcblx0XHRcdFx0LCBzY2FsZTogMC40IC8vIFNjYWxlcyBvdmVyYWxsIHNpemUgb2YgdGhlIHNwaW5uZXJcclxuXHRcdFx0XHQsIGNvcm5lcnM6IDEgLy8gQ29ybmVyIHJvdW5kbmVzcyAoMC4uMSlcclxuXHRcdFx0XHQsIGNvbG9yOiAnIzAwMCcgLy8gI3JnYiBvciAjcnJnZ2JiIG9yIGFycmF5IG9mIGNvbG9yc1xyXG5cdFx0XHRcdCwgb3BhY2l0eTogMC4yNSAvLyBPcGFjaXR5IG9mIHRoZSBsaW5lc1xyXG5cdFx0XHRcdCwgcm90YXRlOiAwIC8vIFRoZSByb3RhdGlvbiBvZmZzZXRcclxuXHRcdFx0XHQsIGRpcmVjdGlvbjogMSAvLyAxOiBjbG9ja3dpc2UsIC0xOiBjb3VudGVyY2xvY2t3aXNlXHJcblx0XHRcdFx0LCBzcGVlZDogMSAvLyBSb3VuZHMgcGVyIHNlY29uZFxyXG5cdFx0XHRcdCwgdHJhaWw6IDYwIC8vIEFmdGVyZ2xvdyBwZXJjZW50YWdlXHJcblx0XHRcdFx0LCBmcHM6IDIwIC8vIEZyYW1lcyBwZXIgc2Vjb25kIHdoZW4gdXNpbmcgc2V0VGltZW91dCgpIGFzIGEgZmFsbGJhY2sgZm9yIENTU1xyXG5cdFx0XHRcdCwgekluZGV4OiAyZTkgLy8gVGhlIHotaW5kZXggKGRlZmF1bHRzIHRvIDIwMDAwMDAwMDApXHJcblx0XHRcdFx0LCBjbGFzc05hbWU6ICdzcGlubmVyJyAvLyBUaGUgQ1NTIGNsYXNzIHRvIGFzc2lnbiB0byB0aGUgc3Bpbm5lclxyXG5cdFx0XHRcdCwgdG9wOiAnNjAlJyAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcblx0XHRcdFx0LCBsZWZ0OiAnNTAlJyAvLyBMZWZ0IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxyXG5cdFx0XHRcdCwgc2hhZG93OiBmYWxzZSAvLyBXaGV0aGVyIHRvIHJlbmRlciBhIHNoYWRvd1xyXG5cdFx0XHRcdCwgaHdhY2NlbDogZmFsc2UgLy8gV2hldGhlciB0byB1c2UgaGFyZHdhcmUgYWNjZWxlcmF0aW9uXHJcblx0XHRcdFx0LCBwb3NpdGlvbjogJ2Fic29sdXRlJyAvLyBFbGVtZW50IHBvc2l0aW9uaW5nXHJcblx0XHRcdH1cclxuXHJcblx0ICAgICAgICB2bS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xyXG5cdCAgICAgICAgXHR2YXIgc3Bpbm5lciA9IG5ldyBTcGlubmVyKG9wdHMpLnNwaW4odGFyZ2V0KTtcclxuXHQgICAgICAgIFx0dm0ubG9hZGluZyBcdD0gdHJ1ZTtcclxuXHJcblx0ICAgICAgICAgICAgdmFyIGNyZWRlbnRpYWxzID0ge1xyXG5cdCAgICAgICAgICAgICAgICBlbWFpbDogdm0uZW1haWwsXHJcblx0ICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB2bS5wYXNzd29yZFxyXG5cdCAgICAgICAgICAgIH1cclxuXHQgICAgICAgICAgICBcclxuXHQgICAgICAgICAgICAkYXV0aC5sb2dpbihjcmVkZW50aWFscykudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcblx0ICAgICAgICAgICAgXHQvLyBBdXRoZW50aWNhdGlvbiBzdWNjZXNzXHJcblx0ICAgICAgICAgICAgXHRzcGlubmVyLnN0b3AoKTtcclxuXHQgICAgICAgICAgICBcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHQgICAgICAgICAgICBcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0XHQkKCcjbG9naW5fbW9kYWwnKS5tb2RhbCgnY2xvc2UnKTtcclxuXHJcblx0XHRcdFx0XHR1c2VyU3ZjLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0XHRcdCRyb290U2NvcGUudXNlcm5hbWUgPSBkYXRhLmRhdGEudXNlcm5hbWU7XHJcblx0XHRcdFx0XHRcdCRyb290U2NvcGUuZW1haWwgXHQ9IGRhdGEuZGF0YS5lbWFpbDtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdCAgICAgICAgICAgIH0sIFxyXG5cdCAgICAgICAgICAgIGZ1bmN0aW9uKGVycm9yKXtcclxuXHQgICAgICAgICAgICBcdC8vIEF1dGhlbnRpY2F0aW9uIGZhaWxlZFxyXG5cdCAgICAgICAgICAgIFx0c3Bpbm5lci5zdG9wKCk7XHJcblx0ICAgICAgICAgICAgXHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0ICAgICAgICAgICAgXHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0ICAgICAgICAgICAgfSk7XHJcblx0ICAgICAgICB9XHJcblx0XHR9XHJcblx0fVxyXG59KSIsImFwcC5kaXJlY3RpdmUoXCJkY2JSZWdpc3RlclwiLCBmdW5jdGlvbih1c2VyU2VydmljZSkge1xyXG5cdHJldHVybiB7XHJcblx0XHRyZXN0cmljdDogXCJFXCIsXHJcblx0XHR0ZW1wbGF0ZVVybDogXCJhcHAvZGlyZWN0aXZlcy9kY2ItcmVnaXN0ZXIvZGNiLXJlZ2lzdGVyLmh0bWxcIixcclxuXHRcdHJlcGxhY2U6IHRydWUsXHJcblx0XHRzY29wZToge30sXHJcblx0XHRjb250cm9sbGVyQXM6IFwicmVnaXN0ZXJcIixcclxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRhdXRoLCAkcm9vdFNjb3BlKSB7XHJcblx0XHRcdHZhciB2bSBcdFx0XHQ9IHRoaXM7XHJcblx0XHRcdHZhciB1c2VyU3ZjIFx0PSB1c2VyU2VydmljZTtcclxuXHRcdFx0dmFyIHRhcmdldCBcdFx0PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVnaXN0ZXItc3Bpbm5lcicpO1xyXG5cclxuXHRcdFx0dmFyIG9wdHMgPSB7XHJcblx0ICBcdFx0XHRsaW5lczogMTMgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XHJcblx0XHRcdFx0LCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXHJcblx0XHRcdFx0LCB3aWR0aDogMTQgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXHJcblx0XHRcdFx0LCByYWRpdXM6IDQyIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxyXG5cdFx0XHRcdCwgc2NhbGU6IDAuNCAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXHJcblx0XHRcdFx0LCBjb3JuZXJzOiAxIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXHJcblx0XHRcdFx0LCBjb2xvcjogJyMwMDAnIC8vICNyZ2Igb3IgI3JyZ2diYiBvciBhcnJheSBvZiBjb2xvcnNcclxuXHRcdFx0XHQsIG9wYWNpdHk6IDAuMjUgLy8gT3BhY2l0eSBvZiB0aGUgbGluZXNcclxuXHRcdFx0XHQsIHJvdGF0ZTogMCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XHJcblx0XHRcdFx0LCBkaXJlY3Rpb246IDEgLy8gMTogY2xvY2t3aXNlLCAtMTogY291bnRlcmNsb2Nrd2lzZVxyXG5cdFx0XHRcdCwgc3BlZWQ6IDEgLy8gUm91bmRzIHBlciBzZWNvbmRcclxuXHRcdFx0XHQsIHRyYWlsOiA2MCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxyXG5cdFx0XHRcdCwgZnBzOiAyMCAvLyBGcmFtZXMgcGVyIHNlY29uZCB3aGVuIHVzaW5nIHNldFRpbWVvdXQoKSBhcyBhIGZhbGxiYWNrIGZvciBDU1NcclxuXHRcdFx0XHQsIHpJbmRleDogMmU5IC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxyXG5cdFx0XHRcdCwgY2xhc3NOYW1lOiAnc3Bpbm5lcicgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcclxuXHRcdFx0XHQsIHRvcDogJzYwJScgLy8gVG9wIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxyXG5cdFx0XHRcdCwgbGVmdDogJzUwJScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdFx0XHQsIHNoYWRvdzogZmFsc2UgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcclxuXHRcdFx0XHQsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxyXG5cdFx0XHRcdCwgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0XHJcblx0XHRcdHZtLnJlZ2lzdGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHNwaW5uZXIgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XHJcblx0ICAgICAgICBcdHZtLmxvYWRpbmcgXHQ9IHRydWU7XHJcblxyXG5cdFx0XHRcdHZhciB1c2VyID0ge1xyXG5cdFx0XHRcdCAgXHR1c2VybmFtZTogdm0udXNlcm5hbWUsXHJcblx0XHRcdFx0ICBcdGVtYWlsOiB2bS5lbWFpbCxcclxuXHRcdFx0XHQgIFx0cGFzc3dvcmQ6IHZtLnBhc3N3b3JkXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0JGF1dGguc2lnbnVwKHVzZXIpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdC8vIFJlZ2lzdHJhdGlvbiBzdWNjZXNzXHJcblx0XHRcdFx0XHQkYXV0aC5sb2dpbih1c2VyKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHQgICAgICAgICAgICBcdFx0Ly8gQXV0aGVudGljYXRpb24gc3VjY2Vzc1xyXG5cdFx0ICAgICAgICAgICAgXHRzcGlubmVyLnN0b3AoKTtcclxuXHRcdCAgICAgICAgICAgIFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0ICAgICAgICAgICAgXHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgpO1xyXG5cdFx0XHRcdFx0XHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgnY2xvc2UnKTtcclxuXHJcblx0XHRcdFx0XHRcdHVzZXJTdmMuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0XHRcdFx0XHQkcm9vdFNjb3BlLnVzZXJuYW1lID0gZGF0YS5kYXRhLnVzZXJuYW1lO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdCAgICAgICAgICAgIH0sIFxyXG5cdFx0ICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3Ipe1xyXG5cdFx0ICAgICAgICAgICAgXHQvLyBBdXRoZW50aWNhdGlvbiBmYWlsZWRcclxuXHRcdCAgICAgICAgICAgIFx0c3Bpbm5lci5zdG9wKCk7XHJcblx0XHQgICAgICAgICAgICBcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdCAgICAgICAgICAgIFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG5cdFx0ICAgICAgICAgICAgfSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdC8vIFJlZ2lzdHJhdGlvbiBmYWlsZWRcclxuXHRcdFx0XHQgIFx0c3Bpbm5lci5zdG9wKCk7XHJcblx0XHRcdFx0ICBcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0XHQgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSIsImFwcC5kaXJlY3RpdmUoXCJkY2JIZWFkZXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHtcclxuXHRcdHJlc3RyaWN0OiBcIkVcIixcclxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1oZWFkZXIvZGNiLWhlYWRlci5odG1sXCIsXHJcblx0XHRyZXBsYWNlOiB0cnVlLFxyXG5cdFx0c2NvcGU6IHt9LFxyXG5cdFx0Y29udHJvbGxlckFzOiBcImhlYWRcIixcclxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKHVzZXJTZXJ2aWNlLCAkYXV0aCwgJHJvb3RTY29wZSkge1xyXG5cdFx0XHR2YXIgdm0gXHRcdFx0PSB0aGlzO1xyXG5cdFx0XHR2YXIgdXNlclN2YyBcdD0gdXNlclNlcnZpY2U7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdFx0XHRpZigkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR1c2VyU3ZjLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0XHRcdCRyb290U2NvcGUudXNlcm5hbWUgPSBkYXRhLmRhdGEudXNlcm5hbWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZtLnZhbHVlID0gXCJUaGlzIGlzIGEgZGlyZWN0aXZlIHRlc3QgdmFsdWUhXCI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZtLnNob3dMb2dpbiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQkKCcjbG9naW5fbW9kYWwnKS5tb2RhbCgpO1xyXG5cdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCdvcGVuJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZtLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQkYXV0aC5sb2dvdXQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dm0uc2hvd1JlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQoJyNyZWdpc3Rlcl9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0JCgnI3JlZ2lzdGVyX21vZGFsJykubW9kYWwoJ29wZW4nKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dm0uaXNBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICRhdXRoLmlzQXV0aGVudGljYXRlZCgpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0X2luaXQoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pIl19
