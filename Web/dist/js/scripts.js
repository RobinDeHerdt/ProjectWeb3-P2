var app=angular.module("app",["ui.router","satellizer"]),CONSTANTS=function(){var e={};return e.API_BASE_URL="http://discoverbandapi.int/public/api",e}();app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(e,r,t){t.loginUrl=CONSTANTS.API_BASE_URL+"/authenticate",r.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/pages/home.html",controller:"homeController as home"}).state("solo",{url:"/solo",templateUrl:"app/pages/solo.html",controller:"soloController as solo"}).state("merged",{url:"/merged",templateUrl:"app/pages/merged.html",controller:"mergedController as merged"})}]),app.controller("homeController",["instrumentService","filterService",function(e,r){function t(){n.filterData=o.filterData}var n=this,o=r;t()}]),app.controller("mergeController",function(){function e(){}e()}),app.controller("mergedController",function(){function e(){r.test="Merged"}var r=this;e()}),app.controller("soloController",["$scope","bandService","soloService","instrumentService","filterService",function(e,r,t,n,o){function a(){d.getTracks().then(function(e){s.soloTracks=e.data,s.filteredTracks=s.soloTracks,i()},function(e){console.log(e)})}function i(){s.filteredTracks=[],angular.forEach(s.soloTracks,function(e,r){goodSearch=!0,""!=!s.filterData.artist||e.artist.name.match(new RegExp(s.filterData.artist,"i"))||(goodSearch=!1),""!=!s.filterData.title||e.songname.match(new RegExp(s.filterData.title,"i"))||(goodSearch=!1),s.filterData[e.instrument_id]||(goodSearch=!1),goodSearch&&s.filteredTracks.push(e)})}function c(e,r,t){for(var n=0,o=e.length;n<o;n++)if(e[n][t]===r)return n;return-1}function l(){a(),s.instruments=p.instruments,s.filterData=f.filterData,s.bandTrackIdArray=[],angular.forEach(u.trackArray,function(e,r){s.bandTrackIdArray.push(e.id)})}var s=this,u=r,d=t,p=n,f=o;s.addToBand=function(e){u.trackArray.push(e),angular.forEach(u.trackArray,function(e,r){s.bandTrackIdArray.push(e.id)}),console.log("Track added to new band: "+e),console.log(u.trackArray)},s.removeFromBand=function(e){index=c(u.trackArray,e.id,"id"),index>-1&&(u.trackArray.splice(index,1),s.bandTrackArray=u.trackArray,intIndex=s.bandTrackIdArray.indexOf(e.id),intIndex>-1&&s.bandTrackIdArray.splice(intIndex,1)),console.log("Track removed from new band: "+e),console.log(u.trackArray)},e.$watch(function(){return s.filterData},function(){s.filterData&&i()},!0),s.track1=new Audio("dist/audio/Behemoth - Conquer All - Drum.mp3"),s.track2=new Audio("dist/audio/Behemoth - Conquer All - Guitar.mp3"),l()}]),app.filter("band",function(){return function(e,r){var t=!1;return angular.forEach(r,function(r,n){r==e&&(t=!0)}),t}}),app.service("bandService",function(){var e=this;e.testValue="This value is from a service!",e.trackArray=[],e.testFunction=function(){alert("Test function called from inside service!")}}),app.service("filterService",["instrumentService",function(e){function r(){t.createFilterData()}var t=this,n=e;t.createFilterData=function(){t.filterData={artist:"",title:""},angular.forEach(n.instruments,function(e,r){t.filterData[e.id]=!0})},r()}]),app.service("instrumentService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getInstruments=function(){var e=CONSTANTS.API_BASE_URL+"/instruments";t.instruments=r(e)},t.instruments=[{name:"Lead-guitar",id:1},{name:"Drum",id:2},{name:"Bass",id:3},{name:"Keys",id:4}]}]),app.service("loginService",["$http",function(e){var r=this;r.getUser=function(){e.get(CONSTANTS.API_BASE_URL+"/user").success(function(e){console.log(e)}).error(function(e){console.log(e)})}}]),app.service("soloService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/tracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/tracks/"+e;return r(t)}}]),app.directive("dcbLogin",function(){return{restrict:"E",templateUrl:"app/directives/dcb-login/dcb-login.html",replace:!0,scope:{},controllerAs:"login",controller:["$auth","loginService",function(e,r){var t=this,n=r,o=document.getElementById("login-spinner"),a={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};t.login=function(){console.log("Sent");var r=new Spinner(a).spin(o);t.loading=!0;var i={email:t.email,password:t.password};e.login(i).then(function(e){r.stop(),t.loading=!1,$("#login_modal").modal(),$("#login_modal").modal("close"),console.log(e),n.getUser()},function(e){r.stop(),t.loading=!1,console.log(e)})}}]}}),app.directive("dcbHeader",function(){return{restrict:"E",templateUrl:"app/directives/dcb-header/dcb-header.html",replace:!0,scope:{},controllerAs:"head",controller:["loginService",function(e){function r(){t.value="This is a directive test value!"}var t=this;t.showLogin=function(){$("#login_modal").modal(),$("#login_modal").modal("open")},t.showRegister=function(){$("#register_modal").modal(),$("#register_modal").modal("open")},r()}]}}),app.directive("dcbRegister",function(){return{restrict:"E",templateUrl:"app/directives/dcb-register/dcb-register.html",replace:!0,scope:{},controllerAs:"register",controller:function(){}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsInJvdXRlcy5qcyIsImhvbWVDb250cm9sbGVyLmpzIiwibWVyZ2VDb250cm9sbGVyLmpzIiwibWVyZ2VkQ29udHJvbGxlci5qcyIsInNvbG9Db250cm9sbGVyLmpzIiwiYmFuZEZpbHRlci5qcyIsImJhbmRTZXJ2aWNlLmpzIiwiZmlsdGVyU2VydmljZS5qcyIsImluc3RydW1lbnRTZXJ2aWNlLmpzIiwibG9naW5TZXJ2aWNlLmpzIiwic29sb1NlcnZpY2UuanMiLCJkY2ItbG9naW4vZGNiLWxvZ2luLmpzIiwiZGNiLWhlYWRlci9kY2ItaGVhZGVyLmpzIiwiZGNiLXJlZ2lzdGVyL2RjYi1yZWdpc3Rlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiQ09OU1RBTlRTIiwiQVBJX0JBU0VfVVJMIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkYXV0aFByb3ZpZGVyIiwibG9naW5VcmwiLCJvdGhlcndpc2UiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImluc3RydW1lbnRTZXJ2aWNlIiwiZmlsdGVyU2VydmljZSIsIl9pbml0Iiwidm0iLCJmaWx0ZXJEYXRhIiwiZmx0U3ZjIiwidGhpcyIsInRlc3QiLCIkc2NvcGUiLCJiYW5kU2VydmljZSIsInNvbG9TZXJ2aWNlIiwiZ2V0U29sb1RyYWNrcyIsInNvbG9TdmMiLCJnZXRUcmFja3MiLCJ0aGVuIiwiZGF0YSIsInNvbG9UcmFja3MiLCJmaWx0ZXJlZFRyYWNrcyIsImZpbHRlciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImZvckVhY2giLCJ0cmFjayIsImtleSIsImdvb2RTZWFyY2giLCJhcnRpc3QiLCJuYW1lIiwibWF0Y2giLCJSZWdFeHAiLCJ0aXRsZSIsInNvbmduYW1lIiwiaW5zdHJ1bWVudF9pZCIsInB1c2giLCJhcnJheU9iamVjdEluZGV4T2YiLCJteUFycmF5Iiwic2VhcmNoVGVybSIsInByb3BlcnR5IiwiaSIsImxlbiIsImxlbmd0aCIsImluc3RydW1lbnRzIiwiaW5zdFN2YyIsImJhbmRUcmFja0lkQXJyYXkiLCJiYW5kU3ZjIiwidHJhY2tBcnJheSIsImlkIiwiYWRkVG9CYW5kIiwicmVtb3ZlRnJvbUJhbmQiLCJpbmRleCIsInNwbGljZSIsImJhbmRUcmFja0FycmF5IiwiaW50SW5kZXgiLCJpbmRleE9mIiwiJHdhdGNoIiwidHJhY2sxIiwiQXVkaW8iLCJ0cmFjazIiLCJ0cmFja0lkIiwibGlzdCIsInJldHVyblZhbHVlIiwic2VydmljZSIsInN2YyIsInRlc3RWYWx1ZSIsInRlc3RGdW5jdGlvbiIsImFsZXJ0IiwiY3JlYXRlRmlsdGVyRGF0YSIsInZhbHVlIiwiJGh0dHAiLCJnZXREYXRhIiwib3B0aW9ucyIsImdldCIsImdldEluc3RydW1lbnRzIiwiZ2V0VXNlciIsInN1Y2Nlc3MiLCJ1c2VyIiwiZ2V0VHJhY2tCeUlkIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwic2NvcGUiLCJjb250cm9sbGVyQXMiLCIkYXV0aCIsImxvZ2luU2VydmljZSIsImxvZ2luU3ZjIiwidGFyZ2V0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9wdHMiLCJsaW5lcyIsIndpZHRoIiwicmFkaXVzIiwic2NhbGUiLCJjb3JuZXJzIiwiY29sb3IiLCJvcGFjaXR5Iiwicm90YXRlIiwiZGlyZWN0aW9uIiwic3BlZWQiLCJ0cmFpbCIsImZwcyIsInpJbmRleCIsImNsYXNzTmFtZSIsInRvcCIsImxlZnQiLCJzaGFkb3ciLCJod2FjY2VsIiwicG9zaXRpb24iLCJsb2dpbiIsInNwaW5uZXIiLCJTcGlubmVyIiwic3BpbiIsImxvYWRpbmciLCJjcmVkZW50aWFscyIsImVtYWlsIiwicGFzc3dvcmQiLCJzdG9wIiwiJCIsIm1vZGFsIiwic2hvd0xvZ2luIiwic2hvd1JlZ2lzdGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxLQUFNQyxRQUFRQyxP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YUFBYyxXQUNkbEYsV0FBWSIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcInVpLnJvdXRlclwiLCBcInNhdGVsbGl6ZXJcIl0pOyIsInZhciBDT05TVEFOVFMgPSAoZnVuY3Rpb24gKCkge1xyXG5cdFxyXG5cdHZhciBtb2R1bGUgPSB7fTtcclxuXHJcblx0bW9kdWxlLkFQSV9CQVNFX1VSTCA9IFwiaHR0cDovL2Rpc2NvdmVyYmFuZGFwaS5pbnQvcHVibGljL2FwaVwiO1xyXG5cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59KCkpOyIsImFwcC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGF1dGhQcm92aWRlcikge1xyXG4gICRhdXRoUHJvdmlkZXIubG9naW5VcmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgJy9hdXRoZW50aWNhdGUnO1xyXG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xyXG5cclxuICAkc3RhdGVQcm92aWRlclxyXG4gICAgLnN0YXRlKCdob21lJywge1xyXG4gICAgICB1cmw6IFwiL1wiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvaG9tZS5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwiaG9tZUNvbnRyb2xsZXIgYXMgaG9tZVwiXHJcbiAgICB9KVxyXG4gIFx0LnN0YXRlKCdzb2xvJywge1xyXG4gICAgICB1cmw6IFwiL3NvbG9cIixcclxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL3NvbG8uaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcInNvbG9Db250cm9sbGVyIGFzIHNvbG9cIlxyXG4gICAgfSlcclxuICAgIC5zdGF0ZSgnbWVyZ2VkJywge1xyXG4gICAgICB1cmw6IFwiL21lcmdlZFwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvbWVyZ2VkLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogXCJtZXJnZWRDb250cm9sbGVyIGFzIG1lcmdlZFwiXHJcbiAgICB9KVxyXG59KTsiLCJhcHAuY29udHJvbGxlcihcImhvbWVDb250cm9sbGVyXCIsIGZ1bmN0aW9uKGluc3RydW1lbnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHR2YXIgaW5zdFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xyXG5cdHZhciBmbHRTdmMgPSBmaWx0ZXJTZXJ2aWNlO1xyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdC8vaW5zdFN2Yy5nZXRJbnN0cnVtZW50cygpO1xyXG5cclxuXHRcdHZtLmZpbHRlckRhdGEgPSBmbHRTdmMuZmlsdGVyRGF0YTtcclxuXHR9XHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwibWVyZ2VDb250cm9sbGVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuY29udHJvbGxlcihcIm1lcmdlZENvbnRyb2xsZXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHJcblx0ZnVuY3Rpb24gX2luaXQoKSB7XHJcblx0XHR2bS50ZXN0ID0gXCJNZXJnZWRcIjtcclxuXHR9XHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwic29sb0NvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCBiYW5kU2VydmljZSwgc29sb1NlcnZpY2UsIGluc3RydW1lbnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHR2YXIgYmFuZFN2YyA9IGJhbmRTZXJ2aWNlO1xyXG5cdHZhciBzb2xvU3ZjID0gc29sb1NlcnZpY2U7XHJcblx0dmFyIGluc3RTdmMgPSBpbnN0cnVtZW50U2VydmljZTtcclxuXHR2YXIgZmx0U3ZjID0gZmlsdGVyU2VydmljZTtcclxuXHJcblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdGZ1bmN0aW9uIHBsYXlBdWRpb0ZpbGUodHJhY2spXHJcblx0e1xyXG5cdFx0dHJhY2sucGxheSgpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0U29sb1RyYWNrcygpXHJcblx0e1xyXG5cdFx0c29sb1N2Yy5nZXRUcmFja3MoKVxyXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dm0uc29sb1RyYWNrcyA9IGRhdGEuZGF0YTtcclxuXHRcdFx0XHR2bS5maWx0ZXJlZFRyYWNrcyA9IHZtLnNvbG9UcmFja3M7XHJcblx0XHRcdFx0ZmlsdGVyKCk7XHJcblx0XHRcdFxyXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBmaWx0ZXIoKVxyXG5cdHtcclxuXHRcdHZtLmZpbHRlcmVkVHJhY2tzID0gW107XHJcblxyXG5cdFx0YW5ndWxhci5mb3JFYWNoKHZtLnNvbG9UcmFja3MsIGZ1bmN0aW9uKHRyYWNrLCBrZXkpXHJcblx0XHR7XHJcblx0XHRcdC8vY29uc29sZS5sb2codHJhY2spO1xyXG5cdFx0XHRnb29kU2VhcmNoID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhLmFydGlzdCA9PSBcIlwiICYmICF0cmFjay5hcnRpc3QubmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEuYXJ0aXN0LCBcImlcIikpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS50aXRsZSA9PSBcIlwiICYmICF0cmFjay5zb25nbmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEudGl0bGUsIFwiaVwiKSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhW3RyYWNrLmluc3RydW1lbnRfaWRdKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0aWYoZ29vZFNlYXJjaClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZtLmZpbHRlcmVkVHJhY2tzLnB1c2godHJhY2spO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vY29uc29sZS5sb2codm0uZmlsdGVyZWRUcmFja3MpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBhcnJheU9iamVjdEluZGV4T2YobXlBcnJheSwgc2VhcmNoVGVybSwgcHJvcGVydHkpIHtcclxuICAgIFx0XHJcbiAgICBcdGZvcih2YXIgaSA9IDAsIGxlbiA9IG15QXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBcdGlmIChteUFycmF5W2ldW3Byb3BlcnR5XSA9PT0gc2VhcmNoVGVybSkgcmV0dXJuIGk7XHJcbiAgICBcdH1cclxuXHJcbiAgICBcdHJldHVybiAtMTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0Z2V0U29sb1RyYWNrcygpO1xyXG5cdFx0dm0uaW5zdHJ1bWVudHMgPSBpbnN0U3ZjLmluc3RydW1lbnRzO1xyXG5cdFx0dm0uZmlsdGVyRGF0YSA9IGZsdFN2Yy5maWx0ZXJEYXRhO1xyXG5cdFx0dm0uYmFuZFRyYWNrSWRBcnJheSA9IFtdO1xyXG5cclxuXHRcdGFuZ3VsYXIuZm9yRWFjaChiYW5kU3ZjLnRyYWNrQXJyYXksIGZ1bmN0aW9uKHRyYWNrLCBrZXkpIHtcclxuXHRcdFx0dm0uYmFuZFRyYWNrSWRBcnJheS5wdXNoKHRyYWNrLmlkKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vdm0udHJhY2sxLnBsYXkoKTtcclxuXHRcdC8vc2V0VGltZW91dChmdW5jdGlvbigpe3BsYXlBdWRpb0ZpbGUodm0udHJhY2syKX0sIDQwMCk7XHJcblx0fVxyXG5cclxuXHQvL1ZtIGZ1bmN0aW9uc1xyXG5cdHZtLmFkZFRvQmFuZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XHJcblxyXG5cdFx0YmFuZFN2Yy50cmFja0FycmF5LnB1c2godHJhY2spO1xyXG5cdFx0YW5ndWxhci5mb3JFYWNoKGJhbmRTdmMudHJhY2tBcnJheSwgZnVuY3Rpb24odHJhY2ssIGtleSkge1xyXG5cdFx0XHR2bS5iYW5kVHJhY2tJZEFycmF5LnB1c2godHJhY2suaWQpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coXCJUcmFjayBhZGRlZCB0byBuZXcgYmFuZDogXCIgKyB0cmFjayk7XHJcblx0XHRjb25zb2xlLmxvZyhiYW5kU3ZjLnRyYWNrQXJyYXkpO1xyXG5cdH1cclxuXHJcblx0dm0ucmVtb3ZlRnJvbUJhbmQgPSBmdW5jdGlvbih0cmFjaykge1xyXG5cdFx0XHJcblx0XHRpbmRleCA9IGFycmF5T2JqZWN0SW5kZXhPZihiYW5kU3ZjLnRyYWNrQXJyYXksIHRyYWNrLmlkLCBcImlkXCIpO1xyXG5cdFx0aWYgKGluZGV4ID4gLTEpIHtcclxuXHRcdFx0YmFuZFN2Yy50cmFja0FycmF5LnNwbGljZShpbmRleCwgMSk7XHJcblx0XHRcdHZtLmJhbmRUcmFja0FycmF5ID0gYmFuZFN2Yy50cmFja0FycmF5O1xyXG5cclxuXHRcdFx0aW50SW5kZXggPSB2bS5iYW5kVHJhY2tJZEFycmF5LmluZGV4T2YodHJhY2suaWQpO1xyXG5cdFx0XHRpZiAoaW50SW5kZXggPiAtMSkge1xyXG5cdFx0XHRcdHZtLmJhbmRUcmFja0lkQXJyYXkuc3BsaWNlKGludEluZGV4LCAxKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiVHJhY2sgcmVtb3ZlZCBmcm9tIG5ldyBiYW5kOiBcIiArIHRyYWNrKTtcclxuXHRcdGNvbnNvbGUubG9nKGJhbmRTdmMudHJhY2tBcnJheSk7XHJcblx0fVxyXG5cclxuXHQvL1dhdGNoZXNcclxuXHQkc2NvcGUuJHdhdGNoKFxyXG5cdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gdm0uZmlsdGVyRGF0YSB9LCBcclxuXHRcdGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdGlmKHZtLmZpbHRlckRhdGEpIFxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZmlsdGVyKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIHRydWUpO1xyXG5cclxuXHJcblxyXG5cdHZtLnRyYWNrMSA9IG5ldyBBdWRpbyhcImRpc3QvYXVkaW8vQmVoZW1vdGggLSBDb25xdWVyIEFsbCAtIERydW0ubXAzXCIpO1xyXG5cdHZtLnRyYWNrMiA9IG5ldyBBdWRpbyhcImRpc3QvYXVkaW8vQmVoZW1vdGggLSBDb25xdWVyIEFsbCAtIEd1aXRhci5tcDNcIik7XHJcblxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuZmlsdGVyKFwiYmFuZFwiLCBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gZnVuY3Rpb24odHJhY2tJZCwgbGlzdCkge1xyXG5cdFx0dmFyIHJldHVyblZhbHVlID0gZmFsc2U7XHJcblx0XHRcclxuXHRcdGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbihpZCwgaW5kZXgpIHtcclxuXHRcdFx0aWYoaWQgPT0gdHJhY2tJZCkge1xyXG5cdFx0XHRcdHJldHVyblZhbHVlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fVxyXG59KTsiLCJhcHAuc2VydmljZShcImJhbmRTZXJ2aWNlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdHZhciBzdmMgPSB0aGlzO1xyXG5cdHN2Yy50ZXN0VmFsdWUgPSBcIlRoaXMgdmFsdWUgaXMgZnJvbSBhIHNlcnZpY2UhXCI7XHJcblxyXG5cdHN2Yy50cmFja0FycmF5ID0gW107XHJcblxyXG5cdFxyXG5cclxuXHJcblxyXG5cclxuXHRzdmMudGVzdEZ1bmN0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHRhbGVydChcIlRlc3QgZnVuY3Rpb24gY2FsbGVkIGZyb20gaW5zaWRlIHNlcnZpY2UhXCIpO1xyXG5cdH1cclxufSkiLCJhcHAuc2VydmljZShcImZpbHRlclNlcnZpY2VcIiwgZnVuY3Rpb24oaW5zdHJ1bWVudFNlcnZpY2UpIHtcclxuXHRcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHR2YXIgaW5zdFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xyXG5cclxuXHJcblx0c3ZjLmNyZWF0ZUZpbHRlckRhdGEgPSBmdW5jdGlvbigpXHJcblx0e1xyXG5cdFx0c3ZjLmZpbHRlckRhdGEgPSB7XHRcImFydGlzdFwiOiBcIlwiLFxyXG5cdFx0XHRcdFx0XHRcdFwidGl0bGVcIjogXCJcIixcclxuXHRcdFx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdGFuZ3VsYXIuZm9yRWFjaChpbnN0U3ZjLmluc3RydW1lbnRzLCBmdW5jdGlvbih2YWx1ZSwga2V5KVxyXG5cdFx0e1xyXG5cdFx0XHRzdmMuZmlsdGVyRGF0YVt2YWx1ZS5pZF0gPSB0cnVlO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdHN2Yy5jcmVhdGVGaWx0ZXJEYXRhKCk7XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KSIsImFwcC5zZXJ2aWNlKFwiaW5zdHJ1bWVudFNlcnZpY2VcIiwgZnVuY3Rpb24oJGh0dHApIHtcclxuXHRcclxuXHQvL0dsb2JhbHNcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHJcblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdGZ1bmN0aW9uIGdldERhdGEgKHVybCwgb3B0aW9ucykge1xyXG5cclxuXHRcdCFvcHRpb25zID8gb3B0aW9ucyA9IHt9IDogXCJcIjtcclxuXHJcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcclxuXHR9XHJcblxyXG5cdC8vU3ZjIGZ1bmN0aW9uc1xyXG5cdHN2Yy5nZXRJbnN0cnVtZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL2luc3RydW1lbnRzXCI7XHJcblx0XHRcclxuXHRzdmMuaW5zdHJ1bWVudHMgPSBnZXREYXRhKHVybCk7XHJcblx0fVxyXG5cclxuXHRzdmMuaW5zdHJ1bWVudHMgPSBbe1xyXG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwiTGVhZC1ndWl0YXJcIixcclxuXHRcdFx0XHRcdFx0XHRcImlkXCI6MVxyXG5cdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJEcnVtXCIsXHJcblx0XHRcdFx0XHRcdFx0XCJpZFwiOjJcclxuXHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwiQmFzc1wiLFxyXG5cdFx0XHRcdFx0XHRcdFwiaWRcIjozXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIktleXNcIixcclxuXHRcdFx0XHRcdFx0XHRcImlkXCI6NFxyXG5cdFx0XHRcdFx0XHR9XTtcclxufSkiLCJhcHAuc2VydmljZShcImxvZ2luU2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1x0XHJcblx0dmFyIHN2YyA9IHRoaXM7XHJcblxyXG5cdHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKVxyXG5cdHtcclxuXHRcdCRodHRwLmdldChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdXNlclwiKS5zdWNjZXNzKGZ1bmN0aW9uKHVzZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codXNlcik7XHJcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICBcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuXHR9XHJcbn0pIiwiYXBwLnNlcnZpY2UoXCJzb2xvU2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1xyXG5cdFxyXG5cdC8vR2xvYmFsc1xyXG5cdHZhciBzdmMgPSB0aGlzO1xyXG5cclxuXHQvL1ByaXZhdGUgZnVuY3Rpb25zXHJcblx0ZnVuY3Rpb24gZ2V0RGF0YSAodXJsLCBvcHRpb25zKSB7XHJcblxyXG5cdFx0IW9wdGlvbnMgPyBvcHRpb25zID0ge30gOiBcIlwiO1xyXG5cclxuXHRcdHJldHVybiAkaHR0cC5nZXQodXJsLCBvcHRpb25zKVxyXG5cdH1cclxuXHJcblx0Ly9TdmMgZnVuY3Rpb25zXHJcblx0c3ZjLmdldFRyYWNrcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3RyYWNrc1wiO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xyXG5cdH1cclxuXHJcblx0c3ZjLmdldFRyYWNrQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG5cclxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdHJhY2tzL1wiICsgaWQ7XHJcblxyXG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcclxuXHR9XHJcbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYkxvZ2luXCIsIGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB7XHJcblx0XHRyZXN0cmljdDogXCJFXCIsXHJcblx0XHR0ZW1wbGF0ZVVybDogXCJhcHAvZGlyZWN0aXZlcy9kY2ItbG9naW4vZGNiLWxvZ2luLmh0bWxcIixcclxuXHRcdHJlcGxhY2U6IHRydWUsXHJcblx0XHRzY29wZToge30sXHJcblx0XHRjb250cm9sbGVyQXM6IFwibG9naW5cIixcclxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRhdXRoLCBsb2dpblNlcnZpY2UpIHtcclxuXHRcdFx0dmFyIHZtIFx0XHRcdD0gdGhpcztcclxuXHRcdFx0dmFyIGxvZ2luU3ZjIFx0PSBsb2dpblNlcnZpY2U7XHJcblx0XHRcdHZhciB0YXJnZXQgXHRcdD0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luLXNwaW5uZXInKTtcclxuXHJcblx0XHRcdHZhciBvcHRzID0ge1xyXG5cdCAgXHRcdFx0bGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xyXG5cdFx0XHRcdCwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxyXG5cdFx0XHRcdCwgd2lkdGg6IDE0IC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xyXG5cdFx0XHRcdCwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcclxuXHRcdFx0XHQsIHNjYWxlOiAwLjQgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxyXG5cdFx0XHRcdCwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxyXG5cdFx0XHRcdCwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXHJcblx0XHRcdFx0LCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXHJcblx0XHRcdFx0LCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxyXG5cdFx0XHRcdCwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcclxuXHRcdFx0XHQsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXHJcblx0XHRcdFx0LCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcclxuXHRcdFx0XHQsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXHJcblx0XHRcdFx0LCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcclxuXHRcdFx0XHQsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXHJcblx0XHRcdFx0LCB0b3A6ICc2MCUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdFx0XHQsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcblx0XHRcdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XHJcblx0XHRcdFx0LCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cclxuXHRcdFx0XHQsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcclxuXHRcdFx0fVxyXG5cclxuXHQgICAgICAgIHZtLmxvZ2luID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgICBcdGNvbnNvbGUubG9nKCdTZW50Jyk7XHJcblx0ICAgICAgICBcdHZhciBzcGlubmVyID0gbmV3IFNwaW5uZXIob3B0cykuc3Bpbih0YXJnZXQpO1xyXG5cdCAgICAgICAgXHR2bS5sb2FkaW5nIFx0PSB0cnVlO1xyXG5cclxuXHQgICAgICAgICAgICB2YXIgY3JlZGVudGlhbHMgPSB7XHJcblx0ICAgICAgICAgICAgICAgIGVtYWlsOiB2bS5lbWFpbCxcclxuXHQgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHZtLnBhc3N3b3JkXHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIFxyXG5cdCAgICAgICAgICAgICRhdXRoLmxvZ2luKGNyZWRlbnRpYWxzKS50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHQgICAgICAgICAgICBcdC8vIEF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NcclxuXHQgICAgICAgICAgICBcdHNwaW5uZXIuc3RvcCgpO1xyXG5cdCAgICAgICAgICAgIFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdCAgICAgICAgICAgIFx0JCgnI2xvZ2luX21vZGFsJykubW9kYWwoKTtcclxuXHRcdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCdjbG9zZScpO1xyXG5cdCAgICAgICAgICAgIFx0Y29uc29sZS5sb2coZGF0YSk7XHJcblx0ICAgICAgICAgICAgXHRsb2dpblN2Yy5nZXRVc2VyKCk7XHJcblx0ICAgICAgICAgICAgfSwgXHJcblx0ICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3Ipe1xyXG5cdCAgICAgICAgICAgIFx0Ly8gQXV0aGVudGljYXRpb24gZmFpbGVkXHJcblx0ICAgICAgICAgICAgXHRzcGlubmVyLnN0b3AoKTtcclxuXHQgICAgICAgICAgICBcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHQgICAgICAgICAgICBcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHQgICAgICAgICAgICB9KTtcclxuXHQgICAgICAgIH1cclxuXHRcdH1cclxuXHR9XHJcbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYkhlYWRlclwiLCBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4ge1xyXG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxyXG5cdFx0dGVtcGxhdGVVcmw6IFwiYXBwL2RpcmVjdGl2ZXMvZGNiLWhlYWRlci9kY2ItaGVhZGVyLmh0bWxcIixcclxuXHRcdHJlcGxhY2U6IHRydWUsXHJcblx0XHRzY29wZToge30sXHJcblx0XHRjb250cm9sbGVyQXM6IFwiaGVhZFwiLFxyXG5cdFx0Y29udHJvbGxlcjogZnVuY3Rpb24obG9naW5TZXJ2aWNlKSB7XHJcblx0XHRcdHZhciB2bSBcdFx0XHQ9IHRoaXM7XHJcblx0XHRcdHZhciBsb2dpblN2YyBcdD0gbG9naW5TZXJ2aWNlO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gX2luaXQoKSB7XHJcblx0XHRcdFx0dm0udmFsdWUgPSBcIlRoaXMgaXMgYSBkaXJlY3RpdmUgdGVzdCB2YWx1ZSFcIjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dm0uc2hvd0xvZ2luID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0JCgnI2xvZ2luX21vZGFsJykubW9kYWwoJ29wZW4nKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dm0uc2hvd1JlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQoJyNyZWdpc3Rlcl9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0JCgnI3JlZ2lzdGVyX21vZGFsJykubW9kYWwoJ29wZW4nKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0X2luaXQoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYlJlZ2lzdGVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB7XHJcblx0XHRyZXN0cmljdDogXCJFXCIsXHJcblx0XHR0ZW1wbGF0ZVVybDogXCJhcHAvZGlyZWN0aXZlcy9kY2ItcmVnaXN0ZXIvZGNiLXJlZ2lzdGVyLmh0bWxcIixcclxuXHRcdHJlcGxhY2U6IHRydWUsXHJcblx0XHRzY29wZToge30sXHJcblx0XHRjb250cm9sbGVyQXM6IFwicmVnaXN0ZXJcIixcclxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0XHRcclxuXHRcdH1cclxuXHR9XHJcbn0pIl19
