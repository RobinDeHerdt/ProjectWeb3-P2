var app=angular.module("app",["ui.router","satellizer","ngCookies","ngFileUpload"]),CONSTANTS=function(){var e={};return e.API_BASE_URL="http://discoverbandapi.int/public/api",e}();app.config(["$stateProvider","$urlRouterProvider","$authProvider","$httpProvider",function(e,r,t,n){t.loginUrl=CONSTANTS.API_BASE_URL+"/login",t.signupUrl=CONSTANTS.API_BASE_URL+"/register",r.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/pages/home.html",controller:"homeController as home"}).state("solo",{url:"/solo",templateUrl:"app/pages/solo.html",controller:"soloController as solo"}).state("merged",{url:"/merged",templateUrl:"app/pages/merged.html",controller:"mergedController as merged"}).state("band",{url:"/band",templateUrl:"app/pages/band.html",controller:"bandController as band"}).state("merge",{url:"/merge",templateUrl:"app/pages/merge.html",controller:"mergeController as merge"}).state("profile",{url:"/profile",templateUrl:"app/pages/profile.html",controller:"profileController as profile",data:{requiresLoggedIn:!0}}).state("upload",{url:"/upload",templateUrl:"app/pages/upload.html",controller:"uploadController as upload",data:{requiresLoggedIn:!0}})}]).run(["$rootScope","$location","$auth","$state",function(e,r,t,n){function o(e){return!e.data||!e.data.requiresLoggedIn||t.isAuthenticated()}var a="/";e.$on("$stateChangeStart",function(e,t,i,c,s){var l=t.url;i&&(l=n.href(t,i),l=l.replace("#","")),o(t)?r.path(l):(console.log("notLoggedIn"),r.path(a))})}]),app.controller("bandController",["bandService",function(e){function r(){t.trackArray=n.getTrackArray}var t=this,n=e;r()}]),app.controller("homeController",["instrumentService","filterService",function(e,r){function t(){n.filterData=o.soloFilterData}var n=this,o=r;t()}]),app.controller("mergeController",["bandService","mergedService","$state",function(e,r,t){function n(){o.tracks=a.getTrackArray(),o.showTracks=!1,o.thereAreTracks=!1,o.loadedTracks=[],o.savedTime=[],o.trimAmounts=[],o.tracks.length>0&&(o.thereAreTracks=!0)}var o=this,a=e,i=r,c=[];o.load=function(){if(o.thereAreTracks){for(var e=o.tracks.length-1;e>=0;e--){var r=o.tracks[e].id;c[r]=WaveSurfer.create({container:"#waveform"+r,waveColor:"green",progressColor:"purple"}),c[r].load("http://discoverbandapi.int/public/api/audio/"+o.tracks[e].file_url),o.loadedTracks.push({track_id:r,trim_amount:0,user_id:o.tracks[e].user.id}),console.log(o.loadedTracks)}o.showTracks=!0}},o.playPause=function(e){c[e].isPlaying()||(o.savedTime[e]=c[e].getCurrentTime(),console.log(o.savedTime)),c[e].playPause(),c[e].zoom(50)},o.trim=function(e){for(var r=c[e].getCurrentTime(),t=o.loadedTracks.length-1;t>=0;t--)o.loadedTracks[t].track_id===e&&(o.loadedTracks[t].trim_amount=r,o.trimAmounts[e]=Math.round(100*r)/100)},o.playPauseAll=function(){for(var e=o.loadedTracks.length-1;e>=0;e--){var r=o.loadedTracks[e].track_id;c[r].isPlaying()||(o.savedTime[r]=c[r].getCurrentTime()),c[r].playPause(),c[r].zoom(50)}},o.toPrevious=function(){for(var e=o.loadedTracks.length-1;e>=0;e--){var r=o.loadedTracks[e].track_id,t=o.savedTime[r],n=c[r].getDuration(),a=t/n;c[r].seekAndCenter(a)}},o.toStart=function(e){c[e].seekAndCenter(0)},o.save=function(){$("#processing_modal").modal(),$("#processing_modal").modal("open"),i.mergeTracks(o.loadedTracks).then(function(e){$("#processing_modal").modal("close"),t.go("merged")},function(e){console.log(e)})},n()}]),app.controller("mergedController",["$scope","mergedService","filterService",function(e,r,t){function n(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),n=t.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(r))return a.substring(r.length,a.length)}return""}function o(){r.getTracks().then(function(e){c.mergedTracks=e.data,c.filteredTracks=c.mergedTracks,a(),angular.forEach(c.mergedTracks,function(e,r){newTrack=new Audio("http://discoverbandapi.int/public/audio/"+e.file_url),c.mergedTrackAudio[e.id]=newTrack});for(var r=c.mergedTracks.length-1;r>=0;r--)c.voteCountPerTrack[c.mergedTracks[r].id]=c.mergedTracks[r].merged_track_votes.length},function(e){console.log(e)})}function a(){c.filteredTracks=[],angular.forEach(c.mergedTracks,function(e,r){goodSearch=!0,""!=!c.filterData.artist||e.artist.name.match(new RegExp(c.filterData.artist,"i"))||(goodSearch=!1),""!=!c.filterData.title||e.songname.match(new RegExp(c.filterData.title,"i"))||(goodSearch=!1),goodSearch&&c.filteredTracks.push(e)})}function i(){c.mergedTrackAudio=[],c.currentAudioTrackId="",c.source="/dist/img/rockhand.png",o(),c.filterData=l.mergedFilterData,c.voteCountPerTrack=[]}var c=this,s=r,l=t;c.play=function(e){""!=c.currentAudioTrackId&&c.pause(c.currentAudioTrackId),c.currentAudioTrackId=e,c.mergedTrackAudio[e].play()},c.pause=function(e){c.mergedTrackAudio[e].pause(),c.currentAudioTrackId=""},c.download=function(e){window.open(CONSTANTS.API_BASE_URL+"/mergedtracks/"+e+"/download","_blank","")},c.upVote=function(e){var r=JSON.parse(n("user")).userId,t={track_id:e,user_id:r};s.insertVote(t).then(function(r){"OK"==r.data.status?c.voteCountPerTrack[e]++:console.log("already voted")},function(e){console.log(e)})},e.$watch(function(){return c.filterData},function(){c.filterData&&a()},!0),i()}]),app.controller("profileController",["userService",function(e){function r(){n.getUser().then(function(e){t.username=e.data.username,t.email=e.data.email})}var t=this,n=e,o=document.getElementById("update-profile-spinner"),a={lines:13,length:28,width:12,radius:42,scale:.15,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"89%",left:"25.5%",shadow:!1,hwaccel:!1,position:"absolute"};t.update=function(){var e=new Spinner(a).spin(o);t.loading=!0;var r={username:t.username,email:t.email};n.updateUser(r).then(function(r){e.stop(),t.loading=!1},function(r){e.stop(),t.loading=!1})},r()}]),app.controller("soloController",["$scope","bandService","soloService","instrumentService","filterService",function(e,r,t,n,o){function a(){u.getTracks().then(function(e){s.soloTracks=e.data,s.filteredTracks=s.soloTracks,i(),angular.forEach(s.soloTracks,function(e,r){newTrack=new Audio("http://discoverbandapi.int/public/audio/"+e.file_url),s.soloTrackAudio[e.id]=newTrack})},function(e){console.log(e)})}function i(){s.filteredTracks=[],angular.forEach(s.soloTracks,function(e,r){goodSearch=!0,""!=!s.filterData.artist||e.artist.name.match(new RegExp(s.filterData.artist,"i"))||(goodSearch=!1),""!=!s.filterData.title||e.songname.match(new RegExp(s.filterData.title,"i"))||(goodSearch=!1),s.filterData[e.instrument_id]||(goodSearch=!1),goodSearch&&s.filteredTracks.push(e)}),0===s.filteredTracks.length?s.showNoResultsFound=!0:s.showNoResultsFound=!1}function c(){s.soloTrackAudio=[],s.currentAudioTrackId="",s.showNoResultsFound=!1,d.getInstruments().then(function(e){s.instruments=e.data},function(e){console.log(e)}),a(),s.filterData=p.soloFilterData,s.trackArray=l.getTrackArray,s.bandTrackIdArray=l.getTrackIdArray,s.trackArrayCount=l.getTrackArrayCount}var s=this,l=r,u=t,d=n,p=o;s.addToBand=function(e){l.addToTrackArray(e),console.log(e)},s.removeFromBand=function(e){l.removeFromTrackArray(e),console.log("Track removed from new band: "+e)},s.play=function(e){""!=s.currentAudioTrackId&&s.pause(s.currentAudioTrackId),s.currentAudioTrackId=e,s.soloTrackAudio[e].play()},s.pause=function(e){s.soloTrackAudio[e].pause(),s.currentAudioTrackId=""},e.$watch(function(){return s.filterData},function(){s.filterData&&i()},!0),c()}]),app.controller("uploadController",["Upload","artistService","instrumentService","soloService","$state",function(e,r,t,n,o){function a(){c.uploaded=!1,c.showform=!1,c.instruments=u.getInstruments().then(function(e){c.instruments=e.data,console.log(e.data)},function(e){console.log(e)}),c.artists=l.getArtists().then(function(e){console.log(e.data),c.artists=e.data},function(e){console.log(e)})}function i(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),n=t.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(r))return a.substring(r.length,a.length)}return""}var c=this,s=n,l=r,u=t,d=document.getElementById("upload-spinner"),p={lines:13,length:28,width:12,radius:42,scale:.3,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"40%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};c.uploadFile=function(r){var t=new Spinner(p).spin(d);c.loading=!0,c.uploaded=!1,c.showform=!0,$("select").material_select(),e.upload({url:CONSTANTS.API_BASE_URL+"/upload",fileFormDataName:"song",sendFieldsAs:"form",data:{song:r}}).then(function(e){c.filename=e.data.name,c.tracklength=e.data.length,t.stop(),c.loading=!1,c.uploaded=!0},function(e){c.loading=!1,t.stop(),c.uploadfailed=!0})},c.save=function(){var e=JSON.parse(i("user")).userId,r={name:c.songname,file_url:c.filename,track_length:c.tracklength,user_id:e,instrument_id:c.instrumentsdropdown,artist_id:c.artistname};s.insertTrack(r).then(function(e){o.go("solo"),console.log(e)},function(e){console.log(e)})},a()}]),app.filter("band",function(){return function(e,r){var t=!1;return angular.forEach(r,function(r,n){r==e&&(t=!0)}),t}}),app.service("artistService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getArtists=function(){var e=CONSTANTS.API_BASE_URL+"/artists";return r(e)}}]),app.service("authService",["$auth","$rootScope","$cookies","$state","userService",function(e,r,t,n,o){function a(e,n,o,a){var c=new Date;c=c.setTime(c.getTime()+1e3*e.expires_in),c=new Date(c);var s={token:e,userId:n,username:o,email:a};i.user=s,t.putObject("user",s,{expires:c}),r.isLoggedIn=!0,"1"==s.isAdmin?r.isAdmin=!0:r.isAdmin=!1}var i=this,c=o;i.isLoggedIn=!1,i.login=function(r){e.login(r).then(function(e){token=e.data.token,id=0,username="",email="",c.getUser().then(function(e){id=e.data.id,username=e.data.username,email=e.data.email,a(token,id,username,email),i.isLoggedIn=!0},function(e){console.log(e),i.isLoggedIn=!1})},function(e){console.log(e),i.isLoggedIn=!1})},i.logout=function(){e.logout().then(function(e){r.isLoggedIn=!1,r.isAdmin=!1,i.user=null,i.isLoggedIn=null,t.remove("user"),n.go("home")},function(e){console.log(e)})},i.register=function(e){var r=CONSTANTS.API_BASE_URL+"/user";return $http.post(r,e)}}]),app.service("bandService",function(){function e(e,r,t){for(var n=0,o=e.length;n<o;n++)if(e[n][t]===r)return n;return-1}function r(){return trackArrayCount++,trackArrayCount}function t(){return trackArrayCount--,trackArrayCount}function n(e){return trackIdArray.push(e),trackIdArray}function o(e){return index=trackIdArray.indexOf(e),index>-1&&trackIdArray.splice(index,1),trackIdArray}var a=this;trackArray=[],trackIdArray=[],trackArrayCount=0,a.getTrackArrayCount=function(){return trackArrayCount},a.getTrackIdArray=function(){return trackIdArray},a.addToTrackArray=function(e){return trackArray.push(e),r(),n(e.id),trackArray},a.removeFromTrackArray=function(r){return index=e(trackArray,r.id,"id"),index>-1&&trackArray.splice(index,1),t(),o(r.id),trackArray},a.getTrackArray=function(){return trackArray},a.testFunction=function(){alert("Test function called from inside service!")}}),app.service("filterService",["instrumentService",function(e){function r(){t.createSoloFilterData(),t.createMergedFilterData()}var t=this,n=e;t.createSoloFilterData=function(){t.soloFilterData={artist:"",title:""},angular.forEach(n.instruments,function(e,r){t.soloFilterData[e.id]=!0})},t.createMergedFilterData=function(){t.mergedFilterData={artist:"",title:""}},r()}]),app.service("instrumentService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getInstruments=function(){var e=CONSTANTS.API_BASE_URL+"/instruments";return r(e)},t.instruments=[{name:"Lead-guitar",id:1},{name:"Rythm-guitar",id:2},{name:"Drum",id:3},{name:"Bass",id:4},{name:"Bass",id:5},{name:"Keys",id:6}]}]),app.service("mergedService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/mergedtracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/mergedtracks/"+e;return r(t)},t.mergeTracks=function(r){return e.post(CONSTANTS.API_BASE_URL+"/mergedtracks/create",r)},t.insertVote=function(r){return e.post(CONSTANTS.API_BASE_URL+"/vote/create",r)},t.download=function(e){var t=CONSTANTS.API_BASE_URL+"/mergedtracks/"+e+"/download";return r(t)}}]),app.service("soloService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/tracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/tracks/"+e;return r(t)},t.insertTrack=function(r){return e.post(CONSTANTS.API_BASE_URL+"/tracks/create",r)}}]),app.service("userService",["$http",function(e){var r=this;r.getUser=function(){return e.get(CONSTANTS.API_BASE_URL+"/user")},r.updateUser=function(r){return e.post(CONSTANTS.API_BASE_URL+"/user",r)}}]),app.directive("dcbHeader",["bandService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-header/dcb-header.html",replace:!0,scope:{},controllerAs:"head",controller:["$scope","userService","authService","$auth","$rootScope",function(r,t,n,o,a){function i(){c.trackArray=u.getTrackArray,c.trackArrayCount=u.getTrackArrayCount,o.isAuthenticated()&&s.getUser().then(function(e){a.username=e.data.username})}var c=this,s=t,l=n,u=e;c.showLogin=function(){$("#login_modal").modal(),$("#login_modal").modal("open")},c.logout=function(){l.logout()},c.showRegister=function(){$("#register_modal").modal(),$("#register_modal").modal("open")},c.showBand=function(){$("#band_modal").modal(),$("#band_modal").modal("open")},c.isAuthenticated=function(){return o.isAuthenticated()},i(),r.$watch(function(){return l.user},function(){c.user=l.user})}]}}]),app.directive("dcbBand",["bandService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-band/dcb-band.html",replace:!0,scope:{},controllerAs:"band",controller:["$auth","$scope","$rootScope",function(r,t,n){function o(){a.trackArray=i.getTrackArray,a.bandTrackIdArray=i.getTrackIdArray,a.trackArrayCount=i.getTrackArrayCount}var a=this,i=e;a.removeFromBand=function(e){i.removeFromTrackArray(e),console.log("Track removed from new band: "+e)},o()}]}}]),app.directive("dcbLogin",function(){return{restrict:"E",templateUrl:"app/directives/dcb-login/dcb-login.html",replace:!0,scope:{},controllerAs:"login",controller:["$auth","$scope","$rootScope","userService","authService","$cookies",function(e,r,t,n,o,a){var i=this,c=o,s=document.getElementById("login-spinner"),l={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};i.login=function(){var e=new Spinner(l).spin(s);i.loading=!0,console.log(i.loading);var t={email:i.email,password:i.password};c.login(t);r.$watch(function(){return c.isLoggedIn},function(){c.isLoggedIn&&(i.loading=!1,$("#login_modal").modal(),$("#login_modal").modal("close"),e.stop()),c.isLoggedIn||(e.stop(),i.loading=!1)},!0)}}]}}),app.directive("dcbMergeprocessing",function(){return{restrict:"E",templateUrl:"app/directives/dcb-mergeprocessing/dcb-mergeprocessing.html",replace:!0,scope:{},controllerAs:"processing",controller:["$interval",function(e){var r=this,t=document.getElementById("processing-spinner"),n={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"40%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},o=["Tuning instruments...","Adjusting amp settings...","Soundchecking...","Recording...","Mixing sound...","Finishing up..."],a=(new Spinner(n).spin(t),0);e(function(){$("#processing_modal").is(":visible")&&(r.text=o[a],a++,a>=o.length-1&&(a=0))},4e3)}]}}),app.directive("dcbRegister",["userService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-register/dcb-register.html",replace:!0,scope:{},controllerAs:"register",controller:["$auth","$scope","$rootScope","userService","authService",function(e,r,t,n,o){var a=this,i=o,c=document.getElementById("register-spinner"),s={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};a.register=function(){var t=new Spinner(s).spin(c);a.loading=!0;var n={username:a.username,email:a.email,password:a.password};e.signup(n).then(function(e){i.login(n);var o=r.$watch(function(){return i.isLoggedIn},function(){i.isLoggedIn&&(a.loading=!1,$("#register_modal").modal(),$("#register_modal").modal("close"),t.stop(),o()),i.isLoggedIn===!1&&(t.stop(),a.loading=!1,o())},!0)})["catch"](function(e){t.stop(),a.loading=!1,console.log(e)})}}]}}]),app.directive("dcbSticky",["$window",function(e){var r=angular.element(e);return{restrict:"A",link:function(e,t,n){var o=n.dcbSticky,a=t.offset().top;r.on("scroll",function(e){r.scrollTop()>=a?t.addClass(o):t.removeClass(o)})}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsInJvdXRlcy5qcyIsImJhbmRDb250cm9sbGVyLmpzIiwiaG9tZUNvbnRyb2xsZXIuanMiLCJtZXJnZUNvbnRyb2xsZXIuanMiLCJtZXJnZWRDb250cm9sbGVyLmpzIiwicHJvZmlsZUNvbnRyb2xsZXIuanMiLCJzb2xvQ29udHJvbGxlci5qcyIsInVwbG9hZENvbnRyb2xsZXIuanMiLCJiYW5kRmlsdGVyLmpzIiwiYXJ0aXN0U2VydmljZS5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiYmFuZFNlcnZpY2UuanMiLCJmaWx0ZXJTZXJ2aWNlLmpzIiwiaW5zdHJ1bWVudFNlcnZpY2UuanMiLCJtZXJnZWRTZXJ2aWNlLmpzIiwic29sb1NlcnZpY2UuanMiLCJ1c2VyU2VydmljZS5qcyIsImRjYi1oZWFkZXIvZGNiLWhlYWRlci5qcyIsImRjYi1iYW5kL2RjYi1iYW5kLmpzIiwiZGNiLWxvZ2luL2RjYi1sb2dpbi5qcyIsImRjYi1tZXJnZXByb2Nlc3NpbmcvZGNiLW1lcmdlcHJvY2Vzc2luZy5qcyIsImRjYi1yZWdpc3Rlci9kY2ItcmVnaXN0ZXIuanMiLCJkY2Itc3RpY2t5L2RjYi1zdGlja3kuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsIkNPTlNUQU5UUyIsIkFQSV9CQVNFX1VSTCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGF1dGhQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJsb2dpblVybCIsInNpZ251cFVybCIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiZGF0YSIsInJlcXVpcmVzTG9nZ2VkSW4iLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJGF1dGgiLCIkc3RhdGUiLCJpc0F1dGhvcml6ZWQiLCJ0b1N0YXRlIiwiaXNBdXRoZW50aWNhdGVkIiwicmVkaXJlY3RTdGF0ZSIsIiRvbiIsImUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJuZXh0IiwiaHJlZiIsInJlcGxhY2UiLCJwYXRoIiwiY29uc29sZSIsImxvZyIsImJhbmRTZXJ2aWNlIiwiX2luaXQiLCJ2bSIsInRyYWNrQXJyYXkiLCJiYW5kU3ZjIiwiZ2V0VHJhY2tBcnJheSIsInRoaXMiLCJpbnN0cnVtZW50U2VydmljZSIsImZpbHRlclNlcnZpY2UiLCJmaWx0ZXJEYXRhIiwiZmx0U3ZjIiwic29sb0ZpbHRlckRhdGEiLCJtZXJnZWRTZXJ2aWNlIiwidHJhY2tzIiwic2hvd1RyYWNrcyIsInRoZXJlQXJlVHJhY2tzIiwibG9hZGVkVHJhY2tzIiwic2F2ZWRUaW1lIiwidHJpbUFtb3VudHMiLCJsZW5ndGgiLCJtZXJnZWRTdmMiLCJ3YXZlc3VyZmVyIiwibG9hZCIsImkiLCJ0cmFja19pZCIsImlkIiwiV2F2ZVN1cmZlciIsImNyZWF0ZSIsImNvbnRhaW5lciIsIndhdmVDb2xvciIsInByb2dyZXNzQ29sb3IiLCJmaWxlX3VybCIsInB1c2giLCJ0cmltX2Ftb3VudCIsInVzZXJfaWQiLCJ1c2VyIiwicGxheVBhdXNlIiwiaXNQbGF5aW5nIiwiZ2V0Q3VycmVudFRpbWUiLCJ6b29tIiwidHJpbSIsInRpbWVUb1RyaW0iLCJNYXRoIiwicm91bmQiLCJwbGF5UGF1c2VBbGwiLCJ0b1ByZXZpb3VzIiwicHJldmlvdXNUaW1lIiwidG90YWxUaW1lIiwiZ2V0RHVyYXRpb24iLCJwcm9ncmVzcyIsInNlZWtBbmRDZW50ZXIiLCJ0b1N0YXJ0Iiwic2F2ZSIsIiQiLCJtb2RhbCIsIm1lcmdlVHJhY2tzIiwidGhlbiIsImdvIiwiZXJyb3IiLCIkc2NvcGUiLCJnZXRDb29raWUiLCJjbmFtZSIsIm5hbWUiLCJkZWNvZGVkQ29va2llIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZG9jdW1lbnQiLCJjb29raWUiLCJjYSIsInNwbGl0IiwiYyIsImNoYXJBdCIsInN1YnN0cmluZyIsImluZGV4T2YiLCJnZXRNZXJnZWRUcmFja3MiLCJnZXRUcmFja3MiLCJtZXJnZWRUcmFja3MiLCJmaWx0ZXJlZFRyYWNrcyIsImZpbHRlciIsImZvckVhY2giLCJ0cmFjayIsImtleSIsIm5ld1RyYWNrIiwiQXVkaW8iLCJtZXJnZWRUcmFja0F1ZGlvIiwidm90ZUNvdW50UGVyVHJhY2siLCJtZXJnZWRfdHJhY2tfdm90ZXMiLCJnb29kU2VhcmNoIiwiYXJ0aXN0IiwibWF0Y2giLCJSZWdFeHAiLCJ0aXRsZSIsInNvbmduYW1lIiwiY3VycmVudEF1ZGlvVHJhY2tJZCIsInNvdXJjZSIsIm1lcmdlZEZpbHRlckRhdGEiLCJtZ2RTdmMiLCJwbGF5IiwidHJhY2tJZCIsInBhdXNlIiwiZG93bmxvYWQiLCJ3aW5kb3ciLCJvcGVuIiwidXBWb3RlIiwiSlNPTiIsInBhcnNlIiwidXNlcklkIiwiaW5zZXJ0Vm90ZSIsInN0YXR1cyIsIiR3YXRjaCIsInVzZXJTZXJ2aWNlIiwidXNlclN2YyIsImdldFVzZXIiLCJ1c2VybmFtZSIsImVtYWlsIiwidGFyZ2V0IiwiZ2V0RWxlbWVudEJ5SWQiLCJvcHRzIiwibGluZXMiLCJ3aWR0aCIsInJhZGl1cyIsInNjYWxlIiwiY29ybmVycyIsImNvbG9yIiwib3BhY2l0eSIsInJvdGF0ZSIsImRpcmVjdGlvbiIsInNwZWVkIiwidHJhaWwiLCJmcHMiLCJ6SW5kZXgiLCJjbGFzc05hbWUiLCJ0b3AiLCJsZWZ0Iiwic2hhZG93IiwiaHdhY2NlbCIsInBvc2l0aW9uIiwidXBkYXRlIiwic3Bpbm5lciIsIlNwaW5uZXIiLCJzcGluIiwibG9hZGluZyIsInVzZXJpbmZvIiwidXBkYXRlVXNlciIsInN0b3AiLCJzb2xvU2VydmljZSIsImdldFNvbG9UcmFja3MiLCJzb2xvU3ZjIiwic29sb1RyYWNrcyIsInNvbG9UcmFja0F1ZGlvIiwiaW5zdHJ1bWVudF9pZCIsInNob3dOb1Jlc3VsdHNGb3VuZCIsImluc3RTdmMiLCJnZXRJbnN0cnVtZW50cyIsImluc3RydW1lbnRzIiwiYmFuZFRyYWNrSWRBcnJheSIsImdldFRyYWNrSWRBcnJheSIsInRyYWNrQXJyYXlDb3VudCIsImdldFRyYWNrQXJyYXlDb3VudCIsImFkZFRvQmFuZCIsImFkZFRvVHJhY2tBcnJheSIsInJlbW92ZUZyb21CYW5kIiwicmVtb3ZlRnJvbVRyYWNrQXJyYXkiLCJVcGxvYWQiLCJhcnRpc3RTZXJ2aWNlIiwidXBsb2FkZWQiLCJzaG93Zm9ybSIsImluc3RydW1lbnRTdmMiLCJhcnRpc3RzIiwiYXJ0aXN0U3ZjIiwiZ2V0QXJ0aXN0cyIsInVwbG9hZEZpbGUiLCJmaWxlIiwibWF0ZXJpYWxfc2VsZWN0IiwidXBsb2FkIiwiZmlsZUZvcm1EYXRhTmFtZSIsInNlbmRGaWVsZHNBcyIsInNvbmciLCJyZXNwIiwiZmlsZW5hbWUiLCJ0cmFja2xlbmd0aCIsInVwbG9hZGZhaWxlZCIsInRyYWNrX2xlbmd0aCIsImluc3RydW1lbnRzZHJvcGRvd24iLCJhcnRpc3RfaWQiLCJhcnRpc3RuYW1lIiwiaW5zZXJ0VHJhY2siLCJsaXN0IiwicmV0dXJuVmFsdWUiLCJpbmRleCIsInNlcnZpY2UiLCIkaHR0cCIsImdldERhdGEiLCJvcHRpb25zIiwiZ2V0Iiwic3ZjIiwiJGNvb2tpZXMiLCJsb2dpbiIsInRva2VuIiwiZXhwaXJhdGlvblRpbWUiLCJEYXRlIiwic2V0VGltZSIsImdldFRpbWUiLCJ1c2VyRGF0YSIsInB1dE9iamVjdCIsImV4cGlyZXMiLCJpc0xvZ2dlZEluIiwiaXNBZG1pbiIsImNyZWRlbnRpYWxzIiwibG9nb3V0IiwicmVtb3ZlIiwicmVnaXN0ZXIiLCJwb3N0IiwiYXJyYXlPYmplY3RJbmRleE9mIiwibXlBcnJheSIsInNlYXJjaFRlcm0iLCJwcm9wZXJ0eSIsImxlbiIsImluY3JlbWVudFRyYWNrQXJyYXlDb3VudCIsImRlY3JlbWVudFRyYWNrQXJyYXlDb3VudCIsImFkZFRvVHJhY2tJZEFycmF5IiwidHJhY2tJZEFycmF5IiwicmVtb3ZlRnJvbVRyYWNrSWRBcnJheSIsInNwbGljZSIsInRlc3RGdW5jdGlvbiIsImFsZXJ0IiwiY3JlYXRlU29sb0ZpbHRlckRhdGEiLCJjcmVhdGVNZXJnZWRGaWx0ZXJEYXRhIiwidmFsdWUiLCJnZXRUcmFja0J5SWQiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInNjb3BlIiwiY29udHJvbGxlckFzIiwiYXV0aFNlcnZpY2UiLCJhdXRoU3ZjIiwic2hvd0xvZ2luIiwic2hvd1JlZ2lzdGVyIiwic2hvd0JhbmQiLCJwYXNzd29yZCIsIiRpbnRlcnZhbCIsInRleHRBcnJheSIsImN1cnJlbnRJbmRleCIsImlzIiwidGV4dCIsInNpZ251cCIsInJlc3BvbnNlIiwidW5yZWdpc3RlciIsIiR3aW5kb3ciLCIkd2luIiwiZWxlbWVudCIsImxpbmsiLCJhdHRycyIsInRvcENsYXNzIiwiZGNiU3RpY2t5Iiwib2Zmc2V0VG9wIiwib2Zmc2V0Iiwib24iLCJzY3JvbGxUb3AiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxLQUFNQyxRQUFRQyxPQUFPLE9BQ3ZCLFlBQ0EsYUFDQSxZQUNBLGlCQ0pFQyxVQUFhLFdBRWhCLEdBQUlELEtBSUosT0FGQUEsR0FBT0UsYUFBZSx3Q0FFZkYsSUNOUkYsS0FBSUssUUFBQSxpQkFBQSxxQkFBQSxnQkFBQSxnQkFBTyxTQUFTQyxFQUFnQkMsRUFBb0JDLEVBQWVDLEdBRXJFRCxFQUFjRSxTQUFjUCxVQUFVQyxhQUFlLFNBQ3JESSxFQUFjRyxVQUFjUixVQUFVQyxhQUFlLFlBQ3JERyxFQUFtQkssVUFBVSxLQUU3Qk4sRUFDR08sTUFBTSxRQUNMQyxJQUFLLElBQ0xDLFlBQWEsc0JBQ2JDLFdBQVksMkJBRWRILE1BQU0sUUFDSkMsSUFBSyxRQUNMQyxZQUFhLHNCQUNiQyxXQUFZLDJCQUViSCxNQUFNLFVBQ0xDLElBQUssVUFDTEMsWUFBYSx3QkFDYkMsV0FBWSwrQkFFYkgsTUFBTSxRQUNMQyxJQUFLLFFBQ0xDLFlBQWEsc0JBQ2JDLFdBQVksMkJBRWJILE1BQU0sU0FDTEMsSUFBSyxTQUNMQyxZQUFhLHVCQUNiQyxXQUFZLDZCQUViSCxN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LCBbXHJcblx0XHRcInVpLnJvdXRlclwiLFxyXG5cdFx0XCJzYXRlbGxpemVyXCIsXHJcblx0XHRcIm5nQ29va2llc1wiLFxyXG5cdFx0XCJuZ0ZpbGVVcGxvYWRcIlxyXG5cdF0pOyIsInZhciBDT05TVEFOVFMgPSAoZnVuY3Rpb24gKCkge1xyXG5cdFxyXG5cdHZhciBtb2R1bGUgPSB7fTtcclxuXHJcblx0bW9kdWxlLkFQSV9CQVNFX1VSTCA9IFwiaHR0cDovL2Rpc2NvdmVyYmFuZGFwaS5pbnQvcHVibGljL2FwaVwiO1xyXG5cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59KCkpOyIsImFwcC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGF1dGhQcm92aWRlciwgJGh0dHBQcm92aWRlcikge1xyXG4gIFxyXG4gICRhdXRoUHJvdmlkZXIubG9naW5VcmwgICAgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgJy9sb2dpbic7XHJcbiAgJGF1dGhQcm92aWRlci5zaWdudXBVcmwgICA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyAnL3JlZ2lzdGVyJztcclxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcclxuXHJcbiAgJHN0YXRlUHJvdmlkZXJcclxuICAgIC5zdGF0ZSgnaG9tZScsIHtcclxuICAgICAgdXJsOiBcIi9cIixcclxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL2hvbWUuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcImhvbWVDb250cm9sbGVyIGFzIGhvbWVcIlxyXG4gICAgfSlcclxuICBcdC5zdGF0ZSgnc29sbycsIHtcclxuICAgICAgdXJsOiBcIi9zb2xvXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9zb2xvLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogXCJzb2xvQ29udHJvbGxlciBhcyBzb2xvXCJcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoJ21lcmdlZCcsIHtcclxuICAgICAgdXJsOiBcIi9tZXJnZWRcIixcclxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL21lcmdlZC5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwibWVyZ2VkQ29udHJvbGxlciBhcyBtZXJnZWRcIlxyXG4gICAgfSlcclxuICAgIC5zdGF0ZSgnYmFuZCcsIHtcclxuICAgICAgdXJsOiBcIi9iYW5kXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9iYW5kLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogXCJiYW5kQ29udHJvbGxlciBhcyBiYW5kXCJcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoJ21lcmdlJywge1xyXG4gICAgICB1cmw6IFwiL21lcmdlXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9tZXJnZS5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwibWVyZ2VDb250cm9sbGVyIGFzIG1lcmdlXCJcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XHJcbiAgICAgIHVybDogXCIvcHJvZmlsZVwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvcHJvZmlsZS5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwicHJvZmlsZUNvbnRyb2xsZXIgYXMgcHJvZmlsZVwiLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgcmVxdWlyZXNMb2dnZWRJbjogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKCd1cGxvYWQnLCB7XHJcbiAgICAgIHVybDogXCIvdXBsb2FkXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy91cGxvYWQuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcInVwbG9hZENvbnRyb2xsZXIgYXMgdXBsb2FkXCIsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICByZXF1aXJlc0xvZ2dlZEluOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbn0pXHJcbi5ydW4oZnVuY3Rpb24gKCRyb290U2NvcGUsICRsb2NhdGlvbiwgJGF1dGgsICRzdGF0ZSkgeyBcclxuXHJcbiAgLy9HbG9iYWxzXHJcbiAgdmFyIHJlZGlyZWN0U3RhdGUgPSBcIi9cIjtcclxuXHJcbiAgLy9SZWRpcmVjdCByb3V0ZXMgaWYgbm90IGFkbWluXHJcbiAgJHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdGFydFwiLCBmdW5jdGlvbiAoZSwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xyXG5cclxuICAgIHZhciBuZXh0ID0gdG9TdGF0ZS51cmw7XHJcblxyXG4gICAgLy9TdHJpcCBoYXNoYmFuZ3MgdXNpbmcgUmVnRXhcclxuICAgIGlmKHRvUGFyYW1zKSBcclxuICAgIHtcclxuICAgICAgbmV4dCA9ICRzdGF0ZS5ocmVmKHRvU3RhdGUsIHRvUGFyYW1zKTtcclxuICAgICAgbmV4dCA9IG5leHQucmVwbGFjZShcIiNcIiwgXCJcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQXV0aG9yaXplZCh0b1N0YXRlKSlcclxuICAgIHtcclxuICAgICAgJGxvY2F0aW9uLnBhdGgobmV4dCk7XHJcbiAgICB9XHJcbiAgICBlbHNlXHJcbiAgICB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwibm90TG9nZ2VkSW5cIik7XHJcbiAgICAgICRsb2NhdGlvbi5wYXRoKHJlZGlyZWN0U3RhdGUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvL1ByaXZhdGUgZnVuY3Rpb25zXHJcbiAgZnVuY3Rpb24gaXNBdXRob3JpemVkICh0b1N0YXRlKSB7XHJcblxyXG4gICAgaWYodG9TdGF0ZS5kYXRhICYmIHRvU3RhdGUuZGF0YS5yZXF1aXJlc0xvZ2dlZEluKVxyXG4gICAgICByZXR1cm4gJGF1dGguaXNBdXRoZW50aWNhdGVkKCk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufSk7IiwiYXBwLmNvbnRyb2xsZXIoXCJiYW5kQ29udHJvbGxlclwiLCBmdW5jdGlvbihiYW5kU2VydmljZSkge1xyXG5cdFxyXG5cdHZhciB2bSBcdFx0PSB0aGlzO1xyXG5cdHZhciBiYW5kU3ZjID0gYmFuZFNlcnZpY2U7XHJcblxyXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0dm0udHJhY2tBcnJheSA9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheTtcclxuXHR9XHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwiaG9tZUNvbnRyb2xsZXJcIiwgZnVuY3Rpb24oaW5zdHJ1bWVudFNlcnZpY2UsIGZpbHRlclNlcnZpY2UpIHtcclxuXHRcclxuXHR2YXIgdm0gPSB0aGlzO1xyXG5cdHZhciBpbnN0U3ZjID0gaW5zdHJ1bWVudFNlcnZpY2U7XHJcblx0dmFyIGZsdFN2YyA9IGZpbHRlclNlcnZpY2U7XHJcblxyXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0dm0uZmlsdGVyRGF0YSA9IGZsdFN2Yy5zb2xvRmlsdGVyRGF0YTtcclxuXHR9XHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwibWVyZ2VDb250cm9sbGVyXCIsIGZ1bmN0aW9uKGJhbmRTZXJ2aWNlLCBtZXJnZWRTZXJ2aWNlLCAkc3RhdGUpIHtcclxuXHR2YXIgdm0gXHRcdFx0PSB0aGlzO1xyXG5cdHZhciBiYW5kU3ZjIFx0PSBiYW5kU2VydmljZTtcclxuXHR2YXIgbWVyZ2VkU3ZjIFx0PSBtZXJnZWRTZXJ2aWNlO1xyXG5cdHZhciB3YXZlc3VyZmVyIFx0PSBbXTtcclxuXHJcblx0ZnVuY3Rpb24gX2luaXQoKSB7XHJcblx0XHR2bS50cmFja3MgXHRcdFx0PSBiYW5kU3ZjLmdldFRyYWNrQXJyYXkoKTtcclxuXHRcdHZtLnNob3dUcmFja3MgXHRcdD0gZmFsc2U7XHJcblx0XHR2bS50aGVyZUFyZVRyYWNrc1x0PSBmYWxzZTtcclxuXHRcdHZtLmxvYWRlZFRyYWNrcyBcdD0gW107XHJcblx0XHR2bS5zYXZlZFRpbWUgXHRcdD0gW107XHJcblx0XHR2bS50cmltQW1vdW50cyAgXHQ9IFtdO1xyXG5cclxuXHRcdGlmKHZtLnRyYWNrcy5sZW5ndGggPiAwKVxyXG5cdFx0e1xyXG5cdFx0XHR2bS50aGVyZUFyZVRyYWNrc1x0PSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dm0ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYodm0udGhlcmVBcmVUcmFja3MpXHJcblx0XHR7XHJcblx0XHRcdGZvciAodmFyIGkgPSB2bS50cmFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuXHRcdFx0XHR2YXIgdHJhY2tfaWQgPSB2bS50cmFja3NbaV0uaWQ7XHJcblxyXG5cdFx0XHRcdHdhdmVzdXJmZXJbdHJhY2tfaWRdID0gV2F2ZVN1cmZlci5jcmVhdGUoe1xyXG5cdFx0ICAgIFx0XHRjb250YWluZXI6ICcjd2F2ZWZvcm0nK3RyYWNrX2lkLFxyXG5cdFx0ICAgIFx0XHR3YXZlQ29sb3I6ICdncmVlbicsXHJcblx0XHQgICAgXHRcdHByb2dyZXNzQ29sb3I6ICdwdXJwbGUnXHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHdhdmVzdXJmZXJbdHJhY2tfaWRdLmxvYWQoJ2h0dHA6Ly9kaXNjb3ZlcmJhbmRhcGkuaW50L3B1YmxpYy9hcGkvYXVkaW8vJyArIHZtLnRyYWNrc1tpXS5maWxlX3VybCk7XHJcblxyXG5cdFx0XHRcdHZtLmxvYWRlZFRyYWNrcy5wdXNoKHtcclxuXHQgICAgICAgICAgICBcdHRyYWNrX2lkOiB0cmFja19pZCxcclxuXHQgICAgICAgICAgICBcdHRyaW1fYW1vdW50OiAwLFxyXG5cdCAgICAgICAgICAgIFx0dXNlcl9pZDogdm0udHJhY2tzW2ldLnVzZXIuaWRcclxuXHQgICAgICAgIFx0fSk7XHJcblxyXG5cdCAgICAgICAgXHRjb25zb2xlLmxvZyh2bS5sb2FkZWRUcmFja3MpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZtLnNob3dUcmFja3MgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dm0ucGxheVBhdXNlID0gZnVuY3Rpb24oaWQpIHtcclxuXHRcdGlmKCF3YXZlc3VyZmVyW2lkXS5pc1BsYXlpbmcoKSlcclxuXHRcdHtcclxuXHRcdFx0dm0uc2F2ZWRUaW1lW2lkXSA9IHdhdmVzdXJmZXJbaWRdLmdldEN1cnJlbnRUaW1lKCk7XHJcblx0XHRcdGNvbnNvbGUubG9nKHZtLnNhdmVkVGltZSk7XHJcblx0XHR9XHJcblxyXG5cdFx0d2F2ZXN1cmZlcltpZF0ucGxheVBhdXNlKCk7XHJcblx0XHR3YXZlc3VyZmVyW2lkXS56b29tKDUwKTtcclxuXHR9XHJcblxyXG5cdHZtLnRyaW0gPSBmdW5jdGlvbihpZCkge1xyXG5cdFx0dmFyIHRpbWVUb1RyaW0gPSB3YXZlc3VyZmVyW2lkXS5nZXRDdXJyZW50VGltZSgpO1xyXG5cdFx0Zm9yICh2YXIgaSA9IHZtLmxvYWRlZFRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRpZih2bS5sb2FkZWRUcmFja3NbaV0udHJhY2tfaWQgPT09IGlkKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dm0ubG9hZGVkVHJhY2tzW2ldLnRyaW1fYW1vdW50IFx0PSB0aW1lVG9UcmltO1xyXG5cdFx0XHRcdHZtLnRyaW1BbW91bnRzW2lkXSBcdFx0XHRcdD0gTWF0aC5yb3VuZCh0aW1lVG9UcmltICogMTAwKSAvIDEwMDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdHZtLnBsYXlQYXVzZUFsbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0Zm9yICh2YXIgaSA9IHZtLmxvYWRlZFRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHR2YXIgaWQgPSB2bS5sb2FkZWRUcmFja3NbaV0udHJhY2tfaWQ7XHJcblx0XHRcdGlmKCF3YXZlc3VyZmVyW2lkXS5pc1BsYXlpbmcoKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZtLnNhdmVkVGltZVtpZF0gPSB3YXZlc3VyZmVyW2lkXS5nZXRDdXJyZW50VGltZSgpO1xyXG5cdFx0XHR9XHJcblxyXG4gICAgXHRcdHdhdmVzdXJmZXJbaWRdLnBsYXlQYXVzZSgpO1xyXG4gICAgXHRcdHdhdmVzdXJmZXJbaWRdLnpvb20oNTApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dm0udG9QcmV2aW91cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0Zm9yICh2YXIgaSA9IHZtLmxvYWRlZFRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHR2YXIgaWQgPSB2bS5sb2FkZWRUcmFja3NbaV0udHJhY2tfaWQ7XHJcblx0XHRcdHZhciBwcmV2aW91c1RpbWUgXHQ9IHZtLnNhdmVkVGltZVtpZF07XHJcblx0XHRcdHZhciB0b3RhbFRpbWVcdFx0PSB3YXZlc3VyZmVyW2lkXS5nZXREdXJhdGlvbigpO1xyXG5cdFx0XHR2YXIgcHJvZ3Jlc3MgPSBwcmV2aW91c1RpbWUgLyB0b3RhbFRpbWU7XHJcblx0XHRcdHdhdmVzdXJmZXJbaWRdLnNlZWtBbmRDZW50ZXIocHJvZ3Jlc3MpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dm0udG9TdGFydCA9IGZ1bmN0aW9uKGlkKSB7XHJcblx0XHR3YXZlc3VyZmVyW2lkXS5zZWVrQW5kQ2VudGVyKDApO1xyXG5cdH1cclxuXHJcblx0XHJcblx0dm0uc2F2ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0JCgnI3Byb2Nlc3NpbmdfbW9kYWwnKS5tb2RhbCgpO1xyXG5cdFx0JCgnI3Byb2Nlc3NpbmdfbW9kYWwnKS5tb2RhbCgnb3BlbicpO1xyXG5cdFx0XHJcblx0XHRtZXJnZWRTdmMubWVyZ2VUcmFja3Modm0ubG9hZGVkVHJhY2tzKVxyXG5cdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgXHQkKCcjcHJvY2Vzc2luZ19tb2RhbCcpLm1vZGFsKCdjbG9zZScpO1xyXG4gICAgICAgIFx0JHN0YXRlLmdvKFwibWVyZ2VkXCIpO1xyXG5cclxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuY29udHJvbGxlcihcIm1lcmdlZENvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCBtZXJnZWRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtICBcdFx0PSB0aGlzO1xyXG5cdHZhciBtZ2RTdmMgXHRcdD0gbWVyZ2VkU2VydmljZTtcclxuXHR2YXIgZmx0U3ZjIFx0XHQ9IGZpbHRlclNlcnZpY2U7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBwbGF5QXVkaW9GaWxlKHRyYWNrKVxyXG5cdHtcclxuXHRcdHRyYWNrLnBsYXkoKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldENvb2tpZShjbmFtZSkge1xyXG4gICAgICAgICAgdmFyIG5hbWUgPSBjbmFtZSArIFwiPVwiO1xyXG4gICAgICAgICAgdmFyIGRlY29kZWRDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTtcclxuICAgICAgICAgIHZhciBjYSA9IGRlY29kZWRDb29raWUuc3BsaXQoJzsnKTtcclxuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPGNhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGMgPSBjYVtpXTtcclxuICAgICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSB7XHJcbiAgICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICB9XHJcblxyXG5cdGZ1bmN0aW9uIGdldE1lcmdlZFRyYWNrcygpIHtcclxuXHRcdG1lcmdlZFNlcnZpY2UuZ2V0VHJhY2tzKClcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0XHRcdHZtLm1lcmdlZFRyYWNrcyA9IGRhdGEuZGF0YTtcclxuXHRcdFx0XHR2bS5maWx0ZXJlZFRyYWNrcyA9IHZtLm1lcmdlZFRyYWNrcztcclxuXHRcdFx0XHRmaWx0ZXIoKTtcclxuXHJcblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLm1lcmdlZFRyYWNrcywgZnVuY3Rpb24odHJhY2ssIGtleSkge1xyXG5cdFx0XHRcdFx0bmV3VHJhY2sgPSBuZXcgQXVkaW8oJ2h0dHA6Ly9kaXNjb3ZlcmJhbmRhcGkuaW50L3B1YmxpYy9hdWRpby8nICsgdHJhY2suZmlsZV91cmwpO1xyXG5cdFx0XHRcdFx0dm0ubWVyZ2VkVHJhY2tBdWRpb1t0cmFjay5pZF0gPSBuZXdUcmFjaztcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdFx0Zm9yICh2YXIgaSA9IHZtLm1lcmdlZFRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0XHRcdFx0dm0udm90ZUNvdW50UGVyVHJhY2tbdm0ubWVyZ2VkVHJhY2tzW2ldLmlkXSA9IHZtLm1lcmdlZFRyYWNrc1tpXS5tZXJnZWRfdHJhY2tfdm90ZXMubGVuZ3RoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGZpbHRlcigpIHtcclxuXHRcdFxyXG5cdFx0dm0uZmlsdGVyZWRUcmFja3MgPSBbXTtcclxuXHJcblx0XHRhbmd1bGFyLmZvckVhY2godm0ubWVyZ2VkVHJhY2tzLCBmdW5jdGlvbih0cmFjaywga2V5KSB7XHJcblxyXG5cdFx0XHRnb29kU2VhcmNoID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhLmFydGlzdCA9PSBcIlwiICYmICF0cmFjay5hcnRpc3QubmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEuYXJ0aXN0LCBcImlcIikpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS50aXRsZSA9PSBcIlwiICYmICF0cmFjay5zb25nbmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEudGl0bGUsIFwiaVwiKSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRpZihnb29kU2VhcmNoKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dm0uZmlsdGVyZWRUcmFja3MucHVzaCh0cmFjayk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdHZtLm1lcmdlZFRyYWNrQXVkaW8gXHQ9IFtdO1xyXG5cdFx0dm0uY3VycmVudEF1ZGlvVHJhY2tJZCBcdD0gXCJcIjtcclxuXHRcdHZtLnNvdXJjZSA9IFwiL2Rpc3QvaW1nL3JvY2toYW5kLnBuZ1wiO1xyXG5cdFx0Z2V0TWVyZ2VkVHJhY2tzKCk7XHJcblx0XHR2bS5maWx0ZXJEYXRhIFx0PSBmbHRTdmMubWVyZ2VkRmlsdGVyRGF0YTtcclxuXHRcdHZtLnZvdGVDb3VudFBlclRyYWNrID0gW107XHJcblx0fVxyXG5cclxuXHQvL1ZtIGZ1bmN0aW9uc1xyXG5cdHZtLnBsYXkgPSBmdW5jdGlvbih0cmFja0lkKSB7XHJcblxyXG5cdFx0aWYodm0uY3VycmVudEF1ZGlvVHJhY2tJZCAhPSBcIlwiKSB7XHJcblx0XHRcdHZtLnBhdXNlKHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgPSB0cmFja0lkO1xyXG5cdFx0dm0ubWVyZ2VkVHJhY2tBdWRpb1t0cmFja0lkXS5wbGF5KCk7XHJcblx0fVxyXG5cclxuXHR2bS5wYXVzZSA9IGZ1bmN0aW9uKHRyYWNrSWQpIHtcclxuXHRcdHZtLm1lcmdlZFRyYWNrQXVkaW9bdHJhY2tJZF0ucGF1c2UoKTtcclxuXHRcdHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgPSBcIlwiO1xyXG5cdH1cclxuXHJcblx0dm0uZG93bmxvYWQgPSBmdW5jdGlvbihpZCkge1xyXG4gICAgXHR3aW5kb3cub3BlbihDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgJy9tZXJnZWR0cmFja3MvJyArIGlkICsgJy9kb3dubG9hZCcsICdfYmxhbmsnLCAnJyk7ICBcclxuXHR9XHJcblxyXG5cdHZtLnVwVm90ZSA9IGZ1bmN0aW9uKGlkKSB7XHJcblx0XHR2YXIgdXNlcl9pZCA9IEpTT04ucGFyc2UoZ2V0Q29va2llKCd1c2VyJykpLnVzZXJJZDtcclxuXHQgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgIHRyYWNrX2lkOiBpZCxcclxuICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZFxyXG5cdCAgICB9XHJcblxyXG5cdCAgICBtZ2RTdmMuaW5zZXJ0Vm90ZShkYXRhKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgIFx0aWYoZGF0YS5kYXRhLnN0YXR1cyA9PSBcIk9LXCIpXHJcbiAgICAgICAgXHR7XHJcbiAgICAgICAgXHRcdHZtLnZvdGVDb3VudFBlclRyYWNrW2lkXSsrO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0ZWxzZVxyXG4gICAgICAgIFx0e1xyXG4gICAgICAgIFx0XHRjb25zb2xlLmxvZygnYWxyZWFkeSB2b3RlZCcpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuXHRcdFxyXG5cdH1cclxuXHJcblxyXG5cdC8vV2F0Y2hlc1xyXG5cdCRzY29wZS4kd2F0Y2goXHJcblx0XHRmdW5jdGlvbiAoKSB7IHJldHVybiB2bS5maWx0ZXJEYXRhIH0sIFxyXG5cdFx0ZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0aWYodm0uZmlsdGVyRGF0YSkgXHJcblx0XHRcdHtcclxuXHRcdFx0XHRmaWx0ZXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgdHJ1ZSk7XHJcblxyXG5cclxuXHJcblx0Ly92bS50cmFjazEgPSBuZXcgQXVkaW8oXCJkaXN0L2F1ZGlvL0JlaGVtb3RoIC0gQ29ucXVlciBBbGwgLSBEcnVtLm1wM1wiKTtcclxuXHQvL3ZtLnRyYWNrMiA9IG5ldyBBdWRpbyhcImRpc3QvYXVkaW8vQmVoZW1vdGggLSBDb25xdWVyIEFsbCAtIEd1aXRhci5tcDNcIik7XHJcblxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuY29udHJvbGxlcihcInByb2ZpbGVDb250cm9sbGVyXCIsIGZ1bmN0aW9uKHVzZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtIFx0XHQ9IHRoaXM7XHJcblx0dmFyIHVzZXJTdmMgPSB1c2VyU2VydmljZTtcclxuXHR2YXIgdGFyZ2V0IFx0PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBkYXRlLXByb2ZpbGUtc3Bpbm5lcicpO1xyXG5cclxuXHR2YXIgb3B0cyA9IHtcclxuXHRcdFx0bGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xyXG5cdFx0LCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXHJcblx0XHQsIHdpZHRoOiAxMiAvLyBUaGUgbGluZSB0aGlja25lc3NcclxuXHRcdCwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcclxuXHRcdCwgc2NhbGU6IDAuMTUgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxyXG5cdFx0LCBjb3JuZXJzOiAxIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXHJcblx0XHQsIGNvbG9yOiAnIzAwMCcgLy8gI3JnYiBvciAjcnJnZ2JiIG9yIGFycmF5IG9mIGNvbG9yc1xyXG5cdFx0LCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXHJcblx0XHQsIHJvdGF0ZTogMCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XHJcblx0XHQsIGRpcmVjdGlvbjogMSAvLyAxOiBjbG9ja3dpc2UsIC0xOiBjb3VudGVyY2xvY2t3aXNlXHJcblx0XHQsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXHJcblx0XHQsIHRyYWlsOiA2MCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxyXG5cdFx0LCBmcHM6IDIwIC8vIEZyYW1lcyBwZXIgc2Vjb25kIHdoZW4gdXNpbmcgc2V0VGltZW91dCgpIGFzIGEgZmFsbGJhY2sgZm9yIENTU1xyXG5cdFx0LCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcclxuXHRcdCwgY2xhc3NOYW1lOiAnc3Bpbm5lcicgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcclxuXHRcdCwgdG9wOiAnODklJyAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcblx0XHQsIGxlZnQ6ICcyNS41JScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdCwgc2hhZG93OiBmYWxzZSAvLyBXaGV0aGVyIHRvIHJlbmRlciBhIHNoYWRvd1xyXG5cdFx0LCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cclxuXHRcdCwgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gX2luaXQoKSB7XHJcblx0XHR1c2VyU3ZjLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdHZtLnVzZXJuYW1lID0gZGF0YS5kYXRhLnVzZXJuYW1lO1xyXG5cdFx0XHR2bS5lbWFpbCBcdD0gZGF0YS5kYXRhLmVtYWlsO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHR2bS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzcGlubmVyID0gbmV3IFNwaW5uZXIob3B0cykuc3Bpbih0YXJnZXQpO1xyXG5cdCAgICB2bS5sb2FkaW5nIFx0PSB0cnVlO1xyXG5cclxuXHRcdHZhciB1c2VyaW5mbyA9IHtcclxuICAgICAgICAgICAgdXNlcm5hbWU6IHZtLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICBlbWFpbDogdm0uZW1haWxcclxuICAgICAgICB9XHJcblxyXG5cdFx0dXNlclN2Yy51cGRhdGVVc2VyKHVzZXJpbmZvKVxyXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c3Bpbm5lci5zdG9wKCk7XHJcblx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHNwaW5uZXIuc3RvcCgpO1xyXG5cdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuY29udHJvbGxlcihcInNvbG9Db250cm9sbGVyXCIsIGZ1bmN0aW9uKCRzY29wZSwgYmFuZFNlcnZpY2UsIHNvbG9TZXJ2aWNlLCBpbnN0cnVtZW50U2VydmljZSwgZmlsdGVyU2VydmljZSkge1xyXG5cdFxyXG5cdHZhciB2bSA9IHRoaXM7XHJcblx0dmFyIGJhbmRTdmMgPSBiYW5kU2VydmljZTtcclxuXHR2YXIgc29sb1N2YyA9IHNvbG9TZXJ2aWNlO1xyXG5cdHZhciBpbnN0U3ZjID0gaW5zdHJ1bWVudFNlcnZpY2U7XHJcblx0dmFyIGZsdFN2YyA9IGZpbHRlclNlcnZpY2U7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBwbGF5QXVkaW9GaWxlKHRyYWNrKVxyXG5cdHtcclxuXHRcdHRyYWNrLnBsYXkoKTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGdldFNvbG9UcmFja3MoKVxyXG5cdHtcclxuXHRcdHNvbG9TdmMuZ2V0VHJhY2tzKClcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZtLnNvbG9UcmFja3MgPSBkYXRhLmRhdGE7XHJcblx0XHRcdFx0dm0uZmlsdGVyZWRUcmFja3MgPSB2bS5zb2xvVHJhY2tzO1xyXG5cdFx0XHRcdGZpbHRlcigpO1xyXG5cclxuXHRcdFx0XHRhbmd1bGFyLmZvckVhY2godm0uc29sb1RyYWNrcywgZnVuY3Rpb24odHJhY2ssIGtleSkge1xyXG5cdFx0XHRcdFx0XHQvL25ld1RyYWNrID0gbmV3IEF1ZGlvKHRyYWNrLmZpbGVfdXJsKTtcclxuXHRcdFx0XHRcdFx0bmV3VHJhY2sgPSBuZXcgQXVkaW8oJ2h0dHA6Ly9kaXNjb3ZlcmJhbmRhcGkuaW50L3B1YmxpYy9hdWRpby8nICsgdHJhY2suZmlsZV91cmwpO1xyXG5cdFx0XHRcdFx0XHR2bS5zb2xvVHJhY2tBdWRpb1t0cmFjay5pZF0gPSBuZXdUcmFjaztcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZmlsdGVyKClcclxuXHR7XHJcblx0XHR2bS5maWx0ZXJlZFRyYWNrcyA9IFtdO1xyXG5cclxuXHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5zb2xvVHJhY2tzLCBmdW5jdGlvbih0cmFjaywga2V5KVxyXG5cdFx0e1xyXG5cdFx0XHRnb29kU2VhcmNoID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhLmFydGlzdCA9PSBcIlwiICYmICF0cmFjay5hcnRpc3QubmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEuYXJ0aXN0LCBcImlcIikpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS50aXRsZSA9PSBcIlwiICYmICF0cmFjay5zb25nbmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEudGl0bGUsIFwiaVwiKSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhW3RyYWNrLmluc3RydW1lbnRfaWRdKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0aWYoZ29vZFNlYXJjaClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZtLmZpbHRlcmVkVHJhY2tzLnB1c2godHJhY2spO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRpZih2bS5maWx0ZXJlZFRyYWNrcy5sZW5ndGggPT09IDApIFxyXG5cdFx0e1xyXG5cdFx0XHR2bS5zaG93Tm9SZXN1bHRzRm91bmQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZVxyXG5cdFx0e1xyXG5cdFx0XHR2bS5zaG93Tm9SZXN1bHRzRm91bmQgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qZnVuY3Rpb24gYXJyYXlPYmplY3RJbmRleE9mKG15QXJyYXksIHNlYXJjaFRlcm0sIHByb3BlcnR5KSB7XHJcbiAgICBcdFxyXG4gICAgXHRmb3IodmFyIGkgPSAwLCBsZW4gPSBteUFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgXHRpZiAobXlBcnJheVtpXVtwcm9wZXJ0eV0gPT09IHNlYXJjaFRlcm0pIHJldHVybiBpO1xyXG4gICAgXHR9XHJcblxyXG4gICAgXHRyZXR1cm4gLTE7XHJcblx0fSovXHJcblxyXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0dm0uc29sb1RyYWNrQXVkaW8gXHRcdD0gW107XHJcblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkIFx0PSBcIlwiO1xyXG5cdFx0dm0uc2hvd05vUmVzdWx0c0ZvdW5kIFx0PSBmYWxzZTtcclxuXHJcblx0XHRpbnN0U3ZjLmdldEluc3RydW1lbnRzKClcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZtLmluc3RydW1lbnRzID0gZGF0YS5kYXRhO1xyXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Z2V0U29sb1RyYWNrcygpO1xyXG5cdFx0dm0uZmlsdGVyRGF0YSBcdFx0XHQ9IGZsdFN2Yy5zb2xvRmlsdGVyRGF0YTtcclxuXHRcdHZtLnRyYWNrQXJyYXkgXHRcdFx0PSBiYW5kU3ZjLmdldFRyYWNrQXJyYXk7XHJcblx0XHR2bS5iYW5kVHJhY2tJZEFycmF5IFx0PSBiYW5kU3ZjLmdldFRyYWNrSWRBcnJheTtcclxuXHRcdHZtLnRyYWNrQXJyYXlDb3VudCBcdFx0PSBiYW5kU3ZjLmdldFRyYWNrQXJyYXlDb3VudDtcdFxyXG5cdH1cclxuXHJcblx0Ly9WbSBmdW5jdGlvbnNcclxuXHR2bS5hZGRUb0JhbmQgPSBmdW5jdGlvbih0cmFjaykge1xyXG5cclxuXHRcdGJhbmRTdmMuYWRkVG9UcmFja0FycmF5KHRyYWNrKTtcclxuXHRcdC8qdm0uYmFuZFRyYWNrSWRBcnJheSA9IFtdO1xyXG5cclxuXHRcdGJhbmRTdmMudHJhY2tBcnJheS5wdXNoKHRyYWNrKTtcclxuXHRcdGJhbmRTdmMudHJhY2tBcnJheUNvdW50ICsrO1xyXG5cdFx0YW5ndWxhci5mb3JFYWNoKGJhbmRTdmMudHJhY2tBcnJheSwgZnVuY3Rpb24odHJhY2ssIGtleSkge1xyXG5cdFx0XHR2bS5iYW5kVHJhY2tJZEFycmF5LnB1c2godHJhY2suaWQpO1xyXG5cdFx0fSk7Ki9cclxuXHJcblx0XHRjb25zb2xlLmxvZyh0cmFjayk7XHJcblx0fVxyXG5cclxuXHR2bS5yZW1vdmVGcm9tQmFuZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XHJcblx0XHRcclxuXHRcdGJhbmRTdmMucmVtb3ZlRnJvbVRyYWNrQXJyYXkodHJhY2spO1xyXG5cdFx0LyppbmRleCA9IGFycmF5T2JqZWN0SW5kZXhPZihiYW5kU3ZjLnRyYWNrQXJyYXksIHRyYWNrLmlkLCBcImlkXCIpO1xyXG5cdFx0aWYgKGluZGV4ID4gLTEpIHtcclxuXHRcdFx0YmFuZFN2Yy50cmFja0FycmF5LnNwbGljZShpbmRleCwgMSk7XHJcblx0XHRcdGJhbmRTdmMudHJhY2tBcnJheUNvdW50IC0tO1xyXG5cdFx0XHR2bS5iYW5kVHJhY2tBcnJheSA9IGJhbmRTdmMudHJhY2tBcnJheTtcclxuXHJcblx0XHRcdGludEluZGV4ID0gdm0uYmFuZFRyYWNrSWRBcnJheS5pbmRleE9mKHRyYWNrLmlkKTtcclxuXHRcdFx0aWYgKGludEluZGV4ID4gLTEpIHtcclxuXHRcdFx0XHR2bS5iYW5kVHJhY2tJZEFycmF5LnNwbGljZShpbnRJbmRleCwgMSk7XHJcblx0XHRcdH1cclxuXHRcdH0qL1xyXG5cclxuXHRcdGNvbnNvbGUubG9nKFwiVHJhY2sgcmVtb3ZlZCBmcm9tIG5ldyBiYW5kOiBcIiArIHRyYWNrKTtcclxuXHRcdC8vY29uc29sZS5sb2coYmFuZFN2Yy50cmFja0FycmF5KTtcclxuXHR9XHJcblxyXG5cdHZtLnBsYXkgPSBmdW5jdGlvbih0cmFja0lkKSB7XHJcblxyXG5cdFx0aWYodm0uY3VycmVudEF1ZGlvVHJhY2tJZCAhPSBcIlwiKSB7XHJcblx0XHRcdHZtLnBhdXNlKHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgPSB0cmFja0lkO1xyXG5cdFx0dm0uc29sb1RyYWNrQXVkaW9bdHJhY2tJZF0ucGxheSgpO1xyXG5cdH1cclxuXHJcblx0dm0ucGF1c2UgPSBmdW5jdGlvbih0cmFja0lkKSB7XHJcblx0XHR2bS5zb2xvVHJhY2tBdWRpb1t0cmFja0lkXS5wYXVzZSgpO1xyXG5cdFx0dm0uY3VycmVudEF1ZGlvVHJhY2tJZCA9IFwiXCI7XHJcblx0fVxyXG5cclxuXHQvL1dhdGNoZXNcclxuXHQkc2NvcGUuJHdhdGNoKFxyXG5cdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gdm0uZmlsdGVyRGF0YSB9LCBcclxuXHRcdGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0aWYodm0uZmlsdGVyRGF0YSkgXHJcblx0XHRcdHtcclxuXHRcdFx0XHRmaWx0ZXIoKTtcdFx0XHJcblx0XHRcdH1cclxuXHRcdH0sIHRydWUpO1xyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuY29udHJvbGxlcihcInVwbG9hZENvbnRyb2xsZXJcIiwgZnVuY3Rpb24oVXBsb2FkLCBhcnRpc3RTZXJ2aWNlLCBpbnN0cnVtZW50U2VydmljZSwgc29sb1NlcnZpY2UsICRzdGF0ZSkge1xyXG4gIFxyXG4gIHZhciB2bSAgICAgICAgICAgID0gdGhpcztcclxuICB2YXIgc29sb1N2YyAgICAgICA9IHNvbG9TZXJ2aWNlO1xyXG4gIHZhciBhcnRpc3RTdmMgICAgID0gYXJ0aXN0U2VydmljZTtcclxuICB2YXIgaW5zdHJ1bWVudFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xyXG4gIHZhciB0YXJnZXQgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZC1zcGlubmVyJyk7XHJcbiAgXHJcbiAgdmFyIG9wdHMgPSB7XHJcbiAgICAgIGxpbmVzOiAxMyAvLyBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIGRyYXdcclxuICAgICwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxyXG4gICAgLCB3aWR0aDogMTIgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXHJcbiAgICAsIHJhZGl1czogNDIgLy8gVGhlIHJhZGl1cyBvZiB0aGUgaW5uZXIgY2lyY2xlXHJcbiAgICAsIHNjYWxlOiAwLjMwIC8vIFNjYWxlcyBvdmVyYWxsIHNpemUgb2YgdGhlIHNwaW5uZXJcclxuICAgICwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxyXG4gICAgLCBjb2xvcjogJyMwMDAnIC8vICNyZ2Igb3IgI3JyZ2diYiBvciBhcnJheSBvZiBjb2xvcnNcclxuICAgICwgb3BhY2l0eTogMC4yNSAvLyBPcGFjaXR5IG9mIHRoZSBsaW5lc1xyXG4gICAgLCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxyXG4gICAgLCBkaXJlY3Rpb246IDEgLy8gMTogY2xvY2t3aXNlLCAtMTogY291bnRlcmNsb2Nrd2lzZVxyXG4gICAgLCBzcGVlZDogMSAvLyBSb3VuZHMgcGVyIHNlY29uZFxyXG4gICAgLCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcclxuICAgICwgZnBzOiAyMCAvLyBGcmFtZXMgcGVyIHNlY29uZCB3aGVuIHVzaW5nIHNldFRpbWVvdXQoKSBhcyBhIGZhbGxiYWNrIGZvciBDU1NcclxuICAgICwgekluZGV4OiAyZTkgLy8gVGhlIHotaW5kZXggKGRlZmF1bHRzIHRvIDIwMDAwMDAwMDApXHJcbiAgICAsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXHJcbiAgICAsIHRvcDogJzQwJScgLy8gVG9wIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxyXG4gICAgLCBsZWZ0OiAnNTAlJyAvLyBMZWZ0IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxyXG4gICAgLCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XHJcbiAgICAsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxyXG4gICAgLCBwb3NpdGlvbjogJ2Fic29sdXRlJyAvLyBFbGVtZW50IHBvc2l0aW9uaW5nXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfaW5pdCgpIHtcclxuICAgICAgdm0udXBsb2FkZWQgICAgICAgPSBmYWxzZTtcclxuICAgICAgdm0uc2hvd2Zvcm0gICAgICAgPSBmYWxzZTtcclxuXHJcbiAgICAgIHZtLmluc3RydW1lbnRzICAgID0gaW5zdHJ1bWVudFN2Yy5nZXRJbnN0cnVtZW50cygpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpXHJcbiAgICAgIHtcclxuICAgICAgICB2bS5pbnN0cnVtZW50cyAgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKTtcclxuICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpXHJcbiAgICAgIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdm0uYXJ0aXN0cyAgICAgICAgPSBhcnRpc3RTdmMuZ2V0QXJ0aXN0cygpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpXHJcbiAgICAgIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xyXG4gICAgICAgIHZtLmFydGlzdHMgICAgICA9IGRhdGEuZGF0YTtcclxuICAgICAgXHJcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKVxyXG4gICAgICB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHZtLnVwbG9hZEZpbGUgPSBmdW5jdGlvbiAoZmlsZSkge1xyXG4gICAgICAgIHZhciBzcGlubmVyID0gbmV3IFNwaW5uZXIob3B0cykuc3Bpbih0YXJnZXQpO1xyXG4gICAgICAgIHZtLmxvYWRpbmcgID0gdHJ1ZTtcclxuICAgICAgICB2bS51cGxvYWRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyBJbml0aWFsaXplIGZvcm1cclxuICAgICAgICB2bS5zaG93Zm9ybSAgICAgPSB0cnVlO1xyXG4gICAgICAgICQoJ3NlbGVjdCcpLm1hdGVyaWFsX3NlbGVjdCgpO1xyXG5cclxuICAgICAgICBVcGxvYWQudXBsb2FkKHtcclxuICAgICAgICAgICAgdXJsOiBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdXBsb2FkXCIsXHJcbiAgICAgICAgICAgIGZpbGVGb3JtRGF0YU5hbWU6ICdzb25nJyxcclxuICAgICAgICAgICAgc2VuZEZpZWxkc0FzOiAnZm9ybScsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICBzb25nOiBmaWxlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XHJcbiAgICAgICAgICAgIHZtLmZpbGVuYW1lICAgICA9IHJlc3AuZGF0YS5uYW1lO1xyXG4gICAgICAgICAgICB2bS50cmFja2xlbmd0aCAgPSByZXNwLmRhdGEubGVuZ3RoO1xyXG4gICAgICAgICAgICBzcGlubmVyLnN0b3AoKTtcclxuICAgICAgICAgICAgdm0ubG9hZGluZyAgICAgID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZtLnVwbG9hZGVkICAgICA9IHRydWU7XHJcbiAgICAgICAgfSwgXHJcbiAgICAgICAgZnVuY3Rpb24gKHJlc3ApIHtcclxuICAgICAgICAgICAgdm0ubG9hZGluZyAgPSBmYWxzZTtcclxuICAgICAgICAgICAgc3Bpbm5lci5zdG9wKCk7XHJcbiAgICAgICAgICAgIHZtLnVwbG9hZGZhaWxlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciB1c2VyX2lkID0gSlNPTi5wYXJzZShnZXRDb29raWUoJ3VzZXInKSkudXNlcklkO1xyXG4gICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgbmFtZTogdm0uc29uZ25hbWUsXHJcbiAgICAgICAgICAgIGZpbGVfdXJsOiB2bS5maWxlbmFtZSxcclxuICAgICAgICAgICAgdHJhY2tfbGVuZ3RoOiB2bS50cmFja2xlbmd0aCxcclxuICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZCxcclxuICAgICAgICAgICAgaW5zdHJ1bWVudF9pZDogdm0uaW5zdHJ1bWVudHNkcm9wZG93bixcclxuICAgICAgICAgICAgYXJ0aXN0X2lkIDogdm0uYXJ0aXN0bmFtZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIHNvbG9TdmMuaW5zZXJ0VHJhY2soZGF0YSlcclxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICRzdGF0ZS5nbyhcInNvbG9cIik7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcilcclxuICAgICAgICB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q29va2llKGNuYW1lKSB7XHJcbiAgICAgICAgICB2YXIgbmFtZSA9IGNuYW1lICsgXCI9XCI7XHJcbiAgICAgICAgICB2YXIgZGVjb2RlZENvb2tpZSA9IGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUpO1xyXG4gICAgICAgICAgdmFyIGNhID0gZGVjb2RlZENvb2tpZS5zcGxpdCgnOycpO1xyXG4gICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8Y2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICB2YXIgYyA9IGNhW2ldO1xyXG4gICAgICAgICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHtcclxuICAgICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWUpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLCBjLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICAgIH1cclxuICBfaW5pdCgpO1xyXG59KTsiLCJhcHAuZmlsdGVyKFwiYmFuZFwiLCBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gZnVuY3Rpb24odHJhY2tJZCwgbGlzdCkge1xyXG5cdFx0dmFyIHJldHVyblZhbHVlID0gZmFsc2U7XHJcblx0XHRcclxuXHRcdGFuZ3VsYXIuZm9yRWFjaChsaXN0LCBmdW5jdGlvbihpZCwgaW5kZXgpIHtcclxuXHRcdFx0aWYoaWQgPT0gdHJhY2tJZCkge1xyXG5cdFx0XHRcdHJldHVyblZhbHVlID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fVxyXG59KTsiLCJhcHAuc2VydmljZShcImFydGlzdFNlcnZpY2VcIiwgZnVuY3Rpb24oJGh0dHApIHtcclxuXHRcclxuXHQvL0dsb2JhbHNcclxuXHR2YXIgc3ZjIFx0XHRcdD0gdGhpcztcclxuXHJcblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdGZ1bmN0aW9uIGdldERhdGEgKHVybCwgb3B0aW9ucykge1xyXG5cclxuXHRcdCFvcHRpb25zID8gb3B0aW9ucyA9IHt9IDogXCJcIjtcclxuXHJcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcclxuXHR9XHJcblxyXG5cdC8vU3ZjIGZ1bmN0aW9uc1xyXG5cdHN2Yy5nZXRBcnRpc3RzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvYXJ0aXN0c1wiO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xyXG5cdH1cclxufSkiLCJhcHAuc2VydmljZShcImF1dGhTZXJ2aWNlXCIsIGZ1bmN0aW9uICgkYXV0aCwgJHJvb3RTY29wZSwgJGNvb2tpZXMsICRzdGF0ZSwgdXNlclNlcnZpY2UpIHtcclxuXHRcclxuXHR2YXIgc3ZjIFx0XHQ9IHRoaXM7XHJcblx0dmFyIHVzZXJTdmMgXHQ9IHVzZXJTZXJ2aWNlO1xyXG5cclxuXHRzdmMuaXNMb2dnZWRJbiBcdD0gZmFsc2U7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBsb2dpbiAodG9rZW4sIGlkLCB1c2VybmFtZSwgZW1haWwpIHtcclxuXHJcblx0XHR2YXIgZXhwaXJhdGlvblRpbWUgPSBuZXcgRGF0ZSgpO1xyXG5cdFx0ZXhwaXJhdGlvblRpbWUgPSBleHBpcmF0aW9uVGltZS5zZXRUaW1lKGV4cGlyYXRpb25UaW1lLmdldFRpbWUoKSArICh0b2tlbltcImV4cGlyZXNfaW5cIl0gKiAxMDAwKSk7XHJcblx0XHRleHBpcmF0aW9uVGltZSA9IG5ldyBEYXRlKGV4cGlyYXRpb25UaW1lKTtcclxuXHJcblx0XHR2YXIgdXNlckRhdGEgPSB7XHJcblxyXG5cdFx0XHR0b2tlbjogdG9rZW4sXHJcblx0XHRcdHVzZXJJZDogaWQsXHJcblx0XHRcdHVzZXJuYW1lOiB1c2VybmFtZSxcclxuXHRcdFx0ZW1haWw6IGVtYWlsLFxyXG5cdFx0XHQvL2lzQWRtaW46IGRhdGEuZGF0YS5pc0FkbWluXHJcblx0XHR9XHJcblxyXG5cdFx0Ly9jb25zb2xlLmxvZyh1c2VyRGF0YS50b2tlbik7XHJcblxyXG5cdFx0c3ZjLnVzZXIgPSB1c2VyRGF0YTtcclxuXHJcblx0XHQkY29va2llcy5wdXRPYmplY3QoXCJ1c2VyXCIsIHVzZXJEYXRhLCB7IGV4cGlyZXM6IGV4cGlyYXRpb25UaW1lIH0pO1xyXG5cdFx0JHJvb3RTY29wZS5pc0xvZ2dlZEluID0gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0Ly9DaGVjayBpZiByZXR1cm5lZCB1c2VyIGlzIEFkbWluXHJcblx0XHR1c2VyRGF0YS5pc0FkbWluID09IFwiMVwiID8gJHJvb3RTY29wZS5pc0FkbWluID0gdHJ1ZSA6ICRyb290U2NvcGUuaXNBZG1pbiA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly9TdmMgZnVuY3Rpb25zXHJcblx0c3ZjLmxvZ2luID0gZnVuY3Rpb24gKGNyZWRlbnRpYWxzKSB7XHJcblxyXG5cdFx0JGF1dGgubG9naW4oY3JlZGVudGlhbHMpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIFx0Ly8gQXV0aGVudGljYXRpb24gc3VjY2Vzc1xyXG4gICAgICAgIFx0dG9rZW4gXHRcdD0gZGF0YS5kYXRhLnRva2VuO1xyXG4gICAgICAgIFx0aWQgXHRcdFx0PSAwO1xyXG4gICAgICAgIFx0dXNlcm5hbWUgXHQ9IFwiXCI7XHJcbiAgICAgICAgXHRlbWFpbCBcdFx0PSBcIlwiO1xyXG5cclxuXHRcdFx0dXNlclN2Yy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdGlkIFx0XHRcdD0gZGF0YS5kYXRhLmlkO1xyXG5cdFx0XHRcdHVzZXJuYW1lIFx0PSBkYXRhLmRhdGEudXNlcm5hbWU7XHJcblx0XHRcdFx0ZW1haWwgXHRcdD0gZGF0YS5kYXRhLmVtYWlsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGxvZ2luKHRva2VuLCBpZCwgdXNlcm5hbWUsIGVtYWlsKTtcclxuXHRcdFx0XHRzdmMuaXNMb2dnZWRJbiA9IHRydWU7XHJcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG5cdFx0XHRcdHN2Yy5pc0xvZ2dlZEluID0gZmFsc2U7XHJcblx0XHRcdH0pO1xyXG4gICAgICAgIH0sIFxyXG4gICAgICAgIGZ1bmN0aW9uKGVycm9yKXtcclxuICAgICAgICBcdC8vIEF1dGhlbnRpY2F0aW9uIGZhaWxlZFxyXG4gICAgICAgIFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIFx0c3ZjLmlzTG9nZ2VkSW4gPSBmYWxzZTsgXHJcbiAgICAgICAgfSk7XHJcblx0fVxyXG5cclxuXHRzdmMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0JGF1dGgubG9nb3V0KClcclxuXHRcdFx0LnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcblx0XHRcdFx0JHJvb3RTY29wZS5pc0xvZ2dlZEluID0gZmFsc2U7XHJcblx0XHRcdFx0JHJvb3RTY29wZS5pc0FkbWluID0gZmFsc2U7XHJcblx0XHRcdFx0c3ZjLnVzZXIgPSBudWxsO1xyXG5cdFx0XHRcdHN2Yy5pc0xvZ2dlZEluID0gbnVsbDtcclxuXHJcblx0XHRcdFx0JGNvb2tpZXMucmVtb3ZlKFwidXNlclwiKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQkc3RhdGUuZ28oXCJob21lXCIpO1xyXG5cdFx0XHR9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG5cdFx0XHR9KVxyXG5cdH1cclxuXHJcblx0c3ZjLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXIpIHtcclxuXHJcblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3VzZXJcIjtcclxuXHJcblx0XHRyZXR1cm4gJGh0dHAucG9zdCh1cmwsIHVzZXIpO1xyXG5cdH1cclxufSk7IiwiYXBwLnNlcnZpY2UoXCJiYW5kU2VydmljZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHJcblx0dHJhY2tBcnJheSA9IFtdO1xyXG5cdHRyYWNrSWRBcnJheSA9IFtdO1xyXG5cdHRyYWNrQXJyYXlDb3VudCA9IDA7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBhcnJheU9iamVjdEluZGV4T2YobXlBcnJheSwgc2VhcmNoVGVybSwgcHJvcGVydHkpIHtcclxuICAgIFx0XHJcbiAgICBcdGZvcih2YXIgaSA9IDAsIGxlbiA9IG15QXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBcdGlmIChteUFycmF5W2ldW3Byb3BlcnR5XSA9PT0gc2VhcmNoVGVybSkgcmV0dXJuIGk7XHJcbiAgICBcdH1cclxuXHJcbiAgICBcdHJldHVybiAtMTtcclxuXHR9XHJcblx0Ly9UcmFja0FycmF5Q291bnRcclxuXHRmdW5jdGlvbiBpbmNyZW1lbnRUcmFja0FycmF5Q291bnQoKSB7XHJcblx0XHR0cmFja0FycmF5Q291bnQgKys7XHJcblx0XHRyZXR1cm4gdHJhY2tBcnJheUNvdW50O1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZGVjcmVtZW50VHJhY2tBcnJheUNvdW50KCkge1xyXG5cdFx0dHJhY2tBcnJheUNvdW50IC0tO1xyXG5cdFx0cmV0dXJuIHRyYWNrQXJyYXlDb3VudDtcclxuXHR9XHJcblxyXG5cdC8vVHJhY2tJZEFycmF5XHJcblx0ZnVuY3Rpb24gYWRkVG9UcmFja0lkQXJyYXkodHJhY2tJZCkge1xyXG5cdFx0dHJhY2tJZEFycmF5LnB1c2godHJhY2tJZCk7XHJcblx0XHRyZXR1cm4gdHJhY2tJZEFycmF5O1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gcmVtb3ZlRnJvbVRyYWNrSWRBcnJheSh0cmFja0lkKSB7XHJcblx0XHRpbmRleCA9IHRyYWNrSWRBcnJheS5pbmRleE9mKHRyYWNrSWQpO1xyXG5cdFx0aWYoaW5kZXggPiAtMSkge1xyXG5cdFx0XHR0cmFja0lkQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJhY2tJZEFycmF5O1xyXG5cdH1cclxuXHJcblx0Ly9TdmMgZnVuY3Rpb25zXHJcblx0c3ZjLmdldFRyYWNrQXJyYXlDb3VudCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRyYWNrQXJyYXlDb3VudDtcclxuXHR9XHJcblxyXG5cdHN2Yy5nZXRUcmFja0lkQXJyYXkgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0cmFja0lkQXJyYXk7XHJcblx0fVxyXG5cclxuXHJcblx0c3ZjLmFkZFRvVHJhY2tBcnJheSA9IGZ1bmN0aW9uKHRyYWNrKSB7XHJcblx0XHR0cmFja0FycmF5LnB1c2godHJhY2spO1xyXG5cdFx0aW5jcmVtZW50VHJhY2tBcnJheUNvdW50KCk7XHJcblx0XHRhZGRUb1RyYWNrSWRBcnJheSh0cmFjay5pZCk7XHJcblx0XHRyZXR1cm4gdHJhY2tBcnJheTtcclxuXHR9XHJcblxyXG5cdHN2Yy5yZW1vdmVGcm9tVHJhY2tBcnJheSA9IGZ1bmN0aW9uKHRyYWNrKSB7XHJcblx0XHRpbmRleCA9IGFycmF5T2JqZWN0SW5kZXhPZih0cmFja0FycmF5LCB0cmFjay5pZCwgXCJpZFwiKTtcclxuXHRcdGlmKGluZGV4ID4gLTEpIHtcclxuXHRcdFx0dHJhY2tBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRkZWNyZW1lbnRUcmFja0FycmF5Q291bnQoKTtcclxuXHRcdHJlbW92ZUZyb21UcmFja0lkQXJyYXkodHJhY2suaWQpO1xyXG5cdFx0cmV0dXJuIHRyYWNrQXJyYXk7XHJcblx0fVxyXG5cclxuXHRzdmMuZ2V0VHJhY2tBcnJheSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRyYWNrQXJyYXk7XHJcblx0fVxyXG5cclxuXHRcclxuXHJcblxyXG5cclxuXHJcblx0c3ZjLnRlc3RGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0YWxlcnQoXCJUZXN0IGZ1bmN0aW9uIGNhbGxlZCBmcm9tIGluc2lkZSBzZXJ2aWNlIVwiKTtcclxuXHR9XHJcbn0pIiwiYXBwLnNlcnZpY2UoXCJmaWx0ZXJTZXJ2aWNlXCIsIGZ1bmN0aW9uKGluc3RydW1lbnRTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHN2YyA9IHRoaXM7XHJcblx0dmFyIGluc3RTdmMgPSBpbnN0cnVtZW50U2VydmljZTtcclxuXHJcblxyXG5cdHN2Yy5jcmVhdGVTb2xvRmlsdGVyRGF0YSA9IGZ1bmN0aW9uKClcclxuXHR7XHJcblx0XHRzdmMuc29sb0ZpbHRlckRhdGEgPSB7XHRcImFydGlzdFwiOiBcIlwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XCJ0aXRsZVwiOiBcIlwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0fTtcclxuXHJcblx0XHRhbmd1bGFyLmZvckVhY2goaW5zdFN2Yy5pbnN0cnVtZW50cywgZnVuY3Rpb24odmFsdWUsIGtleSlcclxuXHRcdHtcclxuXHRcdFx0c3ZjLnNvbG9GaWx0ZXJEYXRhW3ZhbHVlLmlkXSA9IHRydWU7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHN2Yy5jcmVhdGVNZXJnZWRGaWx0ZXJEYXRhID0gZnVuY3Rpb24oKVxyXG5cdHtcclxuXHRcdHN2Yy5tZXJnZWRGaWx0ZXJEYXRhID0ge1x0XCJhcnRpc3RcIjogXCJcIixcclxuXHRcdFx0XHRcdFx0XHRcdFx0XCJ0aXRsZVwiOiBcIlwiLFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gX2luaXQoKSB7XHJcblx0XHRzdmMuY3JlYXRlU29sb0ZpbHRlckRhdGEoKTtcclxuXHRcdHN2Yy5jcmVhdGVNZXJnZWRGaWx0ZXJEYXRhKCk7XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KSIsImFwcC5zZXJ2aWNlKFwiaW5zdHJ1bWVudFNlcnZpY2VcIiwgZnVuY3Rpb24oJGh0dHApIHtcclxuXHRcclxuXHQvL0dsb2JhbHNcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHJcblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdGZ1bmN0aW9uIGdldERhdGEgKHVybCwgb3B0aW9ucykge1xyXG5cclxuXHRcdCFvcHRpb25zID8gb3B0aW9ucyA9IHt9IDogXCJcIjtcclxuXHJcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcclxuXHR9XHJcblxyXG5cdC8vU3ZjIGZ1bmN0aW9uc1xyXG5cdHN2Yy5nZXRJbnN0cnVtZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL2luc3RydW1lbnRzXCI7XHJcblx0XHRcclxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XHJcblx0fVxyXG5cclxuXHQvLyBJbml0aWFsIHZhbHVlcyAod2lsbCBiZSBvdmVyd3JpdHRlIGJ5IGRiIHZhbHVlcylcclxuXHRzdmMuaW5zdHJ1bWVudHMgPSBbe1xyXG4gXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIkxlYWQtZ3VpdGFyXCIsXHJcbiBcdFx0XHRcdFx0XHRcdFwiaWRcIjoxXHJcbiBcdFx0XHRcdFx0XHR9LFxyXG4gXHRcdFx0XHRcdFx0e1xyXG4gXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIlJ5dGhtLWd1aXRhclwiLFxyXG4gXHRcdFx0XHRcdFx0XHRcImlkXCI6MlxyXG4gXHRcdFx0XHRcdFx0fSxcclxuIFx0XHRcdFx0XHRcdHtcclxuIFx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJEcnVtXCIsXHJcbiBcdFx0XHRcdFx0XHRcdFwiaWRcIjozXHJcbiBcdFx0XHRcdFx0XHR9LFxyXG4gXHRcdFx0XHRcdFx0e1xyXG4gXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIkJhc3NcIixcclxuXHRcdFx0XHRcdFx0XHRcImlkXCI6NFxyXG4gXHRcdFx0XHRcdFx0fSxcclxuIFx0XHRcdFx0XHRcdHtcclxuIFx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJCYXNzXCIsXHJcblx0XHRcdFx0XHRcdFx0XCJpZFwiOjVcclxuIFx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIktleXNcIixcclxuIFx0XHRcdFx0XHRcdFx0XCJpZFwiOjZcclxuIFx0XHRcdFx0XHRcdH1dO1xyXG59KSIsImFwcC5zZXJ2aWNlKFwibWVyZ2VkU2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1xyXG5cdFxyXG5cdC8vR2xvYmFsc1xyXG5cdHZhciBzdmMgPSB0aGlzO1xyXG5cclxuXHQvL1ByaXZhdGUgZnVuY3Rpb25zXHJcblx0ZnVuY3Rpb24gZ2V0RGF0YSAodXJsLCBvcHRpb25zKSB7XHJcblxyXG5cdFx0IW9wdGlvbnMgPyBvcHRpb25zID0ge30gOiBcIlwiO1xyXG5cclxuXHRcdHJldHVybiAkaHR0cC5nZXQodXJsLCBvcHRpb25zKVxyXG5cdH1cclxuXHJcblx0Ly9TdmMgZnVuY3Rpb25zXHJcblx0c3ZjLmdldFRyYWNrcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL21lcmdlZHRyYWNrc1wiO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xyXG5cdH1cclxuXHJcblx0c3ZjLmdldFRyYWNrQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xyXG5cclxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvbWVyZ2VkdHJhY2tzL1wiICsgaWQ7XHJcblxyXG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcclxuXHR9XHJcblxyXG5cdHN2Yy5tZXJnZVRyYWNrcyA9IGZ1bmN0aW9uKGRhdGEpXHJcblx0e1xyXG5cdFx0cmV0dXJuICRodHRwLnBvc3QoQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL21lcmdlZHRyYWNrcy9jcmVhdGVcIiwgZGF0YSk7XHJcblx0fVxyXG5cclxuXHRzdmMuaW5zZXJ0Vm90ZSA9IGZ1bmN0aW9uKGRhdGEpXHJcblx0e1xyXG5cdFx0cmV0dXJuICRodHRwLnBvc3QoQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3ZvdGUvY3JlYXRlXCIsIGRhdGEpO1xyXG5cdH1cclxuXHJcblx0c3ZjLmRvd25sb2FkID0gZnVuY3Rpb24gKGlkKSB7XHJcblxyXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi9tZXJnZWR0cmFja3MvXCIgKyBpZCArIFwiL2Rvd25sb2FkXCI7XHJcblx0XHRcclxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XHJcblx0fVxyXG59KSIsImFwcC5zZXJ2aWNlKFwic29sb1NlcnZpY2VcIiwgZnVuY3Rpb24oJGh0dHApIHtcclxuXHRcclxuXHQvL0dsb2JhbHNcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHJcblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdGZ1bmN0aW9uIGdldERhdGEgKHVybCwgb3B0aW9ucykge1xyXG5cclxuXHRcdCFvcHRpb25zID8gb3B0aW9ucyA9IHt9IDogXCJcIjtcclxuXHJcblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcclxuXHR9XHJcblxyXG5cdC8vU3ZjIGZ1bmN0aW9uc1xyXG5cdHN2Yy5nZXRUcmFja3MgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi90cmFja3NcIjtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcclxuXHR9XHJcblxyXG5cdHN2Yy5nZXRUcmFja0J5SWQgPSBmdW5jdGlvbiAoaWQpIHtcclxuXHJcblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3RyYWNrcy9cIiArIGlkO1xyXG5cclxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XHJcblx0fVxyXG5cclxuXHRzdmMuaW5zZXJ0VHJhY2sgPSBmdW5jdGlvbihkYXRhKVxyXG5cdHtcclxuXHRcdHJldHVybiAkaHR0cC5wb3N0KENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi90cmFja3MvY3JlYXRlXCIsIGRhdGEpO1xyXG5cdH1cclxufSkiLCJhcHAuc2VydmljZShcInVzZXJTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XHRcclxuXHRcclxuXHR2YXIgc3ZjID0gdGhpcztcclxuXHJcblx0c3ZjLmdldFVzZXIgPSBmdW5jdGlvbigpXHJcblx0e1xyXG5cdFx0cmV0dXJuICRodHRwLmdldChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdXNlclwiKTtcclxuXHR9XHJcblxyXG5cdHN2Yy51cGRhdGVVc2VyID0gZnVuY3Rpb24oZGF0YSlcclxuXHR7XHJcblx0XHRyZXR1cm4gJGh0dHAucG9zdChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdXNlclwiLCBkYXRhKTtcclxuXHR9XHJcbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYkhlYWRlclwiLCBmdW5jdGlvbihiYW5kU2VydmljZSkge1xyXG5cdHJldHVybiB7XHJcblx0XHRyZXN0cmljdDogXCJFXCIsXHJcblx0XHR0ZW1wbGF0ZVVybDogXCJhcHAvZGlyZWN0aXZlcy9kY2ItaGVhZGVyL2RjYi1oZWFkZXIuaHRtbFwiLFxyXG5cdFx0cmVwbGFjZTogdHJ1ZSxcclxuXHRcdHNjb3BlOiB7fSxcclxuXHRcdGNvbnRyb2xsZXJBczogXCJoZWFkXCIsXHJcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsIHVzZXJTZXJ2aWNlLCBhdXRoU2VydmljZSwgJGF1dGgsICRyb290U2NvcGUpIHtcclxuXHRcdFx0XHJcblx0XHRcdHZhciB2bSBcdFx0XHQ9IHRoaXM7XHJcblx0XHRcdHZhciB1c2VyU3ZjIFx0PSB1c2VyU2VydmljZTtcclxuXHRcdFx0dmFyIGF1dGhTdmMgXHQ9IGF1dGhTZXJ2aWNlO1xyXG5cdFx0XHR2YXIgYmFuZFN2YyBcdD0gYmFuZFNlcnZpY2U7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdFx0XHR2bS50cmFja0FycmF5ID0gYmFuZFN2Yy5nZXRUcmFja0FycmF5O1xyXG5cdFx0XHRcdHZtLnRyYWNrQXJyYXlDb3VudCA9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheUNvdW50O1xyXG5cclxuXHRcdFx0XHRpZigkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKSlcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHR1c2VyU3ZjLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0XHRcdCRyb290U2NvcGUudXNlcm5hbWUgPSBkYXRhLmRhdGEudXNlcm5hbWU7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZtLnNob3dMb2dpbiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQkKCcjbG9naW5fbW9kYWwnKS5tb2RhbCgpO1xyXG5cdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCdvcGVuJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZtLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRhdXRoU3ZjLmxvZ291dCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2bS5zaG93UmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0JCgnI3JlZ2lzdGVyX21vZGFsJykubW9kYWwoKTtcclxuXHRcdFx0XHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgnb3BlbicpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2bS5zaG93QmFuZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQkKCcjYmFuZF9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0JCgnI2JhbmRfbW9kYWwnKS5tb2RhbCgnb3BlbicpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2bS5pc0F1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gJGF1dGguaXNBdXRoZW50aWNhdGVkKCk7XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRfaW5pdCgpO1xyXG5cclxuXHRcdFx0Ly9XYXRjaGVzXHJcblx0XHRcdCRzY29wZS4kd2F0Y2goXHJcblx0XHRcdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gYXV0aFN2Yy51c2VyIH0sIFxyXG5cdFx0XHRcdGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHRcdFx0XHR2bS51c2VyID0gYXV0aFN2Yy51c2VyO1xyXG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyh2bS51c2VyKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYkJhbmRcIiwgZnVuY3Rpb24oYmFuZFNlcnZpY2UpIHtcclxuXHRyZXR1cm4ge1xyXG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxyXG5cdFx0dGVtcGxhdGVVcmw6IFwiYXBwL2RpcmVjdGl2ZXMvZGNiLWJhbmQvZGNiLWJhbmQuaHRtbFwiLFxyXG5cdFx0cmVwbGFjZTogdHJ1ZSxcclxuXHRcdHNjb3BlOiB7fSxcclxuXHRcdGNvbnRyb2xsZXJBczogXCJiYW5kXCIsXHJcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkYXV0aCwgJHNjb3BlLCAkcm9vdFNjb3BlKSB7XHJcblx0XHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHRcdHZhciBiYW5kU3ZjID0gYmFuZFNlcnZpY2U7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdFx0XHR2bS50cmFja0FycmF5IFx0XHRcdD0gYmFuZFN2Yy5nZXRUcmFja0FycmF5O1xyXG5cdFx0XHRcdHZtLmJhbmRUcmFja0lkQXJyYXkgXHQ9IGJhbmRTdmMuZ2V0VHJhY2tJZEFycmF5O1xyXG5cdFx0XHRcdHZtLnRyYWNrQXJyYXlDb3VudCBcdFx0PSBiYW5kU3ZjLmdldFRyYWNrQXJyYXlDb3VudDtcclxuXHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyh2bS50cmFja0FycmF5Q291bnQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2bS5yZW1vdmVGcm9tQmFuZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XHJcblx0XHRcclxuXHRcdFx0XHRiYW5kU3ZjLnJlbW92ZUZyb21UcmFja0FycmF5KHRyYWNrKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJUcmFjayByZW1vdmVkIGZyb20gbmV3IGJhbmQ6IFwiICsgdHJhY2spO1xyXG5cdFx0XHRcdC8vY29uc29sZS5sb2coYmFuZFN2Yy50cmFja0FycmF5KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0X2luaXQoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYkxvZ2luXCIsIGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB7XHJcblx0XHRyZXN0cmljdDogXCJFXCIsXHJcblx0XHR0ZW1wbGF0ZVVybDogXCJhcHAvZGlyZWN0aXZlcy9kY2ItbG9naW4vZGNiLWxvZ2luLmh0bWxcIixcclxuXHRcdHJlcGxhY2U6IHRydWUsXHJcblx0XHRzY29wZToge30sXHJcblx0XHRjb250cm9sbGVyQXM6IFwibG9naW5cIixcclxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRhdXRoLCAkc2NvcGUsICRyb290U2NvcGUsIHVzZXJTZXJ2aWNlLCBhdXRoU2VydmljZSwgJGNvb2tpZXMpIHtcclxuXHRcdFx0dmFyIHZtIFx0XHRcdD0gdGhpcztcclxuXHRcdFx0dmFyIHVzZXJTdmMgXHQ9IHVzZXJTZXJ2aWNlO1xyXG5cdFx0XHR2YXIgYXV0aFN2YyBcdD0gYXV0aFNlcnZpY2U7XHJcblx0XHRcdHZhciB0YXJnZXQgXHRcdD0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luLXNwaW5uZXInKTtcclxuXHJcblx0XHRcdHZhciBvcHRzID0ge1xyXG5cdCAgXHRcdFx0bGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xyXG5cdFx0XHRcdCwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxyXG5cdFx0XHRcdCwgd2lkdGg6IDE0IC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xyXG5cdFx0XHRcdCwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcclxuXHRcdFx0XHQsIHNjYWxlOiAwLjQgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxyXG5cdFx0XHRcdCwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxyXG5cdFx0XHRcdCwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXHJcblx0XHRcdFx0LCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXHJcblx0XHRcdFx0LCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxyXG5cdFx0XHRcdCwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcclxuXHRcdFx0XHQsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXHJcblx0XHRcdFx0LCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcclxuXHRcdFx0XHQsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXHJcblx0XHRcdFx0LCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcclxuXHRcdFx0XHQsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXHJcblx0XHRcdFx0LCB0b3A6ICc2MCUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdFx0XHQsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcblx0XHRcdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XHJcblx0XHRcdFx0LCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cclxuXHRcdFx0XHQsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdFx0XHRmdW5jdGlvbiBsb2dpbiAodG9rZW4sIGlkLCB1c2VybmFtZSwgZW1haWwpIHtcclxuXHJcblx0XHRcdFx0dmFyIGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoKTtcclxuXHRcdFx0XHRleHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lLnNldFRpbWUoZXhwaXJhdGlvblRpbWUuZ2V0VGltZSgpICsgKHRva2VuW1wiZXhwaXJlc19pblwiXSAqIDEwMDApKTtcclxuXHRcdFx0XHRleHBpcmF0aW9uVGltZSA9IG5ldyBEYXRlKGV4cGlyYXRpb25UaW1lKTtcclxuXHJcblx0XHRcdFx0dmFyIHVzZXJEYXRhID0ge1xyXG5cclxuXHRcdFx0XHRcdHRva2VuOiB0b2tlbixcclxuXHRcdFx0XHRcdHVzZXJJZDogaWQsXHJcblx0XHRcdFx0XHR1c2VybmFtZTogdXNlcm5hbWUsXHJcblx0XHRcdFx0XHRlbWFpbDogZW1haWwsXHJcblx0XHRcdFx0XHQvL2lzQWRtaW46IGRhdGEuZGF0YS5pc0FkbWluXHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zb2xlLmxvZyh1c2VyRGF0YS50b2tlbik7XHJcblxyXG5cdFx0XHRcdGF1dGhTdmMudXNlciA9IHVzZXJEYXRhO1xyXG5cclxuXHRcdFx0XHQkY29va2llcy5wdXRPYmplY3QoXCJ1c2VyXCIsIHVzZXJEYXRhLCB7IGV4cGlyZXM6IGV4cGlyYXRpb25UaW1lIH0pO1xyXG5cdFx0XHRcdCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IHRydWU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly9DaGVjayBpZiByZXR1cm5lZCB1c2VyIGlzIEFkbWluXHJcblx0XHRcdFx0dXNlckRhdGEuaXNBZG1pbiA9PSBcIjFcIiA/ICRyb290U2NvcGUuaXNBZG1pbiA9IHRydWUgOiAkcm9vdFNjb3BlLmlzQWRtaW4gPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHJcblx0XHRcdC8vVm0gZnVuY3Rpb25zXHJcblx0ICAgICAgICB2bS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xyXG5cdCAgICAgICAgXHR2YXIgc3Bpbm5lciA9IG5ldyBTcGlubmVyKG9wdHMpLnNwaW4odGFyZ2V0KTtcclxuXHQgICAgICAgIFx0dm0ubG9hZGluZyBcdD0gdHJ1ZTtcclxuXHQgICAgICAgIFx0Y29uc29sZS5sb2codm0ubG9hZGluZyk7XHJcblxyXG5cdCAgICAgICAgICAgIHZhciBjcmVkZW50aWFscyA9IHtcclxuXHQgICAgICAgICAgICAgICAgZW1haWw6IHZtLmVtYWlsLFxyXG5cdCAgICAgICAgICAgICAgICBwYXNzd29yZDogdm0ucGFzc3dvcmRcclxuXHQgICAgICAgICAgICB9XHJcblx0ICAgICAgICAgICAgXHJcblx0ICAgICAgICAgICAgYXV0aFN2Yy5sb2dpbihjcmVkZW50aWFscyk7XHJcblx0ICAgICAgICAgICAgXHJcblx0ICAgICAgICAgICAgLy9XYXRjaGVzXHJcblx0XHRcdFx0dmFyIHVucmVnaXN0ZXIgPSAkc2NvcGUuJHdhdGNoKFxyXG5cdFx0XHRcdCBcdGZ1bmN0aW9uICgpIHsgcmV0dXJuIGF1dGhTdmMuaXNMb2dnZWRJbiB9LCBcclxuXHRcdFx0XHQgXHRmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdGlmKGF1dGhTdmMuaXNMb2dnZWRJbikgXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0ICAgICAgICBcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0XHRcdFx0JCgnI2xvZ2luX21vZGFsJykubW9kYWwoJ2Nsb3NlJyk7XHJcblx0XHRcdFx0ICAgICAgICBcdHNwaW5uZXIuc3RvcCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmKCFhdXRoU3ZjLmlzTG9nZ2VkSW4pXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRzcGlubmVyLnN0b3AoKTtcclxuXHRcdFx0XHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIHRydWUpO1xyXG5cdCAgICAgICAgfVxyXG5cdFx0fVxyXG5cdH1cclxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiTWVyZ2Vwcm9jZXNzaW5nXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogXCJFXCIsXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL2RpcmVjdGl2ZXMvZGNiLW1lcmdlcHJvY2Vzc2luZy9kY2ItbWVyZ2Vwcm9jZXNzaW5nLmh0bWxcIixcclxuICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgIHNjb3BlOiB7fSxcclxuICAgICAgICBjb250cm9sbGVyQXM6IFwicHJvY2Vzc2luZ1wiLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRpbnRlcnZhbCkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgdm0gICAgICAgICAgPSB0aGlzO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY2Vzc2luZy1zcGlubmVyJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0cyA9IHtcclxuICAgICAgICAgICAgICAgIGxpbmVzOiAxMyAvLyBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIGRyYXdcclxuICAgICAgICAgICAgICAgICwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxyXG4gICAgICAgICAgICAgICAgLCB3aWR0aDogMTQgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXHJcbiAgICAgICAgICAgICAgICAsIHJhZGl1czogNDIgLy8gVGhlIHJhZGl1cyBvZiB0aGUgaW5uZXIgY2lyY2xlXHJcbiAgICAgICAgICAgICAgICAsIHNjYWxlOiAwLjQgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxyXG4gICAgICAgICAgICAgICAgLCBjb3JuZXJzOiAxIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXHJcbiAgICAgICAgICAgICAgICAsIGNvbG9yOiAnIzAwMCcgLy8gI3JnYiBvciAjcnJnZ2JiIG9yIGFycmF5IG9mIGNvbG9yc1xyXG4gICAgICAgICAgICAgICAgLCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXHJcbiAgICAgICAgICAgICAgICAsIHJvdGF0ZTogMCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAsIGRpcmVjdGlvbjogMSAvLyAxOiBjbG9ja3dpc2UsIC0xOiBjb3VudGVyY2xvY2t3aXNlXHJcbiAgICAgICAgICAgICAgICAsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXHJcbiAgICAgICAgICAgICAgICAsIHRyYWlsOiA2MCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxyXG4gICAgICAgICAgICAgICAgLCBmcHM6IDIwIC8vIEZyYW1lcyBwZXIgc2Vjb25kIHdoZW4gdXNpbmcgc2V0VGltZW91dCgpIGFzIGEgZmFsbGJhY2sgZm9yIENTU1xyXG4gICAgICAgICAgICAgICAgLCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcclxuICAgICAgICAgICAgICAgICwgY2xhc3NOYW1lOiAnc3Bpbm5lcicgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcclxuICAgICAgICAgICAgICAgICwgdG9wOiAnNDAlJyAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcbiAgICAgICAgICAgICAgICAsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcbiAgICAgICAgICAgICAgICAsIHNoYWRvdzogZmFsc2UgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcclxuICAgICAgICAgICAgICAgICwgaHdhY2NlbDogZmFsc2UgLy8gV2hldGhlciB0byB1c2UgaGFyZHdhcmUgYWNjZWxlcmF0aW9uXHJcbiAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHRleHRBcnJheSAgICAgICA9IFtcclxuICAgICAgICAgICAgICAgIFwiVHVuaW5nIGluc3RydW1lbnRzLi4uXCIsIFxyXG4gICAgICAgICAgICAgICAgXCJBZGp1c3RpbmcgYW1wIHNldHRpbmdzLi4uXCIsIFxyXG4gICAgICAgICAgICAgICAgXCJTb3VuZGNoZWNraW5nLi4uXCIsIFxyXG4gICAgICAgICAgICAgICAgXCJSZWNvcmRpbmcuLi5cIiwgXHJcbiAgICAgICAgICAgICAgICBcIk1peGluZyBzb3VuZC4uLlwiLCBcclxuICAgICAgICAgICAgICAgIFwiRmluaXNoaW5nIHVwLi4uXCJcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzcGlubmVyICAgICAgICAgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZXggICAgPSAwO1xyXG5cclxuICAgICAgICAgICAgJGludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYoJCgnI3Byb2Nlc3NpbmdfbW9kYWwnKS5pcyhcIjp2aXNpYmxlXCIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLnRleHQgPSB0ZXh0QXJyYXlbY3VycmVudEluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXgrKztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudEluZGV4ID49IHRleHRBcnJheS5sZW5ndGggLSAxKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDQwMDApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiUmVnaXN0ZXJcIiwgZnVuY3Rpb24odXNlclNlcnZpY2UpIHtcclxuXHRyZXR1cm4ge1xyXG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxyXG5cdFx0dGVtcGxhdGVVcmw6IFwiYXBwL2RpcmVjdGl2ZXMvZGNiLXJlZ2lzdGVyL2RjYi1yZWdpc3Rlci5odG1sXCIsXHJcblx0XHRyZXBsYWNlOiB0cnVlLFxyXG5cdFx0c2NvcGU6IHt9LFxyXG5cdFx0Y29udHJvbGxlckFzOiBcInJlZ2lzdGVyXCIsXHJcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkYXV0aCwgJHNjb3BlLCAkcm9vdFNjb3BlLCB1c2VyU2VydmljZSwgYXV0aFNlcnZpY2UpIHtcclxuXHRcdFx0dmFyIHZtIFx0XHRcdD0gdGhpcztcclxuXHRcdFx0dmFyIHVzZXJTdmMgXHQ9IHVzZXJTZXJ2aWNlO1xyXG5cdFx0XHR2YXIgYXV0aFN2YyBcdD0gYXV0aFNlcnZpY2U7XHJcblx0XHRcdHZhciB0YXJnZXQgXHRcdD0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdGVyLXNwaW5uZXInKTtcclxuXHJcblx0XHRcdHZhciBvcHRzID0ge1xyXG5cdCAgXHRcdFx0bGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xyXG5cdFx0XHRcdCwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxyXG5cdFx0XHRcdCwgd2lkdGg6IDE0IC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xyXG5cdFx0XHRcdCwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcclxuXHRcdFx0XHQsIHNjYWxlOiAwLjQgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxyXG5cdFx0XHRcdCwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxyXG5cdFx0XHRcdCwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXHJcblx0XHRcdFx0LCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXHJcblx0XHRcdFx0LCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxyXG5cdFx0XHRcdCwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcclxuXHRcdFx0XHQsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXHJcblx0XHRcdFx0LCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcclxuXHRcdFx0XHQsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXHJcblx0XHRcdFx0LCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcclxuXHRcdFx0XHQsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXHJcblx0XHRcdFx0LCB0b3A6ICc2MCUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdFx0XHQsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcblx0XHRcdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XHJcblx0XHRcdFx0LCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cclxuXHRcdFx0XHQsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcclxuXHRcdFx0fVxyXG5cclxuXHJcblx0XHRcdFxyXG5cdFx0XHR2bS5yZWdpc3RlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBzcGlubmVyID0gbmV3IFNwaW5uZXIob3B0cykuc3Bpbih0YXJnZXQpO1xyXG5cdCAgICAgICAgXHR2bS5sb2FkaW5nIFx0PSB0cnVlO1xyXG5cclxuXHRcdFx0XHR2YXIgdXNlciA9IHtcclxuXHRcdFx0XHQgIFx0dXNlcm5hbWU6IHZtLnVzZXJuYW1lLFxyXG5cdFx0XHRcdCAgXHRlbWFpbDogdm0uZW1haWwsXHJcblx0XHRcdFx0ICBcdHBhc3N3b3JkOiB2bS5wYXNzd29yZFxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdCRhdXRoLnNpZ251cCh1c2VyKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHQvLyBSZWdpc3RyYXRpb24gc3VjY2Vzc1xyXG5cdFx0XHRcdFx0YXV0aFN2Yy5sb2dpbih1c2VyKTtcclxuXHJcblx0XHQgICAgICAgICAgICAvL1dhdGNoZXNcclxuXHRcdFx0XHRcdHZhciB1bnJlZ2lzdGVyID0gJHNjb3BlLiR3YXRjaChcclxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gYXV0aFN2Yy5pc0xvZ2dlZEluIH0sIFxyXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmKGF1dGhTdmMuaXNMb2dnZWRJbikgXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0ICAgICAgICBcdCQoJyNyZWdpc3Rlcl9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0XHRcdFx0XHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgnY2xvc2UnKTtcclxuXHRcdFx0XHRcdCAgICAgICAgXHRzcGlubmVyLnN0b3AoKTtcclxuXHRcdFx0XHRcdCAgICAgICAgXHR1bnJlZ2lzdGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmKGF1dGhTdmMuaXNMb2dnZWRJbiA9PT0gZmFsc2UpXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0c3Bpbm5lci5zdG9wKCk7XHJcblx0ICAgICAgICBcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdCAgICAgICAgXHRcdFx0XHRcdHVucmVnaXN0ZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIHRydWUpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHQvLyBSZWdpc3RyYXRpb24gZmFpbGVkXHJcblx0XHRcdFx0ICBcdHNwaW5uZXIuc3RvcCgpO1xyXG5cdFx0XHRcdCAgXHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiU3RpY2t5XCIsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcclxuXHR2YXIgJHdpbiA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KTsgLy8gd3JhcCB3aW5kb3cgb2JqZWN0IGFzIGpRdWVyeSBvYmplY3RcclxuXHJcblx0cmV0dXJuIHtcclxuXHRcdHJlc3RyaWN0OiBcIkFcIixcclxuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuXHQgICAgICBcdHZhciB0b3BDbGFzcyA9IGF0dHJzLmRjYlN0aWNreSwgLy8gZ2V0IENTUyBjbGFzcyBmcm9tIGRpcmVjdGl2ZSdzIGF0dHJpYnV0ZSB2YWx1ZVxyXG5cdCAgICAgICAgICBcdG9mZnNldFRvcCA9IGVsZW1lbnQub2Zmc2V0KCkudG9wOyAvLyBnZXQgZWxlbWVudCdzIG9mZnNldCB0b3AgcmVsYXRpdmUgdG8gZG9jdW1lbnRcclxuXHJcblx0ICAgICAgXHQkd2luLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xyXG5cdFx0ICAgICAgICBpZiAoJHdpbi5zY3JvbGxUb3AoKSA+PSBvZmZzZXRUb3ApIHtcclxuXHRcdCAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKHRvcENsYXNzKTtcclxuXHRcdCAgICAgICAgfSBlbHNlIHtcclxuXHRcdCAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKHRvcENsYXNzKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdCAgICAgIFx0fSk7XHJcblx0ICBcdH1cclxuXHR9XHJcbn0pIl19
