var app=angular.module("app",["ui.router","satellizer","ngCookies","ngFileUpload"]),CONSTANTS=function(){var e={};return e.PUBLIC_BASE_URL="http://discoverband.api",e.API_BASE_URL="http://discoverband.api/api",e}();app.config(["$stateProvider","$urlRouterProvider","$authProvider","$httpProvider",function(e,r,t,n){t.loginUrl=CONSTANTS.API_BASE_URL+"/login",t.signupUrl=CONSTANTS.API_BASE_URL+"/register",r.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/pages/home.html",controller:"homeController as home"}).state("solo",{url:"/solo",templateUrl:"app/pages/solo.html",controller:"soloController as solo"}).state("merged",{url:"/merged",templateUrl:"app/pages/merged.html",controller:"mergedController as merged"}).state("band",{url:"/band",templateUrl:"app/pages/band.html",controller:"bandController as band"}).state("merge",{url:"/merge",templateUrl:"app/pages/merge.html",controller:"mergeController as merge"}).state("profile",{url:"/profile",templateUrl:"app/pages/profile.html",controller:"profileController as profile",data:{requiresLoggedIn:!0}}).state("upload",{url:"/upload",templateUrl:"app/pages/upload.html",controller:"uploadController as upload",data:{requiresLoggedIn:!0}})}]).run(["$rootScope","$location","$auth","$state",function(e,r,t,n){function o(e){return!e.data||!e.data.requiresLoggedIn||t.isAuthenticated()}var a="/";e.$on("$stateChangeStart",function(e,t,i,c,s){var l=t.url;i&&(l=n.href(t,i),l=l.replace("#","")),o(t)?r.path(l):(console.log("notLoggedIn"),r.path(a))})}]),app.controller("bandController",["bandService",function(e){function r(){t.trackArray=n.getTrackArray}var t=this,n=e;r()}]),app.controller("homeController",["instrumentService","filterService",function(e,r){function t(){n.filterData=o.soloFilterData}var n=this,o=r;t()}]),app.controller("mergeController",["bandService","mergedService","$state",function(e,r,t){function n(){o.tracks=a.getTrackArray(),o.showTracks=!1,o.thereAreTracks=!1,o.loadedTracks=[],o.savedTime=[],o.trimAmounts=[],o.tracks.length>0&&(o.thereAreTracks=!0)}var o=this,a=e,i=r,c=[];o.load=function(){if(o.thereAreTracks){for(var e=o.tracks.length-1;e>=0;e--){var r=o.tracks[e].id;c[r]=WaveSurfer.create({container:"#waveform"+r,waveColor:"green",progressColor:"purple"}),c[r].load(CONSTANTS.API_BASE_URL+"/audio/"+o.tracks[e].file_url),o.loadedTracks.push({track_id:r,trim_amount:0,user_id:o.tracks[e].user.id}),console.log(o.loadedTracks)}o.showTracks=!0}},o.playPause=function(e){c[e].isPlaying()||(o.savedTime[e]=c[e].getCurrentTime(),console.log(o.savedTime)),c[e].playPause(),c[e].zoom(50)},o.trim=function(e){for(var r=c[e].getCurrentTime(),t=o.loadedTracks.length-1;t>=0;t--)o.loadedTracks[t].track_id===e&&(o.loadedTracks[t].trim_amount=r,o.trimAmounts[e]=Math.round(100*r)/100)},o.playPauseAll=function(){for(var e=o.loadedTracks.length-1;e>=0;e--){var r=o.loadedTracks[e].track_id;c[r].isPlaying()||(o.savedTime[r]=c[r].getCurrentTime()),c[r].playPause(),c[r].zoom(50)}},o.toPrevious=function(){for(var e=o.loadedTracks.length-1;e>=0;e--){var r=o.loadedTracks[e].track_id,t=o.savedTime[r],n=c[r].getDuration(),a=t/n;c[r].seekAndCenter(a)}},o.toStart=function(e){c[e].seekAndCenter(0)},o.save=function(){$("#processing_modal").modal(),$("#processing_modal").modal("open"),i.mergeTracks(o.loadedTracks).then(function(e){$("#processing_modal").modal("close"),t.go("merged")},function(e){console.log(e)})},n()}]),app.controller("mergedController",["$scope","mergedService","filterService",function(e,r,t){function n(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),n=t.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(r))return a.substring(r.length,a.length)}return""}function o(){r.getTracks().then(function(e){s.mergedTracks=e.data,s.filteredTracks=s.mergedTracks,i(),angular.forEach(s.mergedTracks,function(e,r){newTrack=new Audio(CONSTANTS.PUBLIC_BASE_URL+"/audio/"+e.file_url),s.mergedTrackAudio[e.id]=newTrack});for(var r=s.mergedTracks.length-1;r>=0;r--)console.log(s.mergedTracks[r]),s.voteCountPerTrack[s.mergedTracks[r].id]=s.mergedTracks[r].votes.length},function(e){console.log(e)})}function a(){null!=d&&r.getUserVotes(d).then(function(e){console.log(e),s.votedtracks=e.data;for(var r=s.votedtracks.length-1;r>=0;r--)s.votedTrackArray.push(s.votedtracks[r].merged_track_id);console.log(s.votedTrackArray)},function(e){console.log(e)})}function i(){s.filteredTracks=[],angular.forEach(s.mergedTracks,function(e,r){goodSearch=!0,""!=!s.filterData.artist||e.artist.name.match(new RegExp(s.filterData.artist,"i"))||(goodSearch=!1),""!=!s.filterData.title||e.songname.match(new RegExp(s.filterData.title,"i"))||(goodSearch=!1),goodSearch&&s.filteredTracks.push(e)})}function c(){s.mergedTrackAudio=[],s.currentAudioTrackId="",o(),a(),s.filterData=u.mergedFilterData,s.voteCountPerTrack=[],s.coloredHands=[],s.votedTrackArray=[]}var s=this,l=r,u=t,d=null;if(JSON.parse(n("user")).userId)var d=JSON.parse(n("user")).userId;s.play=function(e){""!=s.currentAudioTrackId&&s.pause(s.currentAudioTrackId),s.currentAudioTrackId=e,s.mergedTrackAudio[e].play()},s.pause=function(e){s.mergedTrackAudio[e].pause(),s.currentAudioTrackId=""},s.download=function(e){window.open(CONSTANTS.API_BASE_URL+"/mergedtracks/"+e+"/download","_blank","")},s.upVote=function(e){var r={track_id:e,user_id:d};l.insertVote(r).then(function(r){"OK"==r.data.status?(s.voteCountPerTrack[e]++,s.votedTrackArray.push(e)):console.log("already voted")},function(e){console.log(e)})},e.$watch(function(){return s.filterData},function(){s.filterData&&i()},!0),c()}]),app.controller("profileController",["userService",function(e){function r(){n.getUser().then(function(e){t.username=e.data.username,t.email=e.data.email})}var t=this,n=e,o=document.getElementById("update-profile-spinner"),a={lines:13,length:28,width:12,radius:42,scale:.15,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"89%",left:"25.5%",shadow:!1,hwaccel:!1,position:"absolute"};t.update=function(){var e=new Spinner(a).spin(o);t.loading=!0;var r={username:t.username,email:t.email};n.updateUser(r).then(function(r){e.stop(),t.loading=!1},function(r){e.stop(),t.loading=!1})},r()}]),app.controller("soloController",["$scope","bandService","soloService","instrumentService","filterService",function(e,r,t,n,o){function a(){u.getTracks().then(function(e){s.soloTracks=e.data,s.filteredTracks=s.soloTracks,i(),angular.forEach(s.soloTracks,function(e,r){newTrack=new Audio(CONSTANTS.PUBLIC_BASE_URL+"/audio/"+e.file_url),s.soloTrackAudio[e.id]=newTrack})},function(e){console.log(e)})}function i(){s.filteredTracks=[],angular.forEach(s.soloTracks,function(e,r){goodSearch=!0,""!=!s.filterData.artist||e.artist.name.match(new RegExp(s.filterData.artist,"i"))||(goodSearch=!1),""!=!s.filterData.title||e.songname.match(new RegExp(s.filterData.title,"i"))||(goodSearch=!1),s.filterData[e.instrument_id]||(goodSearch=!1),goodSearch&&s.filteredTracks.push(e)}),0===s.filteredTracks.length?s.showNoResultsFound=!0:s.showNoResultsFound=!1}function c(){s.soloTrackAudio=[],s.currentAudioTrackId="",s.showNoResultsFound=!1,d.getInstruments().then(function(e){s.instruments=e.data},function(e){console.log(e)}),a(),s.filterData=g.soloFilterData,s.trackArray=l.getTrackArray,s.bandTrackIdArray=l.getTrackIdArray,s.trackArrayCount=l.getTrackArrayCount}var s=this,l=r,u=t,d=n,g=o;s.addToBand=function(e){l.addToTrackArray(e),console.log(e)},s.removeFromBand=function(e){l.removeFromTrackArray(e),console.log("Track removed from new band: "+e)},s.play=function(e){""!=s.currentAudioTrackId&&s.pause(s.currentAudioTrackId),s.currentAudioTrackId=e,s.soloTrackAudio[e].play()},s.pause=function(e){s.soloTrackAudio[e].pause(),s.currentAudioTrackId=""},e.$watch(function(){return s.filterData},function(){s.filterData&&i()},!0),c()}]),app.controller("uploadController",["Upload","artistService","instrumentService","soloService","$state",function(e,r,t,n,o){function a(){c.uploaded=!1,c.showform=!1,c.instruments=u.getInstruments().then(function(e){c.instruments=e.data,console.log(e.data)},function(e){console.log(e)}),c.artists=l.getArtists().then(function(e){console.log(e.data),c.artists=e.data},function(e){console.log(e)})}function i(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),n=t.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(r))return a.substring(r.length,a.length)}return""}var c=this,s=n,l=r,u=t,d=document.getElementById("upload-spinner"),g={lines:13,length:28,width:12,radius:42,scale:.3,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"40%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};c.uploadFile=function(r){var t=new Spinner(g).spin(d);c.loading=!0,c.uploaded=!1,c.showform=!0,$("select").material_select(),e.upload({url:CONSTANTS.API_BASE_URL+"/upload",fileFormDataName:"song",sendFieldsAs:"form",data:{song:r}}).then(function(e){c.filename=e.data.name,c.tracklength=e.data.length,t.stop(),c.loading=!1,c.uploaded=!0},function(e){c.loading=!1,t.stop(),c.uploadfailed=!0})},c.save=function(){var e=JSON.parse(i("user")).userId,r={name:c.songname,file_url:c.filename,track_length:c.tracklength,user_id:e,instrument_id:c.instrumentsdropdown,artist_id:c.artistname};s.insertTrack(r).then(function(e){o.go("solo"),console.log(e)},function(e){console.log(e)})},a()}]),app.filter("band",function(){return function(e,r){var t=!1;return angular.forEach(r,function(r,n){r==e&&(t=!0)}),t}}),app.service("artistService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getArtists=function(){var e=CONSTANTS.API_BASE_URL+"/artists";return r(e)}}]),app.service("authService",["$auth","$rootScope","$cookies","$state","userService",function(e,r,t,n,o){function a(e,n,o,a){var c=new Date;c=c.setTime(c.getTime()+1e3*e.expires_in),c=new Date(c);var s={token:e,userId:n,username:o,email:a};i.user=s,t.putObject("user",s,{expires:c}),r.isLoggedIn=!0,"1"==s.isAdmin?r.isAdmin=!0:r.isAdmin=!1}var i=this,c=o;i.isLoggedIn=!1,i.login=function(r){e.login(r).then(function(e){token=e.data.token,id=0,username="",email="",c.getUser().then(function(e){id=e.data.id,username=e.data.username,email=e.data.email,a(token,id,username,email),i.isLoggedIn=!0},function(e){console.log(e),i.isLoggedIn=!1})},function(e){console.log(e),i.isLoggedIn=!1})},i.logout=function(){e.logout().then(function(e){r.isLoggedIn=!1,r.isAdmin=!1,i.user=null,i.isLoggedIn=null,t.remove("user"),n.go("home")},function(e){console.log(e)})},i.register=function(e){var r=CONSTANTS.API_BASE_URL+"/user";return $http.post(r,e)}}]),app.service("bandService",function(){function e(e,r,t){for(var n=0,o=e.length;n<o;n++)if(e[n][t]===r)return n;return-1}function r(){return trackArrayCount++,trackArrayCount}function t(){return trackArrayCount--,trackArrayCount}function n(e){return trackIdArray.push(e),trackIdArray}function o(e){return index=trackIdArray.indexOf(e),index>-1&&trackIdArray.splice(index,1),trackIdArray}var a=this;trackArray=[],trackIdArray=[],trackArrayCount=0,a.getTrackArrayCount=function(){return trackArrayCount},a.getTrackIdArray=function(){return trackIdArray},a.addToTrackArray=function(e){return trackArray.push(e),r(),n(e.id),trackArray},a.removeFromTrackArray=function(r){return index=e(trackArray,r.id,"id"),index>-1&&trackArray.splice(index,1),t(),o(r.id),trackArray},a.getTrackArray=function(){return trackArray},a.testFunction=function(){alert("Test function called from inside service!")}}),app.service("filterService",["instrumentService",function(e){function r(){t.createSoloFilterData(),t.createMergedFilterData()}var t=this,n=e;t.createSoloFilterData=function(){t.soloFilterData={artist:"",title:""},angular.forEach(n.instruments,function(e,r){t.soloFilterData[e.id]=!0})},t.createMergedFilterData=function(){t.mergedFilterData={artist:"",title:""}},r()}]),app.service("instrumentService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getInstruments=function(){var e=CONSTANTS.API_BASE_URL+"/instruments";return r(e)},t.instruments=[{name:"Lead-guitar",id:1},{name:"Rythm-guitar",id:2},{name:"Drum",id:3},{name:"Bass",id:4},{name:"Bass",id:5},{name:"Keys",id:6}]}]),app.service("mergedService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/mergedtracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/mergedtracks/"+e;return r(t)},t.mergeTracks=function(r){return e.post(CONSTANTS.API_BASE_URL+"/mergedtracks/create",r)},t.insertVote=function(r){return e.post(CONSTANTS.API_BASE_URL+"/vote/create",r)},t.download=function(e){var t=CONSTANTS.API_BASE_URL+"/mergedtracks/"+e+"/download";return r(t)},t.getUserVotes=function(e){var t=CONSTANTS.API_BASE_URL+"/votes/"+e;return r(t)}}]),app.service("soloService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/tracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/tracks/"+e;return r(t)},t.insertTrack=function(r){return e.post(CONSTANTS.API_BASE_URL+"/tracks/create",r)}}]),app.service("userService",["$http",function(e){var r=this;r.getUser=function(){return e.get(CONSTANTS.API_BASE_URL+"/user")},r.updateUser=function(r){return e.post(CONSTANTS.API_BASE_URL+"/user",r)}}]),app.directive("dcbBand",["bandService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-band/dcb-band.html",replace:!0,scope:{},controllerAs:"band",controller:["$auth","$scope","$rootScope",function(r,t,n){function o(){a.trackArray=i.getTrackArray,a.bandTrackIdArray=i.getTrackIdArray,a.trackArrayCount=i.getTrackArrayCount}var a=this,i=e;a.removeFromBand=function(e){i.removeFromTrackArray(e),console.log("Track removed from new band: "+e)},o()}]}}]),app.directive("dcbHeader",["bandService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-header/dcb-header.html",replace:!0,scope:{},controllerAs:"head",controller:["$scope","userService","authService","$auth","$rootScope",function(r,t,n,o,a){function i(){c.trackArray=u.getTrackArray,c.trackArrayCount=u.getTrackArrayCount,o.isAuthenticated()&&s.getUser().then(function(e){a.username=e.data.username})}var c=this,s=t,l=n,u=e;c.showLogin=function(){$("#login_modal").modal(),$("#login_modal").modal("open")},c.logout=function(){l.logout()},c.showRegister=function(){$("#register_modal").modal(),$("#register_modal").modal("open")},c.showBand=function(){$("#band_modal").modal(),$("#band_modal").modal("open")},c.isAuthenticated=function(){return o.isAuthenticated()},i(),r.$watch(function(){return l.user},function(){c.user=l.user})}]}}]),app.directive("dcbLogin",function(){return{restrict:"E",templateUrl:"app/directives/dcb-login/dcb-login.html",replace:!0,scope:{},controllerAs:"login",controller:["$auth","$scope","$rootScope","userService","authService","$cookies",function(e,r,t,n,o,a){var i=this,c=o,s=document.getElementById("login-spinner"),l={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};i.login=function(){var e=new Spinner(l).spin(s);i.loading=!0,console.log(i.loading);var t={email:i.email,password:i.password};c.login(t);r.$watch(function(){return c.isLoggedIn},function(){c.isLoggedIn&&(i.loading=!1,$("#login_modal").modal(),$("#login_modal").modal("close"),e.stop()),c.isLoggedIn||(e.stop(),i.loading=!1)},!0)}}]}}),app.directive("dcbMergeprocessing",function(){return{restrict:"E",templateUrl:"app/directives/dcb-mergeprocessing/dcb-mergeprocessing.html",replace:!0,scope:{},controllerAs:"processing",controller:["$interval",function(e){var r=this,t=document.getElementById("processing-spinner"),n={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"40%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},o=["Tuning instruments...","Adjusting amp settings...","Soundchecking...","Recording...","Mixing sound...","Finishing up..."],a=(new Spinner(n).spin(t),0);e(function(){$("#processing_modal").is(":visible")&&(r.text=o[a],a++,a>=o.length-1&&(a=0))},4e3)}]}}),app.directive("dcbRegister",["userService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-register/dcb-register.html",replace:!0,scope:{},controllerAs:"register",controller:["$auth","$scope","$rootScope","userService","authService",function(e,r,t,n,o){var a=this,i=o,c=document.getElementById("register-spinner"),s={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};a.register=function(){var t=new Spinner(s).spin(c);a.loading=!0;var n={username:a.username,email:a.email,password:a.password};e.signup(n).then(function(e){i.login(n);var o=r.$watch(function(){return i.isLoggedIn},function(){i.isLoggedIn&&(a.loading=!1,$("#register_modal").modal(),$("#register_modal").modal("close"),t.stop(),o()),i.isLoggedIn===!1&&(t.stop(),a.loading=!1,o())},!0)})["catch"](function(e){t.stop(),a.loading=!1,console.log(e)})}}]}}]),app.directive("dcbSticky",["$window",function(e){var r=angular.element(e);return{restrict:"A",link:function(e,t,n){var o=n.dcbSticky,a=t.offset().top;r.on("scroll",function(e){r.scrollTop()>=a?t.addClass(o):t.removeClass(o)})}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsInJvdXRlcy5qcyIsImJhbmRDb250cm9sbGVyLmpzIiwiaG9tZUNvbnRyb2xsZXIuanMiLCJtZXJnZUNvbnRyb2xsZXIuanMiLCJtZXJnZWRDb250cm9sbGVyLmpzIiwicHJvZmlsZUNvbnRyb2xsZXIuanMiLCJzb2xvQ29udHJvbGxlci5qcyIsInVwbG9hZENvbnRyb2xsZXIuanMiLCJiYW5kRmlsdGVyLmpzIiwiYXJ0aXN0U2VydmljZS5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiYmFuZFNlcnZpY2UuanMiLCJmaWx0ZXJTZXJ2aWNlLmpzIiwiaW5zdHJ1bWVudFNlcnZpY2UuanMiLCJtZXJnZWRTZXJ2aWNlLmpzIiwic29sb1NlcnZpY2UuanMiLCJ1c2VyU2VydmljZS5qcyIsImRjYi1iYW5kL2RjYi1iYW5kLmpzIiwiZGNiLWhlYWRlci9kY2ItaGVhZGVyLmpzIiwiZGNiLWxvZ2luL2RjYi1sb2dpbi5qcyIsImRjYi1tZXJnZXByb2Nlc3NpbmcvZGNiLW1lcmdlcHJvY2Vzc2luZy5qcyIsImRjYi1yZWdpc3Rlci9kY2ItcmVnaXN0ZXIuanMiLCJkY2Itc3RpY2t5L2RjYi1zdGlja3kuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsIkNPTlNUQU5UUyIsIlBVQkxJQ19CQVNFX1VSTCIsIkFQSV9CQVNFX1VSTCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGF1dGhQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJsb2dpblVybCIsInNpZ251cFVybCIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiZGF0YSIsInJlcXVpcmVzTG9nZ2VkSW4iLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJGF1dGgiLCIkc3RhdGUiLCJpc0F1dGhvcml6ZWQiLCJ0b1N0YXRlIiwiaXNBdXRoZW50aWNhdGVkIiwicmVkaXJlY3RTdGF0ZSIsIiRvbiIsImUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJuZXh0IiwiaHJlZiIsInJlcGxhY2UiLCJwYXRoIiwiY29uc29sZSIsImxvZyIsImJhbmRTZXJ2aWNlIiwiX2luaXQiLCJ2bSIsInRyYWNrQXJyYXkiLCJiYW5kU3ZjIiwiZ2V0VHJhY2tBcnJheSIsInRoaXMiLCJpbnN0cnVtZW50U2VydmljZSIsImZpbHRlclNlcnZpY2UiLCJmaWx0ZXJEYXRhIiwiZmx0U3ZjIiwic29sb0ZpbHRlckRhdGEiLCJtZXJnZWRTZXJ2aWNlIiwidHJhY2tzIiwic2hvd1RyYWNrcyIsInRoZXJlQXJlVHJhY2tzIiwibG9hZGVkVHJhY2tzIiwic2F2ZWRUaW1lIiwidHJpbUFtb3VudHMiLCJsZW5ndGgiLCJtZXJnZWRTdmMiLCJ3YXZlc3VyZmVyIiwibG9hZCIsImkiLCJ0cmFja19pZCIsImlkIiwiV2F2ZVN1cmZlciIsImNyZWF0ZSIsImNvbnRhaW5lciIsIndhdmVDb2xvciIsInByb2dyZXNzQ29sb3IiLCJmaWxlX3VybCIsInB1c2giLCJ0cmltX2Ftb3VudCIsInVzZXJfaWQiLCJ1c2VyIiwicGxheVBhdXNlIiwiaXNQbGF5aW5nIiwiZ2V0Q3VycmVudFRpbWUiLCJ6b29tIiwidHJpbSIsInRpbWVUb1RyaW0iLCJNYXRoIiwicm91bmQiLCJwbGF5UGF1c2VBbGwiLCJ0b1ByZXZpb3VzIiwicHJldmlvdXNUaW1lIiwidG90YWxUaW1lIiwiZ2V0RHVyYXRpb24iLCJwcm9ncmVzcyIsInNlZWtBbmRDZW50ZXIiLCJ0b1N0YXJ0Iiwic2F2ZSIsIiQiLCJtb2RhbCIsIm1lcmdlVHJhY2tzIiwidGhlbiIsImdvIiwiZXJyb3IiLCIkc2NvcGUiLCJnZXRDb29raWUiLCJjbmFtZSIsIm5hbWUiLCJkZWNvZGVkQ29va2llIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZG9jdW1lbnQiLCJjb29raWUiLCJjYSIsInNwbGl0IiwiYyIsImNoYXJBdCIsInN1YnN0cmluZyIsImluZGV4T2YiLCJnZXRNZXJnZWRUcmFja3MiLCJnZXRUcmFja3MiLCJtZXJnZWRUcmFja3MiLCJmaWx0ZXJlZFRyYWNrcyIsImZpbHRlciIsImZvckVhY2giLCJ0cmFjayIsImtleSIsIm5ld1RyYWNrIiwiQXVkaW8iLCJtZXJnZWRUcmFja0F1ZGlvIiwidm90ZUNvdW50UGVyVHJhY2siLCJ2b3RlcyIsImdldFVzZXJWb3RlcyIsInZvdGVkdHJhY2tzIiwidm90ZWRUcmFja0FycmF5IiwibWVyZ2VkX3RyYWNrX2lkIiwiZ29vZFNlYXJjaCIsImFydGlzdCIsIm1hdGNoIiwiUmVnRXhwIiwidGl0bGUiLCJzb25nbmFtZSIsImN1cnJlbnRBdWRpb1RyYWNrSWQiLCJtZXJnZWRGaWx0ZXJEYXRhIiwiY29sb3JlZEhhbmRzIiwibWdkU3ZjIiwiSlNPTiIsInBhcnNlIiwidXNlcklkIiwicGxheSIsInRyYWNrSWQiLCJwYXVzZSIsImRvd25sb2FkIiwid2luZG93Iiwib3BlbiIsInVwVm90ZSIsImluc2VydFZvdGUiLCJzdGF0dXMiLCIkd2F0Y2giLCJ1c2VyU2VydmljZSIsInVzZXJTdmMiLCJnZXRVc2VyIiwidXNlcm5hbWUiLCJlbWFpbCIsInRhcmdldCIsImdldEVsZW1lbnRCeUlkIiwib3B0cyIsImxpbmVzIiwid2lkdGgiLCJyYWRpdXMiLCJzY2FsZSIsImNvcm5lcnMiLCJjb2xvciIsIm9wYWNpdHkiLCJyb3RhdGUiLCJkaXJlY3Rpb24iLCJzcGVlZCIsInRyYWlsIiwiZnBzIiwiekluZGV4IiwiY2xhc3NOYW1lIiwidG9wIiwibGVmdCIsInNoYWRvdyIsImh3YWNjZWwiLCJwb3NpdGlvbiIsInVwZGF0ZSIsInNwaW5uZXIiLCJTcGlubmVyIiwic3BpbiIsImxvYWRpbmciLCJ1c2VyaW5mbyIsInVwZGF0ZVVzZXIiLCJzdG9wIiwic29sb1NlcnZpY2UiLCJnZXRTb2xvVHJhY2tzIiwic29sb1N2YyIsInNvbG9UcmFja3MiLCJzb2xvVHJhY2tBdWRpbyIsImluc3RydW1lbnRfaWQiLCJzaG93Tm9SZXN1bHRzRm91bmQiLCJpbnN0U3ZjIiwiZ2V0SW5zdHJ1bWVudHMiLCJpbnN0cnVtZW50cyIsImJhbmRUcmFja0lkQXJyYXkiLCJnZXRUcmFja0lkQXJyYXkiLCJ0cmFja0FycmF5Q291bnQiLCJnZXRUcmFja0FycmF5Q291bnQiLCJhZGRUb0JhbmQiLCJhZGRUb1RyYWNrQXJyYXkiLCJyZW1vdmVGcm9tQmFuZCIsInJlbW92ZUZyb21UcmFja0FycmF5IiwiVXBsb2FkIiwiYXJ0aXN0U2VydmljZSIsInVwbG9hZGVkIiwic2hvd2Zvcm0iLCJpbnN0cnVtZW50U3ZjIiwiYXJ0aXN0cyIsImFydGlzdFN2YyIsImdldEFydGlzdHMiLCJ1cGxvYWRGaWxlIiwiZmlsZSIsIm1hdGVyaWFsX3NlbGVjdCIsInVwbG9hZCIsImZpbGVGb3JtRGF0YU5hbWUiLCJzZW5kRmllbGRzQXMiLCJzb25nIiwicmVzcCIsImZpbGVuYW1lIiwidHJhY2tsZW5ndGgiLCJ1cGxvYWRmYWlsZWQiLCJ0cmFja19sZW5ndGgiLCJpbnN0cnVtZW50c2Ryb3Bkb3duIiwiYXJ0aXN0X2lkIiwiYXJ0aXN0bmFtZSIsImluc2VydFRyYWNrIiwibGlzdCIsInJldHVyblZhbHVlIiwiaW5kZXgiLCJzZXJ2aWNlIiwiJGh0dHAiLCJnZXREYXRhIiwib3B0aW9ucyIsImdldCIsInN2YyIsIiRjb29raWVzIiwibG9naW4iLCJ0b2tlbiIsImV4cGlyYXRpb25UaW1lIiwiRGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwidXNlckRhdGEiLCJwdXRPYmplY3QiLCJleHBpcmVzIiwiaXNMb2dnZWRJbiIsImlzQWRtaW4iLCJjcmVkZW50aWFscyIsImxvZ291dCIsInJlbW92ZSIsInJlZ2lzdGVyIiwicG9zdCIsImFycmF5T2JqZWN0SW5kZXhPZiIsIm15QXJyYXkiLCJzZWFyY2hUZXJtIiwicHJvcGVydHkiLCJsZW4iLCJpbmNyZW1lbnRUcmFja0FycmF5Q291bnQiLCJkZWNyZW1lbnRUcmFja0FycmF5Q291bnQiLCJhZGRUb1RyYWNrSWRBcnJheSIsInRyYWNrSWRBcnJheSIsInJlbW92ZUZyb21UcmFja0lkQXJyYXkiLCJzcGxpY2UiLCJ0ZXN0RnVuY3Rpb24iLCJhbGVydCIsImNyZWF0ZVNvbG9GaWx0ZXJEYXRhIiwiY3JlYXRlTWVyZ2VkRmlsdGVyRGF0YSIsInZhbHVlIiwiZ2V0VHJhY2tCeUlkIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJzY29wZSIsImNvbnRyb2xsZXJBcyIsImF1dGhTZXJ2aWNlIiwiYXV0aFN2YyIsInNob3dMb2dpbiIsInNob3dSZWdpc3RlciIsInNob3dCYW5kIiwicGFzc3dvcmQiLCIkaW50ZXJ2YWwiLCJ0ZXh0QXJyYXkiLCJjdXJyZW50SW5kZXgiLCJpcyIsInRleHQiLCJzaWdudXAiLCJyZXNwb25zZSIsInVucmVnaXN0ZXIiLCIkd2luZG93IiwiJHdpbiIsImVsZW1lbnQiLCJsaW5rIiwiYXR0cnMiLCJ0b3BDbGFzcyIsImRjYlN0aWNreSIsIm9mZnNldFRvcCIsIm9mZnNldCIsIm9uIiwic2Nyb2xsVG9wIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsS0FBTUMsUUFBUUMsT0FBTyxPQUN2QixZQUNBLGFBQ0EsWUFDQSxpQkNKRUMsVUFBYSxXQUVoQixHQUFJRCxLQUtKLE9BSEdBLEdBQU9FLGdCQUFrQiwwQkFDNUJGLEVBQU9HLGFBQWUsOEJBRWZILElDUFJGLEtBQUlNLFFBQUEsaUJBQUEscUJBQUEsZ0JBQUEsZ0JBQU8sU0FBU0MsRUFBZ0JDLEVBQW9CQyxFQUFlQyxHQUVyRUQsRUFBY0UsU0FBY1IsVUFBVUUsYUFBZSxTQUNyREksRUFBY0csVUFBY1QsVUFBVUUsYUFBZSxZQUNyREcsRUFBbUJLLFVBQVUsS0FFN0JOLEVBQ0dPLE1BQU0sUUFDTEMsSUFBSyxJQUNMQyxZQUFhLHNCQUNiQyxXQUFZLDJCQUVkSCxNQUFNLFFBQ0pDLElBQUssUUFDTEMsWUFBYSxzQkFDYkMsV0FBWSwyQkFFYkgsTUFBTSxVQUNMQyxJQUFLLFVBQ0xDLFlBQWEsd0JBQ2JDLFdBQVksK0JB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aU0sR0FFaENYLEVBQVF0QyxNQUFNckssRUFHZCxJQUFJdU4sR0FBYS9MLEVBQU9xRCxPQUN2QixXQUFjLE1BQU84SCxHQUFRN0IsWUFDN0IsV0FFSTZCLEVBQVE3QixhQUVWL00sRUFBRzhJLFNBQVUsRUFDUDNGLEVBQUUsbUJBQW1CQyxRQUMzQkQsRUFBRSxtQkFBbUJDLE1BQU0sU0FDckJ1RixFQUFRTSxPQUNSdUcsS0FFSlosRUFBUTdCLGNBQWUsSUFFekJwRSxFQUFRTSxPQUNGakosRUFBRzhJLFNBQVUsRUFDYjBHLE9BRUwsS0F2QkwzUSxTQXlCTyxTQUFTMFEsR0FFYjVHLEVBQVFNLE9BQ1JqSixFQUFHOEksU0FBVSxFQUNabEosUUFBUUMsSUFBSTBQLFlDN0VwQmpTLElBQUlpUixVQUFVLGFBQUEsVUFBYSxTQUFTa0IsR0FDbkMsR0FBSUMsR0FBT25TLFFBQVFvUyxRQUFRRixFQUUzQixRQUNDakIsU0FBVSxJQUNWb0IsS0FBTSxTQUFVbkIsRUFBT2tCLEVBQVNFLEdBQzFCLEdBQUlDLEdBQVdELEVBQU1FLFVBQ2pCQyxFQUFZTCxFQUFRTSxTQUFTNUgsR0FFakNxSCxHQUFLUSxHQUFHLFNBQVUsU0FBVTlRLEdBQ3RCc1EsRUFBS1MsYUFBZUgsRUFDdEJMLEVBQVFTLFNBQVNOLEdBRWpCSCxFQUFRVSxZQUFZUCIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcblx0XHRcInVpLnJvdXRlclwiLFxuXHRcdFwic2F0ZWxsaXplclwiLFxuXHRcdFwibmdDb29raWVzXCIsXG5cdFx0XCJuZ0ZpbGVVcGxvYWRcIlxuXHRdKTsiLCJ2YXIgQ09OU1RBTlRTID0gKGZ1bmN0aW9uICgpIHtcblx0XG5cdHZhciBtb2R1bGUgPSB7fTtcblxuICAgIG1vZHVsZS5QVUJMSUNfQkFTRV9VUkwgPSBcImh0dHA6Ly9kaXNjb3ZlcmJhbmQuYXBpXCI7XG5cdG1vZHVsZS5BUElfQkFTRV9VUkwgPSBcImh0dHA6Ly9kaXNjb3ZlcmJhbmQuYXBpL2FwaVwiO1xuXG5cdHJldHVybiBtb2R1bGU7XG59KCkpOyIsImFwcC5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGF1dGhQcm92aWRlciwgJGh0dHBQcm92aWRlcikge1xuICBcbiAgJGF1dGhQcm92aWRlci5sb2dpblVybCAgICA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyAnL2xvZ2luJztcbiAgJGF1dGhQcm92aWRlci5zaWdudXBVcmwgICA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyAnL3JlZ2lzdGVyJztcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XG5cbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICB1cmw6IFwiL1wiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL2hvbWUuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJob21lQ29udHJvbGxlciBhcyBob21lXCJcbiAgICB9KVxuICBcdC5zdGF0ZSgnc29sbycsIHtcbiAgICAgIHVybDogXCIvc29sb1wiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL3NvbG8uaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJzb2xvQ29udHJvbGxlciBhcyBzb2xvXCJcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVyZ2VkJywge1xuICAgICAgdXJsOiBcIi9tZXJnZWRcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9tZXJnZWQuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJtZXJnZWRDb250cm9sbGVyIGFzIG1lcmdlZFwiXG4gICAgfSlcbiAgICAuc3RhdGUoJ2JhbmQnLCB7XG4gICAgICB1cmw6IFwiL2JhbmRcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9iYW5kLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXI6IFwiYmFuZENvbnRyb2xsZXIgYXMgYmFuZFwiXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lcmdlJywge1xuICAgICAgdXJsOiBcIi9tZXJnZVwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL21lcmdlLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXI6IFwibWVyZ2VDb250cm9sbGVyIGFzIG1lcmdlXCJcbiAgICB9KVxuICAgIC5zdGF0ZSgncHJvZmlsZScsIHtcbiAgICAgIHVybDogXCIvcHJvZmlsZVwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL3Byb2ZpbGUuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJwcm9maWxlQ29udHJvbGxlciBhcyBwcm9maWxlXCIsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHJlcXVpcmVzTG9nZ2VkSW46IHRydWVcbiAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgndXBsb2FkJywge1xuICAgICAgdXJsOiBcIi91cGxvYWRcIixcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy91cGxvYWQuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJ1cGxvYWRDb250cm9sbGVyIGFzIHVwbG9hZFwiLFxuICAgICAgZGF0YToge1xuICAgICAgICByZXF1aXJlc0xvZ2dlZEluOiB0cnVlXG4gICAgICB9XG4gICAgfSlcbn0pXG4ucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkbG9jYXRpb24sICRhdXRoLCAkc3RhdGUpIHsgXG5cbiAgLy9HbG9iYWxzXG4gIHZhciByZWRpcmVjdFN0YXRlID0gXCIvXCI7XG5cbiAgLy9SZWRpcmVjdCByb3V0ZXMgaWYgbm90IGFkbWluXG4gICRyb290U2NvcGUuJG9uKFwiJHN0YXRlQ2hhbmdlU3RhcnRcIiwgZnVuY3Rpb24gKGUsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIHtcblxuICAgIHZhciBuZXh0ID0gdG9TdGF0ZS51cmw7XG5cbiAgICAvL1N0cmlwIGhhc2hiYW5ncyB1c2luZyBSZWdFeFxuICAgIGlmKHRvUGFyYW1zKSBcbiAgICB7XG4gICAgICBuZXh0ID0gJHN0YXRlLmhyZWYodG9TdGF0ZSwgdG9QYXJhbXMpO1xuICAgICAgbmV4dCA9IG5leHQucmVwbGFjZShcIiNcIiwgXCJcIik7XG4gICAgfVxuXG4gICAgaWYgKGlzQXV0aG9yaXplZCh0b1N0YXRlKSlcbiAgICB7XG4gICAgICAkbG9jYXRpb24ucGF0aChuZXh0KTtcbiAgICB9XG4gICAgZWxzZVxuICAgIHtcbiAgICAgIGNvbnNvbGUubG9nKFwibm90TG9nZ2VkSW5cIik7XG4gICAgICAkbG9jYXRpb24ucGF0aChyZWRpcmVjdFN0YXRlKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vUHJpdmF0ZSBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gaXNBdXRob3JpemVkICh0b1N0YXRlKSB7XG5cbiAgICBpZih0b1N0YXRlLmRhdGEgJiYgdG9TdGF0ZS5kYXRhLnJlcXVpcmVzTG9nZ2VkSW4pXG4gICAgICByZXR1cm4gJGF1dGguaXNBdXRoZW50aWNhdGVkKCk7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIHRydWU7XG4gIH1cbn0pOyIsImFwcC5jb250cm9sbGVyKFwiYmFuZENvbnRyb2xsZXJcIiwgZnVuY3Rpb24oYmFuZFNlcnZpY2UpIHtcblx0XG5cdHZhciB2bSBcdFx0PSB0aGlzO1xuXHR2YXIgYmFuZFN2YyA9IGJhbmRTZXJ2aWNlO1xuXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xuXHRcdHZtLnRyYWNrQXJyYXkgPSBiYW5kU3ZjLmdldFRyYWNrQXJyYXk7XG5cdH1cblxuXHRfaW5pdCgpO1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoXCJob21lQ29udHJvbGxlclwiLCBmdW5jdGlvbihpbnN0cnVtZW50U2VydmljZSwgZmlsdGVyU2VydmljZSkge1xuXHRcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGluc3RTdmMgPSBpbnN0cnVtZW50U2VydmljZTtcblx0dmFyIGZsdFN2YyA9IGZpbHRlclNlcnZpY2U7XG5cblx0ZnVuY3Rpb24gX2luaXQoKSB7XG5cdFx0dm0uZmlsdGVyRGF0YSA9IGZsdFN2Yy5zb2xvRmlsdGVyRGF0YTtcblx0fVxuXG5cdF9pbml0KCk7XG59KTsiLCJhcHAuY29udHJvbGxlcihcIm1lcmdlQ29udHJvbGxlclwiLCBmdW5jdGlvbihiYW5kU2VydmljZSwgbWVyZ2VkU2VydmljZSwgJHN0YXRlKSB7XG5cdHZhciB2bSBcdFx0XHQ9IHRoaXM7XG5cdHZhciBiYW5kU3ZjIFx0PSBiYW5kU2VydmljZTtcblx0dmFyIG1lcmdlZFN2YyBcdD0gbWVyZ2VkU2VydmljZTtcblx0dmFyIHdhdmVzdXJmZXIgXHQ9IFtdO1xuXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xuXHRcdHZtLnRyYWNrcyBcdFx0XHQ9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheSgpO1xuXHRcdHZtLnNob3dUcmFja3MgXHRcdD0gZmFsc2U7XG5cdFx0dm0udGhlcmVBcmVUcmFja3NcdD0gZmFsc2U7XG5cdFx0dm0ubG9hZGVkVHJhY2tzIFx0PSBbXTtcblx0XHR2bS5zYXZlZFRpbWUgXHRcdD0gW107XG5cdFx0dm0udHJpbUFtb3VudHMgIFx0PSBbXTtcblxuXHRcdGlmKHZtLnRyYWNrcy5sZW5ndGggPiAwKVxuXHRcdHtcblx0XHRcdHZtLnRoZXJlQXJlVHJhY2tzXHQ9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0dm0ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKHZtLnRoZXJlQXJlVHJhY2tzKVxuXHRcdHtcblx0XHRcdGZvciAodmFyIGkgPSB2bS50cmFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0dmFyIHRyYWNrX2lkID0gdm0udHJhY2tzW2ldLmlkO1xuXG5cdFx0XHRcdHdhdmVzdXJmZXJbdHJhY2tfaWRdID0gV2F2ZVN1cmZlci5jcmVhdGUoe1xuXHRcdCAgICBcdFx0Y29udGFpbmVyOiAnI3dhdmVmb3JtJyt0cmFja19pZCxcblx0XHQgICAgXHRcdHdhdmVDb2xvcjogJ2dyZWVuJyxcblx0XHQgICAgXHRcdHByb2dyZXNzQ29sb3I6ICdwdXJwbGUnXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHdhdmVzdXJmZXJbdHJhY2tfaWRdLmxvYWQoQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArICcvYXVkaW8vJyArIHZtLnRyYWNrc1tpXS5maWxlX3VybCk7XG5cblx0XHRcdFx0dm0ubG9hZGVkVHJhY2tzLnB1c2goe1xuXHQgICAgICAgICAgICBcdHRyYWNrX2lkOiB0cmFja19pZCxcblx0ICAgICAgICAgICAgXHR0cmltX2Ftb3VudDogMCxcblx0ICAgICAgICAgICAgXHR1c2VyX2lkOiB2bS50cmFja3NbaV0udXNlci5pZFxuXHQgICAgICAgIFx0fSk7XG5cblx0ICAgICAgICBcdGNvbnNvbGUubG9nKHZtLmxvYWRlZFRyYWNrcyk7XG5cdFx0XHR9XG5cdFx0XHR2bS5zaG93VHJhY2tzID0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHR2bS5wbGF5UGF1c2UgPSBmdW5jdGlvbihpZCkge1xuXHRcdGlmKCF3YXZlc3VyZmVyW2lkXS5pc1BsYXlpbmcoKSlcblx0XHR7XG5cdFx0XHR2bS5zYXZlZFRpbWVbaWRdID0gd2F2ZXN1cmZlcltpZF0uZ2V0Q3VycmVudFRpbWUoKTtcblx0XHRcdGNvbnNvbGUubG9nKHZtLnNhdmVkVGltZSk7XG5cdFx0fVxuXG5cdFx0d2F2ZXN1cmZlcltpZF0ucGxheVBhdXNlKCk7XG5cdFx0d2F2ZXN1cmZlcltpZF0uem9vbSg1MCk7XG5cdH1cblxuXHR2bS50cmltID0gZnVuY3Rpb24oaWQpIHtcblx0XHR2YXIgdGltZVRvVHJpbSA9IHdhdmVzdXJmZXJbaWRdLmdldEN1cnJlbnRUaW1lKCk7XG5cdFx0Zm9yICh2YXIgaSA9IHZtLmxvYWRlZFRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0aWYodm0ubG9hZGVkVHJhY2tzW2ldLnRyYWNrX2lkID09PSBpZClcblx0XHRcdHtcblx0XHRcdFx0dm0ubG9hZGVkVHJhY2tzW2ldLnRyaW1fYW1vdW50IFx0PSB0aW1lVG9UcmltO1xuXHRcdFx0XHR2bS50cmltQW1vdW50c1tpZF0gXHRcdFx0XHQ9IE1hdGgucm91bmQodGltZVRvVHJpbSAqIDEwMCkgLyAxMDA7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblxuXHR2bS5wbGF5UGF1c2VBbGwgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IgKHZhciBpID0gdm0ubG9hZGVkVHJhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHR2YXIgaWQgPSB2bS5sb2FkZWRUcmFja3NbaV0udHJhY2tfaWQ7XG5cdFx0XHRpZighd2F2ZXN1cmZlcltpZF0uaXNQbGF5aW5nKCkpXG5cdFx0XHR7XG5cdFx0XHRcdHZtLnNhdmVkVGltZVtpZF0gPSB3YXZlc3VyZmVyW2lkXS5nZXRDdXJyZW50VGltZSgpO1xuXHRcdFx0fVxuXG4gICAgXHRcdHdhdmVzdXJmZXJbaWRdLnBsYXlQYXVzZSgpO1xuICAgIFx0XHR3YXZlc3VyZmVyW2lkXS56b29tKDUwKTtcblx0XHR9XG5cdH1cblxuXHR2bS50b1ByZXZpb3VzID0gZnVuY3Rpb24oKSB7XG5cdFx0Zm9yICh2YXIgaSA9IHZtLmxvYWRlZFRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0dmFyIGlkID0gdm0ubG9hZGVkVHJhY2tzW2ldLnRyYWNrX2lkO1xuXHRcdFx0dmFyIHByZXZpb3VzVGltZSBcdD0gdm0uc2F2ZWRUaW1lW2lkXTtcblx0XHRcdHZhciB0b3RhbFRpbWVcdFx0PSB3YXZlc3VyZmVyW2lkXS5nZXREdXJhdGlvbigpO1xuXHRcdFx0dmFyIHByb2dyZXNzID0gcHJldmlvdXNUaW1lIC8gdG90YWxUaW1lO1xuXHRcdFx0d2F2ZXN1cmZlcltpZF0uc2Vla0FuZENlbnRlcihwcm9ncmVzcyk7XG5cdFx0fVxuXHR9XG5cblx0dm0udG9TdGFydCA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0d2F2ZXN1cmZlcltpZF0uc2Vla0FuZENlbnRlcigwKTtcblx0fVxuXG5cdFxuXHR2bS5zYXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0JCgnI3Byb2Nlc3NpbmdfbW9kYWwnKS5tb2RhbCgpO1xuXHRcdCQoJyNwcm9jZXNzaW5nX21vZGFsJykubW9kYWwoJ29wZW4nKTtcblx0XHRcblx0XHRtZXJnZWRTdmMubWVyZ2VUcmFja3Modm0ubG9hZGVkVHJhY2tzKVxuXHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpXG4gICAgICAgIHtcbiAgICAgICAgXHQkKCcjcHJvY2Vzc2luZ19tb2RhbCcpLm1vZGFsKCdjbG9zZScpO1xuICAgICAgICBcdCRzdGF0ZS5nbyhcIm1lcmdlZFwiKTtcblxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcilcbiAgICAgICAge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfSk7XG5cdH1cblxuXHRfaW5pdCgpO1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoXCJtZXJnZWRDb250cm9sbGVyXCIsIGZ1bmN0aW9uKCRzY29wZSwgbWVyZ2VkU2VydmljZSwgZmlsdGVyU2VydmljZSkge1xuXHRcblx0dmFyIHZtICBcdFx0PSB0aGlzO1xuXHR2YXIgbWdkU3ZjIFx0XHQ9IG1lcmdlZFNlcnZpY2U7XG5cdHZhciBmbHRTdmMgXHRcdD0gZmlsdGVyU2VydmljZTtcblx0dmFyIHVzZXJfaWRcdFx0PSBudWxsO1xuXG5cdGlmKEpTT04ucGFyc2UoZ2V0Q29va2llKCd1c2VyJykpLnVzZXJJZClcblx0e1xuXHRcdHZhciB1c2VyX2lkIFx0PSBKU09OLnBhcnNlKGdldENvb2tpZSgndXNlcicpKS51c2VySWQ7XG5cdH1cblx0XG5cblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xuXHRmdW5jdGlvbiBwbGF5QXVkaW9GaWxlKHRyYWNrKVxuXHR7XG5cdFx0dHJhY2sucGxheSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0Q29va2llKGNuYW1lKSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSBjbmFtZSArIFwiPVwiO1xuICAgICAgICAgIHZhciBkZWNvZGVkQ29va2llID0gZGVjb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmNvb2tpZSk7XG4gICAgICAgICAgdmFyIGNhID0gZGVjb2RlZENvb2tpZS5zcGxpdCgnOycpO1xuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIHZhciBjID0gY2FbaV07XG4gICAgICAgICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHtcbiAgICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWUpID09IDApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuXG5cdGZ1bmN0aW9uIGdldE1lcmdlZFRyYWNrcygpIHtcblx0XHRtZXJnZWRTZXJ2aWNlLmdldFRyYWNrcygpXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRcdHZtLm1lcmdlZFRyYWNrcyA9IGRhdGEuZGF0YTtcblx0XHRcdFx0dm0uZmlsdGVyZWRUcmFja3MgPSB2bS5tZXJnZWRUcmFja3M7XG5cdFx0XHRcdGZpbHRlcigpO1xuXG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5tZXJnZWRUcmFja3MsIGZ1bmN0aW9uKHRyYWNrLCBrZXkpIHtcblx0XHRcdFx0XHRuZXdUcmFjayA9IG5ldyBBdWRpbyhDT05TVEFOVFMuUFVCTElDX0JBU0VfVVJMICsgJy9hdWRpby8nICsgdHJhY2suZmlsZV91cmwpO1xuXHRcdFx0XHRcdHZtLm1lcmdlZFRyYWNrQXVkaW9bdHJhY2suaWRdID0gbmV3VHJhY2s7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGZvciAodmFyIGkgPSB2bS5tZXJnZWRUcmFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyh2bS5tZXJnZWRUcmFja3NbaV0pO1xuXHRcdFx0XHRcdHZtLnZvdGVDb3VudFBlclRyYWNrW3ZtLm1lcmdlZFRyYWNrc1tpXS5pZF0gPSB2bS5tZXJnZWRUcmFja3NbaV0udm90ZXMubGVuZ3RoO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VXNlclZvdGVzKCkge1xuXHRcdGlmKHVzZXJfaWQgIT0gbnVsbClcblx0XHR7XG5cdFx0XHRtZXJnZWRTZXJ2aWNlLmdldFVzZXJWb3Rlcyh1c2VyX2lkKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcblx0XHRcdFx0dm0udm90ZWR0cmFja3MgPSBkYXRhLmRhdGE7XG5cdFx0XHRcdGZvciAodmFyIGkgPSB2bS52b3RlZHRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdHZtLnZvdGVkVHJhY2tBcnJheS5wdXNoKHZtLnZvdGVkdHJhY2tzW2ldLm1lcmdlZF90cmFja19pZCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc29sZS5sb2codm0udm90ZWRUcmFja0FycmF5KTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZmlsdGVyKCkge1xuXHRcdFxuXHRcdHZtLmZpbHRlcmVkVHJhY2tzID0gW107XG5cblx0XHRhbmd1bGFyLmZvckVhY2godm0ubWVyZ2VkVHJhY2tzLCBmdW5jdGlvbih0cmFjaywga2V5KSB7XG5cblx0XHRcdGdvb2RTZWFyY2ggPSB0cnVlO1xuXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS5hcnRpc3QgPT0gXCJcIiAmJiAhdHJhY2suYXJ0aXN0Lm5hbWUubWF0Y2gobmV3IFJlZ0V4cCh2bS5maWx0ZXJEYXRhLmFydGlzdCwgXCJpXCIpKSlcblx0XHRcdHtcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS50aXRsZSA9PSBcIlwiICYmICF0cmFjay5zb25nbmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEudGl0bGUsIFwiaVwiKSkpXG5cdFx0XHR7XG5cdFx0XHRcdGdvb2RTZWFyY2ggPSBmYWxzZTtcblx0XHRcdH1cblxuXG5cdFx0XHRpZihnb29kU2VhcmNoKVxuXHRcdFx0e1xuXHRcdFx0XHR2bS5maWx0ZXJlZFRyYWNrcy5wdXNoKHRyYWNrKTtcblx0XHRcdH1cblx0XHR9KVxuXHR9XG5cblx0ZnVuY3Rpb24gX2luaXQoKSB7XG5cdFx0dm0ubWVyZ2VkVHJhY2tBdWRpbyBcdD0gW107XG5cdFx0dm0uY3VycmVudEF1ZGlvVHJhY2tJZCBcdD0gXCJcIjtcblx0XHRnZXRNZXJnZWRUcmFja3MoKTtcblx0XHRnZXRVc2VyVm90ZXMoKTtcblx0XHR2bS5maWx0ZXJEYXRhIFx0XHRcdD0gZmx0U3ZjLm1lcmdlZEZpbHRlckRhdGE7XG5cdFx0dm0udm90ZUNvdW50UGVyVHJhY2sgXHQ9IFtdO1xuXHRcdHZtLmNvbG9yZWRIYW5kcyBcdFx0PSBbXTtcblx0XHR2bS52b3RlZFRyYWNrQXJyYXkgXHRcdD0gW107XG5cdH1cblxuXHQvL1ZtIGZ1bmN0aW9uc1xuXHR2bS5wbGF5ID0gZnVuY3Rpb24odHJhY2tJZCkge1xuXG5cdFx0aWYodm0uY3VycmVudEF1ZGlvVHJhY2tJZCAhPSBcIlwiKSB7XG5cdFx0XHR2bS5wYXVzZSh2bS5jdXJyZW50QXVkaW9UcmFja0lkKTtcblx0XHR9XG5cblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkID0gdHJhY2tJZDtcblx0XHR2bS5tZXJnZWRUcmFja0F1ZGlvW3RyYWNrSWRdLnBsYXkoKTtcblx0fVxuXG5cdHZtLnBhdXNlID0gZnVuY3Rpb24odHJhY2tJZCkge1xuXHRcdHZtLm1lcmdlZFRyYWNrQXVkaW9bdHJhY2tJZF0ucGF1c2UoKTtcblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkID0gXCJcIjtcblx0fVxuXG5cdHZtLmRvd25sb2FkID0gZnVuY3Rpb24oaWQpIHtcbiAgICBcdHdpbmRvdy5vcGVuKENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyAnL21lcmdlZHRyYWNrcy8nICsgaWQgKyAnL2Rvd25sb2FkJywgJ19ibGFuaycsICcnKTsgIFxuXHR9XG5cblx0dm0udXBWb3RlID0gZnVuY3Rpb24oaWQpIHtcblx0ICAgIHZhciBkYXRhID0ge1xuICAgICAgICAgICAgdHJhY2tfaWQ6IGlkLFxuICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZFxuXHQgICAgfVxuXG5cdCAgICBtZ2RTdmMuaW5zZXJ0Vm90ZShkYXRhKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKVxuICAgICAgICB7XG4gICAgICAgIFx0aWYoZGF0YS5kYXRhLnN0YXR1cyA9PSBcIk9LXCIpXG4gICAgICAgIFx0e1xuICAgICAgICBcdFx0dm0udm90ZUNvdW50UGVyVHJhY2tbaWRdKys7XG4gICAgICAgIFx0XHR2bS52b3RlZFRyYWNrQXJyYXkucHVzaChpZCk7XG4gICAgICAgIFx0fVxuICAgICAgICBcdGVsc2VcbiAgICAgICAgXHR7XG4gICAgICAgIFx0XHRjb25zb2xlLmxvZygnYWxyZWFkeSB2b3RlZCcpO1xuICAgICAgICBcdH1cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpXG4gICAgICAgIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0pO1xuXHR9XG5cblx0Ly9XYXRjaGVzXG5cdCRzY29wZS4kd2F0Y2goXG5cdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gdm0uZmlsdGVyRGF0YSB9LCBcblx0XHRmdW5jdGlvbiAoKSB7XG5cblx0XHRcdGlmKHZtLmZpbHRlckRhdGEpIFxuXHRcdFx0e1xuXHRcdFx0XHRmaWx0ZXIoKTtcblx0XHRcdH1cblx0XHR9LCB0cnVlKTtcblxuXHRfaW5pdCgpO1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoXCJwcm9maWxlQ29udHJvbGxlclwiLCBmdW5jdGlvbih1c2VyU2VydmljZSkge1xuXHRcblx0dmFyIHZtIFx0XHQ9IHRoaXM7XG5cdHZhciB1c2VyU3ZjID0gdXNlclNlcnZpY2U7XG5cdHZhciB0YXJnZXQgXHQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGUtcHJvZmlsZS1zcGlubmVyJyk7XG5cblx0dmFyIG9wdHMgPSB7XG5cdFx0XHRsaW5lczogMTMgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XG5cdFx0LCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXG5cdFx0LCB3aWR0aDogMTIgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXG5cdFx0LCByYWRpdXM6IDQyIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxuXHRcdCwgc2NhbGU6IDAuMTUgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxuXHRcdCwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxuXHRcdCwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXG5cdFx0LCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXG5cdFx0LCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxuXHRcdCwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2Vcblx0XHQsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXG5cdFx0LCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2Vcblx0XHQsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXG5cdFx0LCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcblx0XHQsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXG5cdFx0LCB0b3A6ICc4OSUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcblx0XHQsIGxlZnQ6ICcyNS41JScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcblx0XHQsIHNoYWRvdzogZmFsc2UgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcblx0XHQsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxuXHRcdCwgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xuXHR9XG5cblx0ZnVuY3Rpb24gX2luaXQoKSB7XG5cdFx0dXNlclN2Yy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0dm0udXNlcm5hbWUgPSBkYXRhLmRhdGEudXNlcm5hbWU7XG5cdFx0XHR2bS5lbWFpbCBcdD0gZGF0YS5kYXRhLmVtYWlsO1xuXHRcdH0pO1xuXHR9XG5cblx0dm0udXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHNwaW5uZXIgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XG5cdCAgICB2bS5sb2FkaW5nIFx0PSB0cnVlO1xuXG5cdFx0dmFyIHVzZXJpbmZvID0ge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHZtLnVzZXJuYW1lLFxuICAgICAgICAgICAgZW1haWw6IHZtLmVtYWlsXG4gICAgICAgIH1cblxuXHRcdHVzZXJTdmMudXBkYXRlVXNlcih1c2VyaW5mbylcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdHNwaW5uZXIuc3RvcCgpO1xuXHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcilcblx0XHRcdHtcblx0XHRcdFx0c3Bpbm5lci5zdG9wKCk7XG5cdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcblx0XHRcdH0pO1xuXHR9XG5cblx0X2luaXQoKTtcbn0pOyIsImFwcC5jb250cm9sbGVyKFwic29sb0NvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCBiYW5kU2VydmljZSwgc29sb1NlcnZpY2UsIGluc3RydW1lbnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XG5cdFxuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgYmFuZFN2YyA9IGJhbmRTZXJ2aWNlO1xuXHR2YXIgc29sb1N2YyA9IHNvbG9TZXJ2aWNlO1xuXHR2YXIgaW5zdFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xuXHR2YXIgZmx0U3ZjID0gZmlsdGVyU2VydmljZTtcblxuXHQvL1ByaXZhdGUgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIHBsYXlBdWRpb0ZpbGUodHJhY2spXG5cdHtcblx0XHR0cmFjay5wbGF5KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRTb2xvVHJhY2tzKClcblx0e1xuXHRcdHNvbG9TdmMuZ2V0VHJhY2tzKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdHZtLnNvbG9UcmFja3MgPSBkYXRhLmRhdGE7XG5cdFx0XHRcdHZtLmZpbHRlcmVkVHJhY2tzID0gdm0uc29sb1RyYWNrcztcblx0XHRcdFx0ZmlsdGVyKCk7XG5cblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLnNvbG9UcmFja3MsIGZ1bmN0aW9uKHRyYWNrLCBrZXkpIHtcblx0XHRcdFx0XHRcdC8vbmV3VHJhY2sgPSBuZXcgQXVkaW8odHJhY2suZmlsZV91cmwpO1xuXHRcdFx0XHRcdFx0bmV3VHJhY2sgPSBuZXcgQXVkaW8oQ09OU1RBTlRTLlBVQkxJQ19CQVNFX1VSTCArICcvYXVkaW8vJyArIHRyYWNrLmZpbGVfdXJsKTtcblx0XHRcdFx0XHRcdHZtLnNvbG9UcmFja0F1ZGlvW3RyYWNrLmlkXSA9IG5ld1RyYWNrO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcilcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBmaWx0ZXIoKVxuXHR7XG5cdFx0dm0uZmlsdGVyZWRUcmFja3MgPSBbXTtcblxuXHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5zb2xvVHJhY2tzLCBmdW5jdGlvbih0cmFjaywga2V5KVxuXHRcdHtcblx0XHRcdGdvb2RTZWFyY2ggPSB0cnVlO1xuXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS5hcnRpc3QgPT0gXCJcIiAmJiAhdHJhY2suYXJ0aXN0Lm5hbWUubWF0Y2gobmV3IFJlZ0V4cCh2bS5maWx0ZXJEYXRhLmFydGlzdCwgXCJpXCIpKSlcblx0XHRcdHtcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS50aXRsZSA9PSBcIlwiICYmICF0cmFjay5zb25nbmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEudGl0bGUsIFwiaVwiKSkpXG5cdFx0XHR7XG5cdFx0XHRcdGdvb2RTZWFyY2ggPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYoIXZtLmZpbHRlckRhdGFbdHJhY2suaW5zdHJ1bWVudF9pZF0pXG5cdFx0XHR7XG5cdFx0XHRcdGdvb2RTZWFyY2ggPSBmYWxzZTtcblx0XHRcdH1cblxuXG5cdFx0XHRpZihnb29kU2VhcmNoKVxuXHRcdFx0e1xuXHRcdFx0XHR2bS5maWx0ZXJlZFRyYWNrcy5wdXNoKHRyYWNrKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmKHZtLmZpbHRlcmVkVHJhY2tzLmxlbmd0aCA9PT0gMCkgXG5cdFx0e1xuXHRcdFx0dm0uc2hvd05vUmVzdWx0c0ZvdW5kID0gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHZtLnNob3dOb1Jlc3VsdHNGb3VuZCA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXG5cdC8qZnVuY3Rpb24gYXJyYXlPYmplY3RJbmRleE9mKG15QXJyYXksIHNlYXJjaFRlcm0sIHByb3BlcnR5KSB7XG4gICAgXHRcbiAgICBcdGZvcih2YXIgaSA9IDAsIGxlbiA9IG15QXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgXHRpZiAobXlBcnJheVtpXVtwcm9wZXJ0eV0gPT09IHNlYXJjaFRlcm0pIHJldHVybiBpO1xuICAgIFx0fVxuXG4gICAgXHRyZXR1cm4gLTE7XG5cdH0qL1xuXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xuXHRcdHZtLnNvbG9UcmFja0F1ZGlvIFx0XHQ9IFtdO1xuXHRcdHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgXHQ9IFwiXCI7XG5cdFx0dm0uc2hvd05vUmVzdWx0c0ZvdW5kIFx0PSBmYWxzZTtcblxuXHRcdGluc3RTdmMuZ2V0SW5zdHJ1bWVudHMoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSlcblx0XHRcdHtcblx0XHRcdFx0dm0uaW5zdHJ1bWVudHMgPSBkYXRhLmRhdGE7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcilcblx0XHRcdHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0fSk7XG5cblx0XHRnZXRTb2xvVHJhY2tzKCk7XG5cdFx0dm0uZmlsdGVyRGF0YSBcdFx0XHQ9IGZsdFN2Yy5zb2xvRmlsdGVyRGF0YTtcblx0XHR2bS50cmFja0FycmF5IFx0XHRcdD0gYmFuZFN2Yy5nZXRUcmFja0FycmF5O1xuXHRcdHZtLmJhbmRUcmFja0lkQXJyYXkgXHQ9IGJhbmRTdmMuZ2V0VHJhY2tJZEFycmF5O1xuXHRcdHZtLnRyYWNrQXJyYXlDb3VudCBcdFx0PSBiYW5kU3ZjLmdldFRyYWNrQXJyYXlDb3VudDtcdFxuXHR9XG5cblx0Ly9WbSBmdW5jdGlvbnNcblx0dm0uYWRkVG9CYW5kID0gZnVuY3Rpb24odHJhY2spIHtcblxuXHRcdGJhbmRTdmMuYWRkVG9UcmFja0FycmF5KHRyYWNrKTtcblx0XHQvKnZtLmJhbmRUcmFja0lkQXJyYXkgPSBbXTtcblxuXHRcdGJhbmRTdmMudHJhY2tBcnJheS5wdXNoKHRyYWNrKTtcblx0XHRiYW5kU3ZjLnRyYWNrQXJyYXlDb3VudCArKztcblx0XHRhbmd1bGFyLmZvckVhY2goYmFuZFN2Yy50cmFja0FycmF5LCBmdW5jdGlvbih0cmFjaywga2V5KSB7XG5cdFx0XHR2bS5iYW5kVHJhY2tJZEFycmF5LnB1c2godHJhY2suaWQpO1xuXHRcdH0pOyovXG5cblx0XHRjb25zb2xlLmxvZyh0cmFjayk7XG5cdH1cblxuXHR2bS5yZW1vdmVGcm9tQmFuZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XG5cdFx0XG5cdFx0YmFuZFN2Yy5yZW1vdmVGcm9tVHJhY2tBcnJheSh0cmFjayk7XG5cdFx0LyppbmRleCA9IGFycmF5T2JqZWN0SW5kZXhPZihiYW5kU3ZjLnRyYWNrQXJyYXksIHRyYWNrLmlkLCBcImlkXCIpO1xuXHRcdGlmIChpbmRleCA+IC0xKSB7XG5cdFx0XHRiYW5kU3ZjLnRyYWNrQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdGJhbmRTdmMudHJhY2tBcnJheUNvdW50IC0tO1xuXHRcdFx0dm0uYmFuZFRyYWNrQXJyYXkgPSBiYW5kU3ZjLnRyYWNrQXJyYXk7XG5cblx0XHRcdGludEluZGV4ID0gdm0uYmFuZFRyYWNrSWRBcnJheS5pbmRleE9mKHRyYWNrLmlkKTtcblx0XHRcdGlmIChpbnRJbmRleCA+IC0xKSB7XG5cdFx0XHRcdHZtLmJhbmRUcmFja0lkQXJyYXkuc3BsaWNlKGludEluZGV4LCAxKTtcblx0XHRcdH1cblx0XHR9Ki9cblxuXHRcdGNvbnNvbGUubG9nKFwiVHJhY2sgcmVtb3ZlZCBmcm9tIG5ldyBiYW5kOiBcIiArIHRyYWNrKTtcblx0XHQvL2NvbnNvbGUubG9nKGJhbmRTdmMudHJhY2tBcnJheSk7XG5cdH1cblxuXHR2bS5wbGF5ID0gZnVuY3Rpb24odHJhY2tJZCkge1xuXG5cdFx0aWYodm0uY3VycmVudEF1ZGlvVHJhY2tJZCAhPSBcIlwiKSB7XG5cdFx0XHR2bS5wYXVzZSh2bS5jdXJyZW50QXVkaW9UcmFja0lkKTtcblx0XHR9XG5cblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkID0gdHJhY2tJZDtcblx0XHR2bS5zb2xvVHJhY2tBdWRpb1t0cmFja0lkXS5wbGF5KCk7XG5cdH1cblxuXHR2bS5wYXVzZSA9IGZ1bmN0aW9uKHRyYWNrSWQpIHtcblx0XHR2bS5zb2xvVHJhY2tBdWRpb1t0cmFja0lkXS5wYXVzZSgpO1xuXHRcdHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgPSBcIlwiO1xuXHR9XG5cblx0Ly9XYXRjaGVzXG5cdCRzY29wZS4kd2F0Y2goXG5cdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gdm0uZmlsdGVyRGF0YSB9LCBcblx0XHRmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZih2bS5maWx0ZXJEYXRhKSBcblx0XHRcdHtcblx0XHRcdFx0ZmlsdGVyKCk7XHRcdFxuXHRcdFx0fVxuXHRcdH0sIHRydWUpO1xuXG5cdF9pbml0KCk7XG59KTsiLCJhcHAuY29udHJvbGxlcihcInVwbG9hZENvbnRyb2xsZXJcIiwgZnVuY3Rpb24oVXBsb2FkLCBhcnRpc3RTZXJ2aWNlLCBpbnN0cnVtZW50U2VydmljZSwgc29sb1NlcnZpY2UsICRzdGF0ZSkge1xuICBcbiAgdmFyIHZtICAgICAgICAgICAgPSB0aGlzO1xuICB2YXIgc29sb1N2YyAgICAgICA9IHNvbG9TZXJ2aWNlO1xuICB2YXIgYXJ0aXN0U3ZjICAgICA9IGFydGlzdFNlcnZpY2U7XG4gIHZhciBpbnN0cnVtZW50U3ZjID0gaW5zdHJ1bWVudFNlcnZpY2U7XG4gIHZhciB0YXJnZXQgICAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VwbG9hZC1zcGlubmVyJyk7XG4gIFxuICB2YXIgb3B0cyA9IHtcbiAgICAgIGxpbmVzOiAxMyAvLyBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIGRyYXdcbiAgICAsIGxlbmd0aDogMjggLy8gVGhlIGxlbmd0aCBvZiBlYWNoIGxpbmVcbiAgICAsIHdpZHRoOiAxMiAvLyBUaGUgbGluZSB0aGlja25lc3NcbiAgICAsIHJhZGl1czogNDIgLy8gVGhlIHJhZGl1cyBvZiB0aGUgaW5uZXIgY2lyY2xlXG4gICAgLCBzY2FsZTogMC4zMCAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXG4gICAgLCBjb3JuZXJzOiAxIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXG4gICAgLCBjb2xvcjogJyMwMDAnIC8vICNyZ2Igb3IgI3JyZ2diYiBvciBhcnJheSBvZiBjb2xvcnNcbiAgICAsIG9wYWNpdHk6IDAuMjUgLy8gT3BhY2l0eSBvZiB0aGUgbGluZXNcbiAgICAsIHJvdGF0ZTogMCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XG4gICAgLCBkaXJlY3Rpb246IDEgLy8gMTogY2xvY2t3aXNlLCAtMTogY291bnRlcmNsb2Nrd2lzZVxuICAgICwgc3BlZWQ6IDEgLy8gUm91bmRzIHBlciBzZWNvbmRcbiAgICAsIHRyYWlsOiA2MCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxuICAgICwgZnBzOiAyMCAvLyBGcmFtZXMgcGVyIHNlY29uZCB3aGVuIHVzaW5nIHNldFRpbWVvdXQoKSBhcyBhIGZhbGxiYWNrIGZvciBDU1NcbiAgICAsIHpJbmRleDogMmU5IC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxuICAgICwgY2xhc3NOYW1lOiAnc3Bpbm5lcicgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcbiAgICAsIHRvcDogJzQwJScgLy8gVG9wIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxuICAgICwgbGVmdDogJzUwJScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcbiAgICAsIHNoYWRvdzogZmFsc2UgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcbiAgICAsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxuICAgICwgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xuICB9XG5cbiAgZnVuY3Rpb24gX2luaXQoKSB7XG4gICAgICB2bS51cGxvYWRlZCAgICAgICA9IGZhbHNlO1xuICAgICAgdm0uc2hvd2Zvcm0gICAgICAgPSBmYWxzZTtcblxuICAgICAgdm0uaW5zdHJ1bWVudHMgICAgPSBpbnN0cnVtZW50U3ZjLmdldEluc3RydW1lbnRzKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpXG4gICAgICB7XG4gICAgICAgIHZtLmluc3RydW1lbnRzICA9IGRhdGEuZGF0YTtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKTtcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKVxuICAgICAge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9KTtcblxuICAgICAgdm0uYXJ0aXN0cyAgICAgICAgPSBhcnRpc3RTdmMuZ2V0QXJ0aXN0cygpXG4gICAgICAudGhlbihmdW5jdGlvbihkYXRhKVxuICAgICAge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xuICAgICAgICB2bS5hcnRpc3RzICAgICAgPSBkYXRhLmRhdGE7XG4gICAgICBcbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKVxuICAgICAge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHZtLnVwbG9hZEZpbGUgPSBmdW5jdGlvbiAoZmlsZSkge1xuICAgICAgICB2YXIgc3Bpbm5lciA9IG5ldyBTcGlubmVyKG9wdHMpLnNwaW4odGFyZ2V0KTtcbiAgICAgICAgdm0ubG9hZGluZyAgPSB0cnVlO1xuICAgICAgICB2bS51cGxvYWRlZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgZm9ybVxuICAgICAgICB2bS5zaG93Zm9ybSAgICAgPSB0cnVlO1xuICAgICAgICAkKCdzZWxlY3QnKS5tYXRlcmlhbF9zZWxlY3QoKTtcblxuICAgICAgICBVcGxvYWQudXBsb2FkKHtcbiAgICAgICAgICAgIHVybDogQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3VwbG9hZFwiLFxuICAgICAgICAgICAgZmlsZUZvcm1EYXRhTmFtZTogJ3NvbmcnLFxuICAgICAgICAgICAgc2VuZEZpZWxkc0FzOiAnZm9ybScsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHNvbmc6IGZpbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgIHZtLmZpbGVuYW1lICAgICA9IHJlc3AuZGF0YS5uYW1lO1xuICAgICAgICAgICAgdm0udHJhY2tsZW5ndGggID0gcmVzcC5kYXRhLmxlbmd0aDtcbiAgICAgICAgICAgIHNwaW5uZXIuc3RvcCgpO1xuICAgICAgICAgICAgdm0ubG9hZGluZyAgICAgID0gZmFsc2U7XG4gICAgICAgICAgICB2bS51cGxvYWRlZCAgICAgPSB0cnVlO1xuICAgICAgICB9LCBcbiAgICAgICAgZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgIHZtLmxvYWRpbmcgID0gZmFsc2U7XG4gICAgICAgICAgICBzcGlubmVyLnN0b3AoKTtcbiAgICAgICAgICAgIHZtLnVwbG9hZGZhaWxlZCA9IHRydWU7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2bS5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHVzZXJfaWQgPSBKU09OLnBhcnNlKGdldENvb2tpZSgndXNlcicpKS51c2VySWQ7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIG5hbWU6IHZtLnNvbmduYW1lLFxuICAgICAgICAgICAgZmlsZV91cmw6IHZtLmZpbGVuYW1lLFxuICAgICAgICAgICAgdHJhY2tfbGVuZ3RoOiB2bS50cmFja2xlbmd0aCxcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJfaWQsXG4gICAgICAgICAgICBpbnN0cnVtZW50X2lkOiB2bS5pbnN0cnVtZW50c2Ryb3Bkb3duLFxuICAgICAgICAgICAgYXJ0aXN0X2lkIDogdm0uYXJ0aXN0bmFtZVxuICAgICAgICB9XG5cbiAgICAgIHNvbG9TdmMuaW5zZXJ0VHJhY2soZGF0YSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSlcbiAgICAgICAge1xuICAgICAgICAgICRzdGF0ZS5nbyhcInNvbG9cIik7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKVxuICAgICAgICB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb29raWUoY25hbWUpIHtcbiAgICAgICAgICB2YXIgbmFtZSA9IGNuYW1lICsgXCI9XCI7XG4gICAgICAgICAgdmFyIGRlY29kZWRDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTtcbiAgICAgICAgICB2YXIgY2EgPSBkZWNvZGVkQ29va2llLnNwbGl0KCc7Jyk7XG4gICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8Y2EubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFyIGMgPSBjYVtpXTtcbiAgICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykge1xuICAgICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLCBjLmxlbmd0aCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB9XG4gIF9pbml0KCk7XG59KTsiLCJhcHAuZmlsdGVyKFwiYmFuZFwiLCBmdW5jdGlvbigpIHtcblx0cmV0dXJuIGZ1bmN0aW9uKHRyYWNrSWQsIGxpc3QpIHtcblx0XHR2YXIgcmV0dXJuVmFsdWUgPSBmYWxzZTtcblx0XHRcblx0XHRhbmd1bGFyLmZvckVhY2gobGlzdCwgZnVuY3Rpb24oaWQsIGluZGV4KSB7XG5cdFx0XHRpZihpZCA9PSB0cmFja0lkKSB7XG5cdFx0XHRcdHJldHVyblZhbHVlID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XG5cdH1cbn0pOyIsImFwcC5zZXJ2aWNlKFwiYXJ0aXN0U2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1xuXHRcblx0Ly9HbG9iYWxzXG5cdHZhciBzdmMgXHRcdFx0PSB0aGlzO1xuXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gZ2V0RGF0YSAodXJsLCBvcHRpb25zKSB7XG5cblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XG5cblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcblx0fVxuXG5cdC8vU3ZjIGZ1bmN0aW9uc1xuXHRzdmMuZ2V0QXJ0aXN0cyA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvYXJ0aXN0c1wiO1xuXHRcdFxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XG5cdH1cbn0pIiwiYXBwLnNlcnZpY2UoXCJhdXRoU2VydmljZVwiLCBmdW5jdGlvbiAoJGF1dGgsICRyb290U2NvcGUsICRjb29raWVzLCAkc3RhdGUsIHVzZXJTZXJ2aWNlKSB7XG5cdFxuXHR2YXIgc3ZjIFx0XHQ9IHRoaXM7XG5cdHZhciB1c2VyU3ZjIFx0PSB1c2VyU2VydmljZTtcblxuXHRzdmMuaXNMb2dnZWRJbiBcdD0gZmFsc2U7XG5cblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xuXHRmdW5jdGlvbiBsb2dpbiAodG9rZW4sIGlkLCB1c2VybmFtZSwgZW1haWwpIHtcblxuXHRcdHZhciBleHBpcmF0aW9uVGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0ZXhwaXJhdGlvblRpbWUgPSBleHBpcmF0aW9uVGltZS5zZXRUaW1lKGV4cGlyYXRpb25UaW1lLmdldFRpbWUoKSArICh0b2tlbltcImV4cGlyZXNfaW5cIl0gKiAxMDAwKSk7XG5cdFx0ZXhwaXJhdGlvblRpbWUgPSBuZXcgRGF0ZShleHBpcmF0aW9uVGltZSk7XG5cblx0XHR2YXIgdXNlckRhdGEgPSB7XG5cblx0XHRcdHRva2VuOiB0b2tlbixcblx0XHRcdHVzZXJJZDogaWQsXG5cdFx0XHR1c2VybmFtZTogdXNlcm5hbWUsXG5cdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHQvL2lzQWRtaW46IGRhdGEuZGF0YS5pc0FkbWluXG5cdFx0fVxuXG5cdFx0Ly9jb25zb2xlLmxvZyh1c2VyRGF0YS50b2tlbik7XG5cblx0XHRzdmMudXNlciA9IHVzZXJEYXRhO1xuXG5cdFx0JGNvb2tpZXMucHV0T2JqZWN0KFwidXNlclwiLCB1c2VyRGF0YSwgeyBleHBpcmVzOiBleHBpcmF0aW9uVGltZSB9KTtcblx0XHQkcm9vdFNjb3BlLmlzTG9nZ2VkSW4gPSB0cnVlO1xuXHRcdFxuXHRcdC8vQ2hlY2sgaWYgcmV0dXJuZWQgdXNlciBpcyBBZG1pblxuXHRcdHVzZXJEYXRhLmlzQWRtaW4gPT0gXCIxXCIgPyAkcm9vdFNjb3BlLmlzQWRtaW4gPSB0cnVlIDogJHJvb3RTY29wZS5pc0FkbWluID0gZmFsc2U7XG5cdH1cblxuXHQvL1N2YyBmdW5jdGlvbnNcblx0c3ZjLmxvZ2luID0gZnVuY3Rpb24gKGNyZWRlbnRpYWxzKSB7XG5cblx0XHQkYXV0aC5sb2dpbihjcmVkZW50aWFscykudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIFx0Ly8gQXV0aGVudGljYXRpb24gc3VjY2Vzc1xuICAgICAgICBcdHRva2VuIFx0XHQ9IGRhdGEuZGF0YS50b2tlbjtcbiAgICAgICAgXHRpZCBcdFx0XHQ9IDA7XG4gICAgICAgIFx0dXNlcm5hbWUgXHQ9IFwiXCI7XG4gICAgICAgIFx0ZW1haWwgXHRcdD0gXCJcIjtcblxuXHRcdFx0dXNlclN2Yy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRpZCBcdFx0XHQ9IGRhdGEuZGF0YS5pZDtcblx0XHRcdFx0dXNlcm5hbWUgXHQ9IGRhdGEuZGF0YS51c2VybmFtZTtcblx0XHRcdFx0ZW1haWwgXHRcdD0gZGF0YS5kYXRhLmVtYWlsO1xuXHRcdFx0XHRcblx0XHRcdFx0bG9naW4odG9rZW4sIGlkLCB1c2VybmFtZSwgZW1haWwpO1xuXHRcdFx0XHRzdmMuaXNMb2dnZWRJbiA9IHRydWU7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHRcdHN2Yy5pc0xvZ2dlZEluID0gZmFsc2U7XG5cdFx0XHR9KTtcbiAgICAgICAgfSwgXG4gICAgICAgIGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgXHQvLyBBdXRoZW50aWNhdGlvbiBmYWlsZWRcbiAgICAgICAgXHRjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIFx0c3ZjLmlzTG9nZ2VkSW4gPSBmYWxzZTsgXG4gICAgICAgIH0pO1xuXHR9XG5cblx0c3ZjLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcblx0XHQkYXV0aC5sb2dvdXQoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuXHRcdFx0XHQkcm9vdFNjb3BlLmlzTG9nZ2VkSW4gPSBmYWxzZTtcblx0XHRcdFx0JHJvb3RTY29wZS5pc0FkbWluID0gZmFsc2U7XG5cdFx0XHRcdHN2Yy51c2VyID0gbnVsbDtcblx0XHRcdFx0c3ZjLmlzTG9nZ2VkSW4gPSBudWxsO1xuXG5cdFx0XHRcdCRjb29raWVzLnJlbW92ZShcInVzZXJcIik7XG5cdFx0XHRcdFxuXHRcdFx0XHQkc3RhdGUuZ28oXCJob21lXCIpO1xuXHRcdFx0fSwgZnVuY3Rpb24gKGVycm9yKSB7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0fSlcblx0fVxuXG5cdHN2Yy5yZWdpc3RlciA9IGZ1bmN0aW9uICh1c2VyKSB7XG5cblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3VzZXJcIjtcblxuXHRcdHJldHVybiAkaHR0cC5wb3N0KHVybCwgdXNlcik7XG5cdH1cbn0pOyIsImFwcC5zZXJ2aWNlKFwiYmFuZFNlcnZpY2VcIiwgZnVuY3Rpb24oKSB7XG5cdFxuXHR2YXIgc3ZjID0gdGhpcztcblxuXHR0cmFja0FycmF5ID0gW107XG5cdHRyYWNrSWRBcnJheSA9IFtdO1xuXHR0cmFja0FycmF5Q291bnQgPSAwO1xuXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gYXJyYXlPYmplY3RJbmRleE9mKG15QXJyYXksIHNlYXJjaFRlcm0sIHByb3BlcnR5KSB7XG4gICAgXHRcbiAgICBcdGZvcih2YXIgaSA9IDAsIGxlbiA9IG15QXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgXHRpZiAobXlBcnJheVtpXVtwcm9wZXJ0eV0gPT09IHNlYXJjaFRlcm0pIHJldHVybiBpO1xuICAgIFx0fVxuXG4gICAgXHRyZXR1cm4gLTE7XG5cdH1cblx0Ly9UcmFja0FycmF5Q291bnRcblx0ZnVuY3Rpb24gaW5jcmVtZW50VHJhY2tBcnJheUNvdW50KCkge1xuXHRcdHRyYWNrQXJyYXlDb3VudCArKztcblx0XHRyZXR1cm4gdHJhY2tBcnJheUNvdW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVjcmVtZW50VHJhY2tBcnJheUNvdW50KCkge1xuXHRcdHRyYWNrQXJyYXlDb3VudCAtLTtcblx0XHRyZXR1cm4gdHJhY2tBcnJheUNvdW50O1xuXHR9XG5cblx0Ly9UcmFja0lkQXJyYXlcblx0ZnVuY3Rpb24gYWRkVG9UcmFja0lkQXJyYXkodHJhY2tJZCkge1xuXHRcdHRyYWNrSWRBcnJheS5wdXNoKHRyYWNrSWQpO1xuXHRcdHJldHVybiB0cmFja0lkQXJyYXk7XG5cdH1cblxuXHRmdW5jdGlvbiByZW1vdmVGcm9tVHJhY2tJZEFycmF5KHRyYWNrSWQpIHtcblx0XHRpbmRleCA9IHRyYWNrSWRBcnJheS5pbmRleE9mKHRyYWNrSWQpO1xuXHRcdGlmKGluZGV4ID4gLTEpIHtcblx0XHRcdHRyYWNrSWRBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0cmFja0lkQXJyYXk7XG5cdH1cblxuXHQvL1N2YyBmdW5jdGlvbnNcblx0c3ZjLmdldFRyYWNrQXJyYXlDb3VudCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0cmFja0FycmF5Q291bnQ7XG5cdH1cblxuXHRzdmMuZ2V0VHJhY2tJZEFycmF5ID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRyYWNrSWRBcnJheTtcblx0fVxuXG5cblx0c3ZjLmFkZFRvVHJhY2tBcnJheSA9IGZ1bmN0aW9uKHRyYWNrKSB7XG5cdFx0dHJhY2tBcnJheS5wdXNoKHRyYWNrKTtcblx0XHRpbmNyZW1lbnRUcmFja0FycmF5Q291bnQoKTtcblx0XHRhZGRUb1RyYWNrSWRBcnJheSh0cmFjay5pZCk7XG5cdFx0cmV0dXJuIHRyYWNrQXJyYXk7XG5cdH1cblxuXHRzdmMucmVtb3ZlRnJvbVRyYWNrQXJyYXkgPSBmdW5jdGlvbih0cmFjaykge1xuXHRcdGluZGV4ID0gYXJyYXlPYmplY3RJbmRleE9mKHRyYWNrQXJyYXksIHRyYWNrLmlkLCBcImlkXCIpO1xuXHRcdGlmKGluZGV4ID4gLTEpIHtcblx0XHRcdHRyYWNrQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcblx0XHR9XG5cdFx0XG5cdFx0ZGVjcmVtZW50VHJhY2tBcnJheUNvdW50KCk7XG5cdFx0cmVtb3ZlRnJvbVRyYWNrSWRBcnJheSh0cmFjay5pZCk7XG5cdFx0cmV0dXJuIHRyYWNrQXJyYXk7XG5cdH1cblxuXHRzdmMuZ2V0VHJhY2tBcnJheSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0cmFja0FycmF5O1xuXHR9XG5cblx0XG5cblxuXG5cblx0c3ZjLnRlc3RGdW5jdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcdGFsZXJ0KFwiVGVzdCBmdW5jdGlvbiBjYWxsZWQgZnJvbSBpbnNpZGUgc2VydmljZSFcIik7XG5cdH1cbn0pIiwiYXBwLnNlcnZpY2UoXCJmaWx0ZXJTZXJ2aWNlXCIsIGZ1bmN0aW9uKGluc3RydW1lbnRTZXJ2aWNlKSB7XG5cdFxuXHR2YXIgc3ZjID0gdGhpcztcblx0dmFyIGluc3RTdmMgPSBpbnN0cnVtZW50U2VydmljZTtcblxuXG5cdHN2Yy5jcmVhdGVTb2xvRmlsdGVyRGF0YSA9IGZ1bmN0aW9uKClcblx0e1xuXHRcdHN2Yy5zb2xvRmlsdGVyRGF0YSA9IHtcdFwiYXJ0aXN0XCI6IFwiXCIsXG5cdFx0XHRcdFx0XHRcdFx0XCJ0aXRsZVwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdH07XG5cblx0XHRhbmd1bGFyLmZvckVhY2goaW5zdFN2Yy5pbnN0cnVtZW50cywgZnVuY3Rpb24odmFsdWUsIGtleSlcblx0XHR7XG5cdFx0XHRzdmMuc29sb0ZpbHRlckRhdGFbdmFsdWUuaWRdID0gdHJ1ZTtcblx0XHR9KTtcblx0fVxuXG5cdHN2Yy5jcmVhdGVNZXJnZWRGaWx0ZXJEYXRhID0gZnVuY3Rpb24oKVxuXHR7XG5cdFx0c3ZjLm1lcmdlZEZpbHRlckRhdGEgPSB7XHRcImFydGlzdFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0XCJ0aXRsZVwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xuXHRcdHN2Yy5jcmVhdGVTb2xvRmlsdGVyRGF0YSgpO1xuXHRcdHN2Yy5jcmVhdGVNZXJnZWRGaWx0ZXJEYXRhKCk7XG5cdH1cblxuXHRfaW5pdCgpO1xufSkiLCJhcHAuc2VydmljZShcImluc3RydW1lbnRTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XG5cdFxuXHQvL0dsb2JhbHNcblx0dmFyIHN2YyA9IHRoaXM7XG5cblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xuXHRmdW5jdGlvbiBnZXREYXRhICh1cmwsIG9wdGlvbnMpIHtcblxuXHRcdCFvcHRpb25zID8gb3B0aW9ucyA9IHt9IDogXCJcIjtcblxuXHRcdHJldHVybiAkaHR0cC5nZXQodXJsLCBvcHRpb25zKVxuXHR9XG5cblx0Ly9TdmMgZnVuY3Rpb25zXG5cdHN2Yy5nZXRJbnN0cnVtZW50cyA9IGZ1bmN0aW9uICgpIHtcblxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvaW5zdHJ1bWVudHNcIjtcblx0XHRcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xuXHR9XG5cblx0Ly8gSW5pdGlhbCB2YWx1ZXMgKHdpbGwgYmUgb3ZlcndyaXR0ZSBieSBkYiB2YWx1ZXMpXG5cdHN2Yy5pbnN0cnVtZW50cyA9IFt7XG4gXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIkxlYWQtZ3VpdGFyXCIsXG4gXHRcdFx0XHRcdFx0XHRcImlkXCI6MVxuIFx0XHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFx0e1xuIFx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJSeXRobS1ndWl0YXJcIixcbiBcdFx0XHRcdFx0XHRcdFwiaWRcIjoyXG4gXHRcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XHR7XG4gXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIkRydW1cIixcbiBcdFx0XHRcdFx0XHRcdFwiaWRcIjozXG4gXHRcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XHR7XG4gXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIkJhc3NcIixcblx0XHRcdFx0XHRcdFx0XCJpZFwiOjRcbiBcdFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcdHtcbiBcdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwiQmFzc1wiLFxuXHRcdFx0XHRcdFx0XHRcImlkXCI6NVxuIFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwiS2V5c1wiLFxuIFx0XHRcdFx0XHRcdFx0XCJpZFwiOjZcbiBcdFx0XHRcdFx0XHR9XTtcbn0pIiwiYXBwLnNlcnZpY2UoXCJtZXJnZWRTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XG5cdFxuXHQvL0dsb2JhbHNcblx0dmFyIHN2YyA9IHRoaXM7XG5cblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xuXHRmdW5jdGlvbiBnZXREYXRhICh1cmwsIG9wdGlvbnMpIHtcblxuXHRcdCFvcHRpb25zID8gb3B0aW9ucyA9IHt9IDogXCJcIjtcblxuXHRcdHJldHVybiAkaHR0cC5nZXQodXJsLCBvcHRpb25zKVxuXHR9XG5cblx0Ly9TdmMgZnVuY3Rpb25zXG5cdHN2Yy5nZXRUcmFja3MgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL21lcmdlZHRyYWNrc1wiO1xuXHRcdFxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XG5cdH1cblxuXHRzdmMuZ2V0VHJhY2tCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG5cblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL21lcmdlZHRyYWNrcy9cIiArIGlkO1xuXG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcblx0fVxuXG5cdHN2Yy5tZXJnZVRyYWNrcyA9IGZ1bmN0aW9uKGRhdGEpXG5cdHtcblx0XHRyZXR1cm4gJGh0dHAucG9zdChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvbWVyZ2VkdHJhY2tzL2NyZWF0ZVwiLCBkYXRhKTtcblx0fVxuXG5cdHN2Yy5pbnNlcnRWb3RlID0gZnVuY3Rpb24oZGF0YSlcblx0e1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi92b3RlL2NyZWF0ZVwiLCBkYXRhKTtcblx0fVxuXG5cdHN2Yy5kb3dubG9hZCA9IGZ1bmN0aW9uIChpZCkge1xuXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi9tZXJnZWR0cmFja3MvXCIgKyBpZCArIFwiL2Rvd25sb2FkXCI7XG5cdFx0XG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcblx0fVxuXG5cdHN2Yy5nZXRVc2VyVm90ZXMgPSBmdW5jdGlvbih1c2VyX2lkKSB7XG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi92b3Rlcy9cIiArIHVzZXJfaWQ7XG5cdFx0XG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcblx0fVxufSkiLCJhcHAuc2VydmljZShcInNvbG9TZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XG5cdFxuXHQvL0dsb2JhbHNcblx0dmFyIHN2YyA9IHRoaXM7XG5cblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xuXHRmdW5jdGlvbiBnZXREYXRhICh1cmwsIG9wdGlvbnMpIHtcblxuXHRcdCFvcHRpb25zID8gb3B0aW9ucyA9IHt9IDogXCJcIjtcblxuXHRcdHJldHVybiAkaHR0cC5nZXQodXJsLCBvcHRpb25zKVxuXHR9XG5cblx0Ly9TdmMgZnVuY3Rpb25zXG5cdHN2Yy5nZXRUcmFja3MgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3RyYWNrc1wiO1xuXHRcdFxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XG5cdH1cblxuXHRzdmMuZ2V0VHJhY2tCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG5cblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3RyYWNrcy9cIiArIGlkO1xuXG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcblx0fVxuXG5cdHN2Yy5pbnNlcnRUcmFjayA9IGZ1bmN0aW9uKGRhdGEpXG5cdHtcblx0XHRyZXR1cm4gJGh0dHAucG9zdChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdHJhY2tzL2NyZWF0ZVwiLCBkYXRhKTtcblx0fVxufSkiLCJhcHAuc2VydmljZShcInVzZXJTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XHRcblx0XG5cdHZhciBzdmMgPSB0aGlzO1xuXG5cdHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKVxuXHR7XG5cdFx0cmV0dXJuICRodHRwLmdldChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdXNlclwiKTtcblx0fVxuXG5cdHN2Yy51cGRhdGVVc2VyID0gZnVuY3Rpb24oZGF0YSlcblx0e1xuXHRcdHJldHVybiAkaHR0cC5wb3N0KENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi91c2VyXCIsIGRhdGEpO1xuXHR9XG59KSIsImFwcC5kaXJlY3RpdmUoXCJkY2JCYW5kXCIsIGZ1bmN0aW9uKGJhbmRTZXJ2aWNlKSB7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1iYW5kL2RjYi1iYW5kLmh0bWxcIixcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRjb250cm9sbGVyQXM6IFwiYmFuZFwiLFxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRhdXRoLCAkc2NvcGUsICRyb290U2NvcGUpIHtcblx0XHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0XHR2YXIgYmFuZFN2YyA9IGJhbmRTZXJ2aWNlO1xuXG5cdFx0XHRmdW5jdGlvbiBfaW5pdCgpIHtcblx0XHRcdFx0dm0udHJhY2tBcnJheSBcdFx0XHQ9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheTtcblx0XHRcdFx0dm0uYmFuZFRyYWNrSWRBcnJheSBcdD0gYmFuZFN2Yy5nZXRUcmFja0lkQXJyYXk7XG5cdFx0XHRcdHZtLnRyYWNrQXJyYXlDb3VudCBcdFx0PSBiYW5kU3ZjLmdldFRyYWNrQXJyYXlDb3VudDtcblxuXHRcdFx0XHQvL2NvbnNvbGUubG9nKHZtLnRyYWNrQXJyYXlDb3VudCk7XG5cdFx0XHR9XG5cblx0XHRcdHZtLnJlbW92ZUZyb21CYW5kID0gZnVuY3Rpb24odHJhY2spIHtcblx0XHRcblx0XHRcdFx0YmFuZFN2Yy5yZW1vdmVGcm9tVHJhY2tBcnJheSh0cmFjayk7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coXCJUcmFjayByZW1vdmVkIGZyb20gbmV3IGJhbmQ6IFwiICsgdHJhY2spO1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKGJhbmRTdmMudHJhY2tBcnJheSk7XG5cdFx0XHR9XG5cblx0XHRcdF9pbml0KCk7XG5cdFx0fVxuXHR9XG59KSIsImFwcC5kaXJlY3RpdmUoXCJkY2JIZWFkZXJcIiwgZnVuY3Rpb24oYmFuZFNlcnZpY2UpIHtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJFXCIsXG5cdFx0dGVtcGxhdGVVcmw6IFwiYXBwL2RpcmVjdGl2ZXMvZGNiLWhlYWRlci9kY2ItaGVhZGVyLmh0bWxcIixcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRjb250cm9sbGVyQXM6IFwiaGVhZFwiLFxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgdXNlclNlcnZpY2UsIGF1dGhTZXJ2aWNlLCAkYXV0aCwgJHJvb3RTY29wZSkge1xuXHRcdFx0XG5cdFx0XHR2YXIgdm0gXHRcdFx0PSB0aGlzO1xuXHRcdFx0dmFyIHVzZXJTdmMgXHQ9IHVzZXJTZXJ2aWNlO1xuXHRcdFx0dmFyIGF1dGhTdmMgXHQ9IGF1dGhTZXJ2aWNlO1xuXHRcdFx0dmFyIGJhbmRTdmMgXHQ9IGJhbmRTZXJ2aWNlO1xuXG5cdFx0XHRmdW5jdGlvbiBfaW5pdCgpIHtcblx0XHRcdFx0dm0udHJhY2tBcnJheSA9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheTtcblx0XHRcdFx0dm0udHJhY2tBcnJheUNvdW50ID0gYmFuZFN2Yy5nZXRUcmFja0FycmF5Q291bnQ7XG5cblx0XHRcdFx0aWYoJGF1dGguaXNBdXRoZW50aWNhdGVkKCkpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR1c2VyU3ZjLmdldFVzZXIoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdFx0XHQkcm9vdFNjb3BlLnVzZXJuYW1lID0gZGF0YS5kYXRhLnVzZXJuYW1lO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHZtLnNob3dMb2dpbiA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCgnI2xvZ2luX21vZGFsJykubW9kYWwoKTtcblx0XHRcdFx0JCgnI2xvZ2luX21vZGFsJykubW9kYWwoJ29wZW4nKTtcblx0XHRcdH1cblxuXHRcdFx0dm0ubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRhdXRoU3ZjLmxvZ291dCgpO1xuXHRcdFx0fVxuXG5cdFx0XHR2bS5zaG93UmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoJyNyZWdpc3Rlcl9tb2RhbCcpLm1vZGFsKCk7XG5cdFx0XHRcdCQoJyNyZWdpc3Rlcl9tb2RhbCcpLm1vZGFsKCdvcGVuJyk7XG5cdFx0XHR9XG5cblx0XHRcdHZtLnNob3dCYW5kID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKCcjYmFuZF9tb2RhbCcpLm1vZGFsKCk7XG5cdFx0XHRcdCQoJyNiYW5kX21vZGFsJykubW9kYWwoJ29wZW4nKTtcblx0XHRcdH1cblxuXHRcdFx0dm0uaXNBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKTtcblx0XHRcdH07XG5cblx0XHRcdF9pbml0KCk7XG5cblx0XHRcdC8vV2F0Y2hlc1xuXHRcdFx0JHNjb3BlLiR3YXRjaChcblx0XHRcdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gYXV0aFN2Yy51c2VyIH0sIFxuXHRcdFx0XHRmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHR2bS51c2VyID0gYXV0aFN2Yy51c2VyO1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2codm0udXNlcik7XG5cdFx0XHRcdH0pO1xuXHRcdH1cblx0fVxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiTG9naW5cIiwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1sb2dpbi9kY2ItbG9naW4uaHRtbFwiLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGNvbnRyb2xsZXJBczogXCJsb2dpblwiLFxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRhdXRoLCAkc2NvcGUsICRyb290U2NvcGUsIHVzZXJTZXJ2aWNlLCBhdXRoU2VydmljZSwgJGNvb2tpZXMpIHtcblx0XHRcdHZhciB2bSBcdFx0XHQ9IHRoaXM7XG5cdFx0XHR2YXIgdXNlclN2YyBcdD0gdXNlclNlcnZpY2U7XG5cdFx0XHR2YXIgYXV0aFN2YyBcdD0gYXV0aFNlcnZpY2U7XG5cdFx0XHR2YXIgdGFyZ2V0IFx0XHQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbi1zcGlubmVyJyk7XG5cblx0XHRcdHZhciBvcHRzID0ge1xuXHQgIFx0XHRcdGxpbmVzOiAxMyAvLyBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIGRyYXdcblx0XHRcdFx0LCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXG5cdFx0XHRcdCwgd2lkdGg6IDE0IC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xuXHRcdFx0XHQsIHJhZGl1czogNDIgLy8gVGhlIHJhZGl1cyBvZiB0aGUgaW5uZXIgY2lyY2xlXG5cdFx0XHRcdCwgc2NhbGU6IDAuNCAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXG5cdFx0XHRcdCwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxuXHRcdFx0XHQsIGNvbG9yOiAnIzAwMCcgLy8gI3JnYiBvciAjcnJnZ2JiIG9yIGFycmF5IG9mIGNvbG9yc1xuXHRcdFx0XHQsIG9wYWNpdHk6IDAuMjUgLy8gT3BhY2l0eSBvZiB0aGUgbGluZXNcblx0XHRcdFx0LCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxuXHRcdFx0XHQsIGRpcmVjdGlvbjogMSAvLyAxOiBjbG9ja3dpc2UsIC0xOiBjb3VudGVyY2xvY2t3aXNlXG5cdFx0XHRcdCwgc3BlZWQ6IDEgLy8gUm91bmRzIHBlciBzZWNvbmRcblx0XHRcdFx0LCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2Vcblx0XHRcdFx0LCBmcHM6IDIwIC8vIEZyYW1lcyBwZXIgc2Vjb25kIHdoZW4gdXNpbmcgc2V0VGltZW91dCgpIGFzIGEgZmFsbGJhY2sgZm9yIENTU1xuXHRcdFx0XHQsIHpJbmRleDogMmU5IC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxuXHRcdFx0XHQsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXG5cdFx0XHRcdCwgdG9wOiAnNjAlJyAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG5cdFx0XHRcdCwgbGVmdDogJzUwJScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcblx0XHRcdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XG5cdFx0XHRcdCwgaHdhY2NlbDogZmFsc2UgLy8gV2hldGhlciB0byB1c2UgaGFyZHdhcmUgYWNjZWxlcmF0aW9uXG5cdFx0XHRcdCwgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xuXHRcdFx0fVxuXG5cdFx0XHQvL1ByaXZhdGUgZnVuY3Rpb25zXG5cdFx0XHRmdW5jdGlvbiBsb2dpbiAodG9rZW4sIGlkLCB1c2VybmFtZSwgZW1haWwpIHtcblxuXHRcdFx0XHR2YXIgZXhwaXJhdGlvblRpbWUgPSBuZXcgRGF0ZSgpO1xuXHRcdFx0XHRleHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lLnNldFRpbWUoZXhwaXJhdGlvblRpbWUuZ2V0VGltZSgpICsgKHRva2VuW1wiZXhwaXJlc19pblwiXSAqIDEwMDApKTtcblx0XHRcdFx0ZXhwaXJhdGlvblRpbWUgPSBuZXcgRGF0ZShleHBpcmF0aW9uVGltZSk7XG5cblx0XHRcdFx0dmFyIHVzZXJEYXRhID0ge1xuXG5cdFx0XHRcdFx0dG9rZW46IHRva2VuLFxuXHRcdFx0XHRcdHVzZXJJZDogaWQsXG5cdFx0XHRcdFx0dXNlcm5hbWU6IHVzZXJuYW1lLFxuXHRcdFx0XHRcdGVtYWlsOiBlbWFpbCxcblx0XHRcdFx0XHQvL2lzQWRtaW46IGRhdGEuZGF0YS5pc0FkbWluXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zb2xlLmxvZyh1c2VyRGF0YS50b2tlbik7XG5cblx0XHRcdFx0YXV0aFN2Yy51c2VyID0gdXNlckRhdGE7XG5cblx0XHRcdFx0JGNvb2tpZXMucHV0T2JqZWN0KFwidXNlclwiLCB1c2VyRGF0YSwgeyBleHBpcmVzOiBleHBpcmF0aW9uVGltZSB9KTtcblx0XHRcdFx0JHJvb3RTY29wZS5pc0xvZ2dlZEluID0gdHJ1ZTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vQ2hlY2sgaWYgcmV0dXJuZWQgdXNlciBpcyBBZG1pblxuXHRcdFx0XHR1c2VyRGF0YS5pc0FkbWluID09IFwiMVwiID8gJHJvb3RTY29wZS5pc0FkbWluID0gdHJ1ZSA6ICRyb290U2NvcGUuaXNBZG1pbiA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cblx0XHRcdC8vVm0gZnVuY3Rpb25zXG5cdCAgICAgICAgdm0ubG9naW4gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICBcdHZhciBzcGlubmVyID0gbmV3IFNwaW5uZXIob3B0cykuc3Bpbih0YXJnZXQpO1xuXHQgICAgICAgIFx0dm0ubG9hZGluZyBcdD0gdHJ1ZTtcblx0ICAgICAgICBcdGNvbnNvbGUubG9nKHZtLmxvYWRpbmcpO1xuXG5cdCAgICAgICAgICAgIHZhciBjcmVkZW50aWFscyA9IHtcblx0ICAgICAgICAgICAgICAgIGVtYWlsOiB2bS5lbWFpbCxcblx0ICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB2bS5wYXNzd29yZFxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIFxuXHQgICAgICAgICAgICBhdXRoU3ZjLmxvZ2luKGNyZWRlbnRpYWxzKTtcblx0ICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIC8vV2F0Y2hlc1xuXHRcdFx0XHR2YXIgdW5yZWdpc3RlciA9ICRzY29wZS4kd2F0Y2goXG5cdFx0XHRcdCBcdGZ1bmN0aW9uICgpIHsgcmV0dXJuIGF1dGhTdmMuaXNMb2dnZWRJbiB9LCBcblx0XHRcdFx0IFx0ZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0aWYoYXV0aFN2Yy5pc0xvZ2dlZEluKSBcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHQgICAgICAgIFx0JCgnI2xvZ2luX21vZGFsJykubW9kYWwoKTtcblx0XHRcdFx0XHRcdFx0JCgnI2xvZ2luX21vZGFsJykubW9kYWwoJ2Nsb3NlJyk7XG5cdFx0XHRcdCAgICAgICAgXHRzcGlubmVyLnN0b3AoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKCFhdXRoU3ZjLmlzTG9nZ2VkSW4pXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHNwaW5uZXIuc3RvcCgpO1xuXHRcdFx0XHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSwgdHJ1ZSk7XG5cdCAgICAgICAgfVxuXHRcdH1cblx0fVxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiTWVyZ2Vwcm9jZXNzaW5nXCIsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiBcIkVcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL2RpcmVjdGl2ZXMvZGNiLW1lcmdlcHJvY2Vzc2luZy9kY2ItbWVyZ2Vwcm9jZXNzaW5nLmh0bWxcIixcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgc2NvcGU6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwicHJvY2Vzc2luZ1wiLFxuICAgICAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkaW50ZXJ2YWwpIFxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdm0gICAgICAgICAgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIHRhcmdldCAgICAgID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2Nlc3Npbmctc3Bpbm5lcicpO1xuXG4gICAgICAgICAgICB2YXIgb3B0cyA9IHtcbiAgICAgICAgICAgICAgICBsaW5lczogMTMgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XG4gICAgICAgICAgICAgICAgLCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXG4gICAgICAgICAgICAgICAgLCB3aWR0aDogMTQgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXG4gICAgICAgICAgICAgICAgLCByYWRpdXM6IDQyIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxuICAgICAgICAgICAgICAgICwgc2NhbGU6IDAuNCAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXG4gICAgICAgICAgICAgICAgLCBjb3JuZXJzOiAxIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXG4gICAgICAgICAgICAgICAgLCBjb2xvcjogJyMwMDAnIC8vICNyZ2Igb3IgI3JyZ2diYiBvciBhcnJheSBvZiBjb2xvcnNcbiAgICAgICAgICAgICAgICAsIG9wYWNpdHk6IDAuMjUgLy8gT3BhY2l0eSBvZiB0aGUgbGluZXNcbiAgICAgICAgICAgICAgICAsIHJvdGF0ZTogMCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XG4gICAgICAgICAgICAgICAgLCBkaXJlY3Rpb246IDEgLy8gMTogY2xvY2t3aXNlLCAtMTogY291bnRlcmNsb2Nrd2lzZVxuICAgICAgICAgICAgICAgICwgc3BlZWQ6IDEgLy8gUm91bmRzIHBlciBzZWNvbmRcbiAgICAgICAgICAgICAgICAsIHRyYWlsOiA2MCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxuICAgICAgICAgICAgICAgICwgZnBzOiAyMCAvLyBGcmFtZXMgcGVyIHNlY29uZCB3aGVuIHVzaW5nIHNldFRpbWVvdXQoKSBhcyBhIGZhbGxiYWNrIGZvciBDU1NcbiAgICAgICAgICAgICAgICAsIHpJbmRleDogMmU5IC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxuICAgICAgICAgICAgICAgICwgY2xhc3NOYW1lOiAnc3Bpbm5lcicgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcbiAgICAgICAgICAgICAgICAsIHRvcDogJzQwJScgLy8gVG9wIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxuICAgICAgICAgICAgICAgICwgbGVmdDogJzUwJScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcbiAgICAgICAgICAgICAgICAsIHNoYWRvdzogZmFsc2UgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcbiAgICAgICAgICAgICAgICAsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxuICAgICAgICAgICAgICAgICwgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdGV4dEFycmF5ICAgICAgID0gW1xuICAgICAgICAgICAgICAgIFwiVHVuaW5nIGluc3RydW1lbnRzLi4uXCIsIFxuICAgICAgICAgICAgICAgIFwiQWRqdXN0aW5nIGFtcCBzZXR0aW5ncy4uLlwiLCBcbiAgICAgICAgICAgICAgICBcIlNvdW5kY2hlY2tpbmcuLi5cIiwgXG4gICAgICAgICAgICAgICAgXCJSZWNvcmRpbmcuLi5cIiwgXG4gICAgICAgICAgICAgICAgXCJNaXhpbmcgc291bmQuLi5cIiwgXG4gICAgICAgICAgICAgICAgXCJGaW5pc2hpbmcgdXAuLi5cIlxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgdmFyIHNwaW5uZXIgICAgICAgICA9IG5ldyBTcGlubmVyKG9wdHMpLnNwaW4odGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50SW5kZXggICAgPSAwO1xuXG4gICAgICAgICAgICAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYoJCgnI3Byb2Nlc3NpbmdfbW9kYWwnKS5pcyhcIjp2aXNpYmxlXCIpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdm0udGV4dCA9IHRleHRBcnJheVtjdXJyZW50SW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXgrKztcblxuICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50SW5kZXggPj0gdGV4dEFycmF5Lmxlbmd0aCAtIDEpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCA0MDAwKTtcbiAgICAgICAgfVxuICAgIH1cbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYlJlZ2lzdGVyXCIsIGZ1bmN0aW9uKHVzZXJTZXJ2aWNlKSB7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1yZWdpc3Rlci9kY2ItcmVnaXN0ZXIuaHRtbFwiLFxuXHRcdHJlcGxhY2U6IHRydWUsXG5cdFx0c2NvcGU6IHt9LFxuXHRcdGNvbnRyb2xsZXJBczogXCJyZWdpc3RlclwiLFxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRhdXRoLCAkc2NvcGUsICRyb290U2NvcGUsIHVzZXJTZXJ2aWNlLCBhdXRoU2VydmljZSkge1xuXHRcdFx0dmFyIHZtIFx0XHRcdD0gdGhpcztcblx0XHRcdHZhciB1c2VyU3ZjIFx0PSB1c2VyU2VydmljZTtcblx0XHRcdHZhciBhdXRoU3ZjIFx0PSBhdXRoU2VydmljZTtcblx0XHRcdHZhciB0YXJnZXQgXHRcdD0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdGVyLXNwaW5uZXInKTtcblxuXHRcdFx0dmFyIG9wdHMgPSB7XG5cdCAgXHRcdFx0bGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xuXHRcdFx0XHQsIGxlbmd0aDogMjggLy8gVGhlIGxlbmd0aCBvZiBlYWNoIGxpbmVcblx0XHRcdFx0LCB3aWR0aDogMTQgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXG5cdFx0XHRcdCwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcblx0XHRcdFx0LCBzY2FsZTogMC40IC8vIFNjYWxlcyBvdmVyYWxsIHNpemUgb2YgdGhlIHNwaW5uZXJcblx0XHRcdFx0LCBjb3JuZXJzOiAxIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXG5cdFx0XHRcdCwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXG5cdFx0XHRcdCwgb3BhY2l0eTogMC4yNSAvLyBPcGFjaXR5IG9mIHRoZSBsaW5lc1xuXHRcdFx0XHQsIHJvdGF0ZTogMCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XG5cdFx0XHRcdCwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2Vcblx0XHRcdFx0LCBzcGVlZDogMSAvLyBSb3VuZHMgcGVyIHNlY29uZFxuXHRcdFx0XHQsIHRyYWlsOiA2MCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxuXHRcdFx0XHQsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXG5cdFx0XHRcdCwgekluZGV4OiAyZTkgLy8gVGhlIHotaW5kZXggKGRlZmF1bHRzIHRvIDIwMDAwMDAwMDApXG5cdFx0XHRcdCwgY2xhc3NOYW1lOiAnc3Bpbm5lcicgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcblx0XHRcdFx0LCB0b3A6ICc2MCUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcblx0XHRcdFx0LCBsZWZ0OiAnNTAlJyAvLyBMZWZ0IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxuXHRcdFx0XHQsIHNoYWRvdzogZmFsc2UgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcblx0XHRcdFx0LCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cblx0XHRcdFx0LCBwb3NpdGlvbjogJ2Fic29sdXRlJyAvLyBFbGVtZW50IHBvc2l0aW9uaW5nXG5cdFx0XHR9XG5cblxuXHRcdFx0XG5cdFx0XHR2bS5yZWdpc3RlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgc3Bpbm5lciA9IG5ldyBTcGlubmVyKG9wdHMpLnNwaW4odGFyZ2V0KTtcblx0ICAgICAgICBcdHZtLmxvYWRpbmcgXHQ9IHRydWU7XG5cblx0XHRcdFx0dmFyIHVzZXIgPSB7XG5cdFx0XHRcdCAgXHR1c2VybmFtZTogdm0udXNlcm5hbWUsXG5cdFx0XHRcdCAgXHRlbWFpbDogdm0uZW1haWwsXG5cdFx0XHRcdCAgXHRwYXNzd29yZDogdm0ucGFzc3dvcmRcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQkYXV0aC5zaWdudXAodXNlcikudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuXHRcdFx0XHRcdC8vIFJlZ2lzdHJhdGlvbiBzdWNjZXNzXG5cdFx0XHRcdFx0YXV0aFN2Yy5sb2dpbih1c2VyKTtcblxuXHRcdCAgICAgICAgICAgIC8vV2F0Y2hlc1xuXHRcdFx0XHRcdHZhciB1bnJlZ2lzdGVyID0gJHNjb3BlLiR3YXRjaChcblx0XHRcdFx0XHRcdGZ1bmN0aW9uICgpIHsgcmV0dXJuIGF1dGhTdmMuaXNMb2dnZWRJbiB9LCBcblx0XHRcdFx0XHRcdGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHRcdFx0XHRpZihhdXRoU3ZjLmlzTG9nZ2VkSW4pIFxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdCAgICAgICAgXHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgpO1xuXHRcdFx0XHRcdFx0XHRcdCQoJyNyZWdpc3Rlcl9tb2RhbCcpLm1vZGFsKCdjbG9zZScpO1xuXHRcdFx0XHRcdCAgICAgICAgXHRzcGlubmVyLnN0b3AoKTtcblx0XHRcdFx0XHQgICAgICAgIFx0dW5yZWdpc3RlcigpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmKGF1dGhTdmMuaXNMb2dnZWRJbiA9PT0gZmFsc2UpXG5cdFx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0XHRzcGlubmVyLnN0b3AoKTtcblx0ICAgICAgICBcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgIFx0XHRcdFx0XHR1bnJlZ2lzdGVyKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIHRydWUpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHQvLyBSZWdpc3RyYXRpb24gZmFpbGVkXG5cdFx0XHRcdCAgXHRzcGlubmVyLnN0b3AoKTtcblx0XHRcdFx0ICBcdHZtLmxvYWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59KSIsImFwcC5kaXJlY3RpdmUoXCJkY2JTdGlja3lcIiwgZnVuY3Rpb24oJHdpbmRvdykge1xuXHR2YXIgJHdpbiA9IGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KTsgLy8gd3JhcCB3aW5kb3cgb2JqZWN0IGFzIGpRdWVyeSBvYmplY3RcblxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkFcIixcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG5cdCAgICAgIFx0dmFyIHRvcENsYXNzID0gYXR0cnMuZGNiU3RpY2t5LCAvLyBnZXQgQ1NTIGNsYXNzIGZyb20gZGlyZWN0aXZlJ3MgYXR0cmlidXRlIHZhbHVlXG5cdCAgICAgICAgICBcdG9mZnNldFRvcCA9IGVsZW1lbnQub2Zmc2V0KCkudG9wOyAvLyBnZXQgZWxlbWVudCdzIG9mZnNldCB0b3AgcmVsYXRpdmUgdG8gZG9jdW1lbnRcblxuXHQgICAgICBcdCR3aW4ub24oJ3Njcm9sbCcsIGZ1bmN0aW9uIChlKSB7XG5cdFx0ICAgICAgICBpZiAoJHdpbi5zY3JvbGxUb3AoKSA+PSBvZmZzZXRUb3ApIHtcblx0XHQgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyh0b3BDbGFzcyk7XG5cdFx0ICAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKHRvcENsYXNzKTtcblx0XHQgICAgICAgIH1cblx0ICAgICAgXHR9KTtcblx0ICBcdH1cblx0fVxufSkiXX0=
