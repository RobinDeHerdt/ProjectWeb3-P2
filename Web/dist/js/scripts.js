var app=angular.module("app",["ui.router","satellizer","ngCookies","ngFileUpload"]),CONSTANTS=function(){var e={};return e.API_BASE_URL="http://discoverbandapi.int/public/api",e}();app.config(["$stateProvider","$urlRouterProvider","$authProvider",function(e,r,t){t.loginUrl=CONSTANTS.API_BASE_URL+"/login",t.signupUrl=CONSTANTS.API_BASE_URL+"/register",r.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/pages/home.html",controller:"homeController as home"}).state("solo",{url:"/solo",templateUrl:"app/pages/solo.html",controller:"soloController as solo"}).state("merged",{url:"/merged",templateUrl:"app/pages/merged.html",controller:"mergedController as merged"}).state("band",{url:"/band",templateUrl:"app/pages/band.html",controller:"bandController as band"}).state("merge",{url:"/merge",templateUrl:"app/pages/merge.html",controller:"mergeController as merge"}).state("profile",{url:"/profile",templateUrl:"app/pages/profile.html",controller:"profileController as profile"}).state("upload",{url:"/upload",templateUrl:"app/pages/upload.html",controller:"uploadController as upload"})}]),app.controller("bandController",["bandService",function(e){function r(){t.trackArray=n.getTrackArray}var t=this,n=e;r()}]),app.controller("homeController",["instrumentService","filterService",function(e,r){function t(){n.filterData=a.soloFilterData}var n=this,a=r;t()}]),app.controller("mergeController",function(){function e(){}e()}),app.controller("mergedController",["$scope","mergedService","filterService",function(e,r,t){function n(){r.getTracks().then(function(e){i.mergedTracks=e.data,i.filteredTracks=i.mergedTracks,a(),angular.forEach(i.mergedTracks,function(e,r){newTrack=new Audio("dist/audio/Behemoth - Conquer All - Drum.mp3"),i.mergedTrackAudio[e.id]=newTrack})},function(e){console.log(e)})}function a(){i.filteredTracks=[],angular.forEach(i.mergedTracks,function(e,r){goodSearch=!0,""!=!i.filterData.artist||e.artist.name.match(new RegExp(i.filterData.artist,"i"))||(goodSearch=!1),""!=!i.filterData.title||e.songname.match(new RegExp(i.filterData.title,"i"))||(goodSearch=!1),goodSearch&&i.filteredTracks.push(e)})}function o(){i.mergedTrackAudio=[],i.currentAudioTrackId="",n(),i.filterData=c.mergedFilterData}var i=this,c=t;i.play=function(e){""!=i.currentAudioTrackId&&i.pause(i.currentAudioTrackId),i.currentAudioTrackId=e,i.mergedTrackAudio[e].play()},i.pause=function(e){i.mergedTrackAudio[e].pause(),i.currentAudioTrackId=""},e.$watch(function(){return i.filterData},function(){i.filterData&&a()},!0),i.track1=new Audio("dist/audio/Behemoth - Conquer All - Drum.mp3"),i.track2=new Audio("dist/audio/Behemoth - Conquer All - Guitar.mp3"),o()}]),app.controller("profileController",["userService",function(e){function r(){n.getUser().then(function(e){t.username=e.data.username,t.email=e.data.email})}var t=this,n=e,a=document.getElementById("update-profile-spinner"),o={lines:13,length:28,width:12,radius:42,scale:.15,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"89%",left:"25.5%",shadow:!1,hwaccel:!1,position:"absolute"};t.update=function(){var e=new Spinner(o).spin(a);t.loading=!0;var r={username:t.username,email:t.email};n.updateUser(r).then(function(r){e.stop(),t.loading=!1},function(r){e.stop(),t.loading=!1})},r()}]),app.controller("soloController",["$scope","bandService","soloService","instrumentService","filterService",function(e,r,t,n,a){function o(){u.getTracks().then(function(e){l.soloTracks=e.data,l.filteredTracks=l.soloTracks,i(),angular.forEach(l.soloTracks,function(e,r){newTrack=new Audio("http://discoverbandapi.int/public/audio/"+e.file_url),l.soloTrackAudio[e.id]=newTrack})},function(e){console.log(e)})}function i(){l.filteredTracks=[],angular.forEach(l.soloTracks,function(e,r){goodSearch=!0,""!=!l.filterData.artist||e.artist.name.match(new RegExp(l.filterData.artist,"i"))||(goodSearch=!1),""!=!l.filterData.title||e.songname.match(new RegExp(l.filterData.title,"i"))||(goodSearch=!1),l.filterData[e.instrument_id]||(goodSearch=!1),goodSearch&&l.filteredTracks.push(e)})}function c(){l.soloTrackAudio=[],l.currentAudioTrackId="",o(),l.instruments=d.instruments,l.filterData=p.soloFilterData,l.trackArray=s.getTrackArray,l.bandTrackIdArray=s.getTrackIdArray,l.trackArrayCount=s.getTrackArrayCount}var l=this,s=r,u=t,d=n,p=a;l.addToBand=function(e){s.addToTrackArray(e),console.log("Track added to new band: "+e)},l.removeFromBand=function(e){s.removeFromTrackArray(e),console.log("Track removed from new band: "+e)},l.play=function(e){""!=l.currentAudioTrackId&&l.pause(l.currentAudioTrackId),l.currentAudioTrackId=e,l.soloTrackAudio[e].play()},l.pause=function(e){l.soloTrackAudio[e].pause(),l.currentAudioTrackId=""},e.$watch(function(){return l.filterData},function(){l.filterData&&i()},!0),c()}]),app.controller("uploadController",["Upload","artistService","instrumentService","soloService",function(e,r,t,n){function a(){i.uploaded=!1,i.showform=!1,i.instruments=s.getInstruments().then(function(e){i.instruments=e.data,console.log(e.data)},function(e){console.log(e)}),i.artists=l.getArtists().then(function(e){console.log(e.data),i.artists=e.data},function(e){console.log(e)})}function o(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),n=t.split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(r))return o.substring(r.length,o.length)}return""}var i=this,c=n,l=r,s=t,u=document.getElementById("upload-spinner"),d={lines:13,length:28,width:12,radius:42,scale:.3,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"40%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};i.uploadFile=function(r){var t=new Spinner(d).spin(u);i.loading=!0,i.uploaded=!1,e.upload({url:CONSTANTS.API_BASE_URL+"/upload",fileFormDataName:"song",sendFieldsAs:"form",data:{song:r}}).then(function(e){i.filename=e.data.name,i.tracklength=e.data.length,t.stop(),i.loading=!1,i.uploaded=!0,i.showform=!0,$("select").material_select()},function(e){i.loading=!1,t.stop(),console.log("Error")})},i.save=function(){var e=JSON.parse(o("user")).userId,r={name:i.songname,file_url:i.filename,track_length:i.tracklength,user_id:e,instrument_id:i.instrumentsdropdown,artist_id:i.artistsdropdown};c.insertTrack(r).then(function(e){console.log(e)},function(e){console.log(e)})},a()}]),app.filter("band",function(){return function(e,r){var t=!1;return angular.forEach(r,function(r,n){r==e&&(t=!0)}),t}}),app.service("artistService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getArtists=function(){var e=CONSTANTS.API_BASE_URL+"/artists";return r(e)}}]),app.service("authService",["$auth","$rootScope","$cookies","$state","userService",function(e,r,t,n,a){function o(e,n,a,o){var c=new Date;c=c.setTime(c.getTime()+1e3*e.expires_in),c=new Date(c);var l={token:e,userId:n,username:a,email:o};i.user=l,t.putObject("user",l,{expires:c}),r.isLoggedIn=!0,"1"==l.isAdmin?r.isAdmin=!0:r.isAdmin=!1}var i=this,c=a;i.isLoggedIn=null,i.login=function(r){e.login(r).then(function(e){token=e.data.token,id=0,username="",email="",c.getUser().then(function(e){id=e.data.id,username=e.data.username,email=e.data.email,o(token,id,username,email),i.isLoggedIn=!0},function(e){console.log(e),i.isLoggedIn=!1})},function(e){console.log(e),i.isLoggedIn=!1})},i.logout=function(){e.logout().then(function(e){r.isLoggedIn=!1,r.isAdmin=!1,i.user=null,i.isLoggedIn=null,t.remove("user"),n.go("home")},function(e){console.log(e)})},i.register=function(e){var r=CONSTANTS.API_BASE_URL+"/user";return $http.post(r,e)}}]),app.service("bandService",function(){function e(){return trackArrayCount++,trackArrayCount}function r(){return trackArrayCount--,trackArrayCount}function t(e){return trackIdArray.push(e),trackIdArray}function n(e){return index=trackIdArray.indexOf(e),index>-1&&trackIdArray.splice(index,1),trackIdArray}var a=this;trackArray=[],trackIdArray=[],trackArrayCount=0,a.getTrackArrayCount=function(){return trackArrayCount},a.getTrackIdArray=function(){return trackIdArray},a.addToTrackArray=function(r){return trackArray.push(r),e(),t(r.id),trackArray},a.removeFromTrackArray=function(e){return index=e.arrayObjectIndexOf(trackArray,e.id,"id"),index>-1&&trackArray.splice(index,1),r(),n(e.id),trackArray},a.getTrackArray=function(){return trackArray},a.testFunction=function(){alert("Test function called from inside service!")}}),app.service("filterService",["instrumentService",function(e){function r(){t.createSoloFilterData(),t.createMergedFilterData()}var t=this,n=e;t.createSoloFilterData=function(){t.soloFilterData={artist:"",title:""},angular.forEach(n.instruments,function(e,r){t.soloFilterData[e.id]=!0})},t.createMergedFilterData=function(){t.mergedFilterData={artist:"",title:""}},r()}]),app.service("instrumentService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getInstruments=function(){var e=CONSTANTS.API_BASE_URL+"/instruments";return r(e)},t.instruments=[{name:"Lead-guitar",id:1},{name:"Drum",id:2},{name:"Bass",id:3},{name:"Keys",id:4}]}]),app.service("mergedService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/mergedtracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/mergedtracks/"+e;return r(t)}}]),app.service("soloService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/tracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/tracks/"+e;return r(t)},t.insertTrack=function(r){return e.post(CONSTANTS.API_BASE_URL+"/tracks/create",r)}}]),app.service("userService",["$http",function(e){var r=this;r.getUser=function(){return e.get(CONSTANTS.API_BASE_URL+"/user")},r.updateUser=function(r){return e.post(CONSTANTS.API_BASE_URL+"/user",r)}}]),app.directive("dcbBand",["bandService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-band/dcb-band.html",replace:!0,scope:{},controllerAs:"band",controller:function(){function e(){r.value="NewBand"}var r=this;e()}}}]),app.directive("dcbHeader",["bandService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-header/dcb-header.html",replace:!0,scope:{},controllerAs:"head",controller:["$scope","userService","authService","$auth","$rootScope",function(r,t,n,a,o){function i(){c.trackArray=u.getTrackArray,c.trackArrayCount=u.getTrackArrayCount,a.isAuthenticated()&&l.getUser().then(function(e){o.username=e.data.username})}var c=this,l=t,s=n,u=e;c.showLogin=function(){$("#login_modal").modal(),$("#login_modal").modal("open")},c.logout=function(){s.logout()},c.showRegister=function(){$("#register_modal").modal(),$("#register_modal").modal("open")},c.isAuthenticated=function(){return a.isAuthenticated()},i(),r.$watch(function(){return s.user},function(){c.user=s.user})}]}}]),app.directive("dcbRegister",["userService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-register/dcb-register.html",replace:!0,scope:{},controllerAs:"register",controller:["$auth","$scope","$rootScope","userService","authService",function(e,r,t,n,a){var o=this,i=a,c=document.getElementById("register-spinner"),l={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};o.register=function(){var t=new Spinner(l).spin(c);o.loading=!0;var n={username:o.username,email:o.email,password:o.password};e.signup(n).then(function(e){i.login(n);var a=r.$watch(function(){return i.isLoggedIn},function(){i.isLoggedIn&&(o.loading=!1,$("#register_modal").modal(),$("#register_modal").modal("close"),t.stop(),a()),i.isLoggedIn===!1&&(t.stop(),o.loading=!1,a())},!0)})["catch"](function(e){t.stop(),o.loading=!1,console.log(e)})}}]}}]),app.directive("dcbLogin",function(){return{restrict:"E",templateUrl:"app/directives/dcb-login/dcb-login.html",replace:!0,scope:{},controllerAs:"login",controller:["$auth","$scope","$rootScope","userService","authService","$cookies",function(e,r,t,n,a,o){var i=this,c=a,l=document.getElementById("login-spinner"),s={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};i.login=function(){var e=new Spinner(s).spin(l);i.loading=!0;var t={email:i.email,password:i.password};c.login(t);var n=r.$watch(function(){return c.isLoggedIn},function(){c.isLoggedIn&&(i.loading=!1,$("#login_modal").modal(),$("#login_modal").modal("close"),e.stop(),n()),c.isLoggedIn===!1&&(e.stop(),i.loading=!1,n())},!0)}}]}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsInJvdXRlcy5qcyIsImJhbmRDb250cm9sbGVyLmpzIiwiaG9tZUNvbnRyb2xsZXIuanMiLCJtZXJnZUNvbnRyb2xsZXIuanMiLCJtZXJnZWRDb250cm9sbGVyLmpzIiwicHJvZmlsZUNvbnRyb2xsZXIuanMiLCJzb2xvQ29udHJvbGxlci5qcyIsInVwbG9hZENvbnRyb2xsZXIuanMiLCJiYW5kRmlsdGVyLmpzIiwiYXJ0aXN0U2VydmljZS5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiYmFuZFNlcnZpY2UuanMiLCJmaWx0ZXJTZXJ2aWNlLmpzIiwiaW5zdHJ1bWVudFNlcnZpY2UuanMiLCJtZXJnZWRTZXJ2aWNlLmpzIiwic29sb1NlcnZpY2UuanMiLCJ1c2VyU2VydmljZS5qcyIsImRjYi1iYW5kL2RjYi1iYW5kLmpzIiwiZGNiLWhlYWRlci9kY2ItaGVhZGVyLmpzIiwiZGNiLXJlZ2lzdGVyL2RjYi1yZWdpc3Rlci5qcyIsImRjYi1sb2dpbi9kY2ItbG9naW4uanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsIkNPTlNUQU5UUyIsIkFQSV9CQVNFX1VSTCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGF1dGhQcm92aWRlciIsImxvZ2luVXJsIiwic2lnbnVwVXJsIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJiYW5kU2VydmljZSIsIl9pbml0Iiwidm0iLCJ0cmFja0FycmF5IiwiYmFuZFN2YyIsImdldFRyYWNrQXJyYXkiLCJ0aGlzIiwiaW5zdHJ1bWVudFNlcnZpY2UiLCJmaWx0ZXJTZXJ2aWNlIiwiZmlsdGVyRGF0YSIsImZsdFN2YyIsInNvbG9GaWx0ZXJEYXRhIiwiJHNjb3BlIiwibWVyZ2VkU2VydmljZSIsImdldE1lcmdlZFRyYWNrcyIsImdldFRyYWNrcyIsInRoZW4iLCJkYXRhIiwibWVyZ2VkVHJhY2tzIiwiZmlsdGVyZWRUcmFja3MiLCJmaWx0ZXIiLCJmb3JFYWNoIiwidHJhY2siLCJrZXkiLCJuZXdUcmFjayIsIkF1ZGlvIiwibWVyZ2VkVHJhY2tBdWRpbyIsImlkIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZ29vZFNlYXJjaCIsImFydGlzdCIsIm5hbWUiLCJtYXRjaCIsIlJlZ0V4cCIsInRpdGxlIiwic29uZ25hbWUiLCJwdXNoIiwiY3VycmVudEF1ZGlvVHJhY2tJZCIsIm1lcmdlZEZpbHRlckRhdGEiLCJwbGF5IiwidHJhY2tJZCIsInBhdXNlIiwiJHdhdGNoIiwidHJhY2sxIiwidHJhY2syIiwidXNlclNlcnZpY2UiLCJ1c2VyU3ZjIiwiZ2V0VXNlciIsInVzZXJuYW1lIiwiZW1haWwiLCJ0YXJnZXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib3B0cyIsImxpbmVzIiwibGVuZ3RoIiwid2lkdGgiLCJyYWRpdXMiLCJzY2FsZSIsImNvcm5lcnMiLCJjb2xvciIsIm9wYWNpdHkiLCJyb3RhdGUiLCJkaXJlY3Rpb24iLCJzcGVlZCIsInRyYWlsIiwiZnBzIiwiekluZGV4IiwiY2xhc3NOYW1lIiwidG9wIiwibGVmdCIsInNoYWRvdyIsImh3YWNjZWwiLCJwb3NpdGlvbiIsInVwZGF0ZSIsInNwaW5uZXIiLCJTcGlubmVyIiwic3BpbiIsImxvYWRpbmciLCJ1c2VyaW5mbyIsInVwZGF0ZVVzZXIiLCJzdG9wIiwic29sb1NlcnZpY2UiLCJnZXRTb2xvVHJhY2tzIiwic29sb1N2YyIsInNvbG9UcmFja3MiLCJmaWxlX3VybCIsInNvbG9UcmFja0F1ZGlvIiwiaW5zdHJ1bWVudF9pZCIsImluc3RydW1lbnRzIiwiaW5zdFN2YyIsImJhbmRUcmFja0lkQXJyYXkiLCJnZXRUcmFja0lkQXJyYXkiLCJ0cmFja0FycmF5Q291bnQiLCJnZXRUcmFja0FycmF5Q291bnQiLCJhZGRUb0JhbmQiLCJhZGRUb1RyYWNrQXJyYXkiLCJyZW1vdmVGcm9tQmFuZCIsInJlbW92ZUZyb21UcmFja0FycmF5IiwiVXBsb2FkIiwiYXJ0aXN0U2VydmljZSIsInVwbG9hZGVkIiwic2hvd2Zvcm0iLCJpbnN0cnVtZW50U3ZjIiwiZ2V0SW5zdHJ1bWVudHMiLCJhcnRpc3RzIiwiYXJ0aXN0U3ZjIiwiZ2V0QXJ0aXN0cyIsImdldENvb2tpZSIsImNuYW1lIiwiZGVjb2RlZENvb2tpZSIsImRlY29kZVVSSUNvbXBvbmVudCIsImNvb2tpZSIsImNhIiwic3BsaXQiLCJpIiwiYyIsImNoYXJBdCIsInN1YnN0cmluZyIsImluZGV4T2YiLCJ1cGxvYWRGaWxlIiwiZmlsZSIsInVwbG9hZCIsImZpbGVGb3JtRGF0YU5hbWUiLCJzZW5kRmllbGRzQXMiLCJzb25nIiwicmVzcCIsImZpbGVuYW1lIiwidHJhY2tsZW5ndGgiLCIkIiwibWF0ZXJpYWxfc2VsZWN0Iiwic2F2ZSIsInVzZXJfaWQiLCJKU09OIiwicGFyc2UiLCJ1c2VySWQiLCJ0cmFja19sZW5ndGgiLCJpbnN0cnVtZW50c2Ryb3Bkb3duIiwiYXJ0aXN0X2lkIiwiYXJ0aXN0c2Ryb3Bkb3duIiwiaW5zZXJ0VHJhY2siLCJsaXN0IiwicmV0dXJuVmFsdWUiLCJpbmRleCIsInNlcnZpY2UiLCIkaHR0cCIsImdldERhdGEiLCJvcHRpb25zIiwiZ2V0Iiwic3ZjIiwiJGF1dGgiLCIkcm9vdFNjb3BlIiwiJGNvb2tpZXMiLCIkc3RhdGUiLCJsb2dpbiIsInRva2VuIiwiZXhwaXJhdGlvblRpbWUiLCJEYXRlIiwic2V0VGltZSIsImdldFRpbWUiLCJ1c2VyRGF0YSIsInVzZXIiLCJwdXRPYmplY3QiLCJleHBpcmVzIiwiaXNMb2dnZWRJbiIsImlzQWRtaW4iLCJjcmVkZW50aWFscyIsImxvZ291dCIsInJlbW92ZSIsImdvIiwicmVnaXN0ZXIiLCJwb3N0IiwiaW5jcmVtZW50VHJhY2tBcnJheUNvdW50IiwiZGVjcmVtZW50VHJhY2tBcnJheUNvdW50IiwiYWRkVG9UcmFja0lkQXJyYXkiLCJ0cmFja0lkQXJyYXkiLCJyZW1vdmVGcm9tVHJhY2tJZEFycmF5Iiwic3BsaWNlIiwiYXJyYXlPYmplY3RJbmRleE9mIiwidGVzdEZ1bmN0aW9uIiwiYWxlcnQiLCJjcmVhdGVTb2xvRmlsdGVyRGF0YSIsImNyZWF0ZU1lcmdlZEZpbHRlckRhdGEiLCJ2YWx1ZSIsImdldFRyYWNrQnlJZCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwicmVwbGFjZSIsInNjb3BlIiwiY29udHJvbGxlckFzIiwiYXV0aFNlcnZpY2UiLCJpc0F1dGhlbnRpY2F0ZWQiLCJhdXRoU3ZjIiwic2hvd0xvZ2luIiwibW9kYWwiLCJzaG93UmVnaXN0ZXIiLCJwYXNzd29yZCIsInNpZ251cCIsInJlc3BvbnNlIiwidW5yZWdpc3RlciJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsS0FBTUMsUUFBUUMsT0FBTyxPQUN2QixZQUNBLGFBQ0EsWUFDQSxpQkNKRUMsVUFBYSxXQUVoQixHQUFJRCxLQUlKLE9BRkFBLEdBQU9FLGFBQWUsd0NBRWZGLElDTlJGLEtBQUlLLFFBQUEsaUJBQUEscUJBQUEsZ0JBQU8sU0FBU0MsRUFBZ0JDLEVBQW9CQyxHQUN0REEsRUFBY0MsU0FBY04sVUFBVUMsYUFBZSxTQUNyREksRUFBY0UsVUFBY1AsVUFBVUMsYUFBZSxZQUNyREcsRUFBbUJJLFVBQVUsS0FFN0JMLEVBQ0dNLE1BQU0sUUFDTEMsSUFBSyxJQUNMQyxZQUFhLHNCQUNiQyxXQUFZLDJCQUVkSCxNQUFNLFFBQ0pDLElBQUssUUFDTEMsWUFBYSxzQkFDYkMsV0FBWSwyQkFFYkgsTUFBTSxVQUNMQyxJQUFLLFVBQ0xDLFlBQWEsd0JBQ2JDLFdBQVksK0JBRWJILE1BQU0sUUFDTEMsSUFBSyxRQUNMQyxZQUFhLHNCQUNiQyxXQUFZLDJCQUViSCxNQUFNLFNBQ0xDLElBQUssU0FDTEMsWUFBYSx1QkFDYkMsV0FBWSw2QkFFYkgsTUFBTSxXQUNMQyxJQUFLLFdBQ0xDLFlBQWEseUJBQ2JDLFdBQVksaUNBRWJILE1BQU0sVUFDTEMsSUFBSyxVQUNMQyxZQUFhLHdCQUNiQyxXQUFZLGtDQ3ZDbEJmLElBQUllLFdBQVcsa0JB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QUNSQyxNQUFPLEdBQ1BDLFFBQVMsRUFDVEMsTUFBTyxPQUNQQyxRQUFTLElBQ1RDLE9BQVEsRUFDUkMsVUFBVyxFQUNYQyxNQUFPLEVBQ1BDLE1BQU8sR0FDUEMsSUFBSyxHQUNMQyxPQUFRLElBQ1JDLFVBQVcsVUFDWEMsSUFBSyxNQUNMQyxLQUFNLE1BQ05DLFFBQVEsRUFDUkMsU0FBUyxFQUNUQyxTQUFVLFdBZ0NQekUsR0FBRzBKLE1BQVEsV0FDVixHQUFJL0UsR0FBVSxHQUFJQyxTQUFRdkIsR0FBTXdCLEtBQUszQixFQUNyQ2xELEdBQUc4RSxTQUFXLENBRVgsSUFBSXdGLElBQ0FySCxNQUFPakQsRUFBR2lELE1BQ1ZtSixTQUFVcE0sRUFBR29NLFNBR2pCSixHQUFRdEMsTUFBTVksRUFHdkIsSUFBSWlDLEdBQWE3TCxFQUFPZ0MsT0FDdkIsV0FBYyxNQUFPc0osR0FBUTVCLFlBQzdCLFdBRUk0QixFQUFRNUIsYUFFVnBLLEVBQUc4RSxTQUFVLEVBQ1BtRCxFQUFFLGdCQUFnQmlFLFFBQ3hCakUsRUFBRSxnQkFBZ0JpRSxNQUFNLFNBQ2xCdkgsRUFBUU0sT0FDUnNILEtBRUpQLEVBQVE1QixjQUFlLElBRXpCekYsRUFBUU0sT0FDRmpGLEVBQUc4RSxTQUFVLEVBQ2J5SCxPQUVMIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIiwgW1xyXG5cdFx0XCJ1aS5yb3V0ZXJcIixcclxuXHRcdFwic2F0ZWxsaXplclwiLFxyXG5cdFx0XCJuZ0Nvb2tpZXNcIixcclxuXHRcdFwibmdGaWxlVXBsb2FkXCJcclxuXHRdKTsiLCJ2YXIgQ09OU1RBTlRTID0gKGZ1bmN0aW9uICgpIHtcclxuXHRcclxuXHR2YXIgbW9kdWxlID0ge307XHJcblxyXG5cdG1vZHVsZS5BUElfQkFTRV9VUkwgPSBcImh0dHA6Ly9kaXNjb3ZlcmJhbmRhcGkuaW50L3B1YmxpYy9hcGlcIjtcclxuXHJcblx0cmV0dXJuIG1vZHVsZTtcclxufSgpKTsiLCJhcHAuY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRhdXRoUHJvdmlkZXIpIHtcclxuICAkYXV0aFByb3ZpZGVyLmxvZ2luVXJsICAgID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArICcvbG9naW4nO1xyXG4gICRhdXRoUHJvdmlkZXIuc2lnbnVwVXJsICAgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgJy9yZWdpc3Rlcic7XHJcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9cIik7XHJcblxyXG4gICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAuc3RhdGUoJ2hvbWUnLCB7XHJcbiAgICAgIHVybDogXCIvXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9ob21lLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogXCJob21lQ29udHJvbGxlciBhcyBob21lXCJcclxuICAgIH0pXHJcbiAgXHQuc3RhdGUoJ3NvbG8nLCB7XHJcbiAgICAgIHVybDogXCIvc29sb1wiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvc29sby5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwic29sb0NvbnRyb2xsZXIgYXMgc29sb1wiXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKCdtZXJnZWQnLCB7XHJcbiAgICAgIHVybDogXCIvbWVyZ2VkXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9wYWdlcy9tZXJnZWQuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcIm1lcmdlZENvbnRyb2xsZXIgYXMgbWVyZ2VkXCJcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoJ2JhbmQnLCB7XHJcbiAgICAgIHVybDogXCIvYmFuZFwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvYmFuZC5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6IFwiYmFuZENvbnRyb2xsZXIgYXMgYmFuZFwiXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKCdtZXJnZScsIHtcclxuICAgICAgdXJsOiBcIi9tZXJnZVwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvbWVyZ2UuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcIm1lcmdlQ29udHJvbGxlciBhcyBtZXJnZVwiXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKCdwcm9maWxlJywge1xyXG4gICAgICB1cmw6IFwiL3Byb2ZpbGVcIixcclxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL3Byb2ZpbGUuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiBcInByb2ZpbGVDb250cm9sbGVyIGFzIHByb2ZpbGVcIlxyXG4gICAgfSlcclxuICAgIC5zdGF0ZSgndXBsb2FkJywge1xyXG4gICAgICB1cmw6IFwiL3VwbG9hZFwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvdXBsb2FkLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogXCJ1cGxvYWRDb250cm9sbGVyIGFzIHVwbG9hZFwiXHJcbiAgICB9KVxyXG59KTsiLCJhcHAuY29udHJvbGxlcihcImJhbmRDb250cm9sbGVyXCIsIGZ1bmN0aW9uKGJhbmRTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHR2YXIgYmFuZFN2YyA9IGJhbmRTZXJ2aWNlO1xyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdHZtLnRyYWNrQXJyYXkgPSBiYW5kU3ZjLmdldFRyYWNrQXJyYXk7XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuY29udHJvbGxlcihcImhvbWVDb250cm9sbGVyXCIsIGZ1bmN0aW9uKGluc3RydW1lbnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHR2YXIgaW5zdFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xyXG5cdHZhciBmbHRTdmMgPSBmaWx0ZXJTZXJ2aWNlO1xyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdC8vaW5zdFN2Yy5nZXRJbnN0cnVtZW50cygpO1xyXG5cclxuXHRcdHZtLmZpbHRlckRhdGEgPSBmbHRTdmMuc29sb0ZpbHRlckRhdGE7XHJcblx0fVxyXG5cclxuXHRfaW5pdCgpO1xyXG59KTsiLCJhcHAuY29udHJvbGxlcihcIm1lcmdlQ29udHJvbGxlclwiLCBmdW5jdGlvbigpIHtcclxuXHR2YXIgdm0gPSB0aGlzO1xyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdFxyXG5cdH1cclxuXHJcblx0X2luaXQoKTtcclxufSk7IiwiYXBwLmNvbnRyb2xsZXIoXCJtZXJnZWRDb250cm9sbGVyXCIsIGZ1bmN0aW9uKCRzY29wZSwgbWVyZ2VkU2VydmljZSwgZmlsdGVyU2VydmljZSkge1xyXG5cdFxyXG5cdHZhciB2bSAgXHRcdD0gdGhpcztcclxuXHR2YXIgbWdkU3ZjIFx0XHQ9IG1lcmdlZFNlcnZpY2U7XHJcblx0dmFyIGZsdFN2YyBcdFx0PSBmaWx0ZXJTZXJ2aWNlO1xyXG5cclxuXHQvL1ByaXZhdGUgZnVuY3Rpb25zXHJcblx0ZnVuY3Rpb24gcGxheUF1ZGlvRmlsZSh0cmFjaylcclxuXHR7XHJcblx0XHR0cmFjay5wbGF5KCk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBnZXRNZXJnZWRUcmFja3MoKSB7XHJcblx0XHRtZXJnZWRTZXJ2aWNlLmdldFRyYWNrcygpXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2bS5tZXJnZWRUcmFja3MgPSBkYXRhLmRhdGE7XHJcblx0XHRcdFx0dm0uZmlsdGVyZWRUcmFja3MgPSB2bS5tZXJnZWRUcmFja3M7XHJcblx0XHRcdFx0ZmlsdGVyKCk7XHJcblxyXG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5tZXJnZWRUcmFja3MsIGZ1bmN0aW9uKHRyYWNrLCBrZXkpIHtcclxuXHRcdFx0XHRcdFx0Ly9uZXdUcmFjayA9IG5ldyBBdWRpbyh0cmFjay5maWxlX3VybCk7XHJcblx0XHRcdFx0XHRcdG5ld1RyYWNrID0gbmV3IEF1ZGlvKFwiZGlzdC9hdWRpby9CZWhlbW90aCAtIENvbnF1ZXIgQWxsIC0gRHJ1bS5tcDNcIik7XHJcblx0XHRcdFx0XHRcdHZtLm1lcmdlZFRyYWNrQXVkaW9bdHJhY2suaWRdID0gbmV3VHJhY2s7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGZpbHRlcigpIHtcclxuXHRcdFxyXG5cdFx0dm0uZmlsdGVyZWRUcmFja3MgPSBbXTtcclxuXHJcblx0XHRhbmd1bGFyLmZvckVhY2godm0ubWVyZ2VkVHJhY2tzLCBmdW5jdGlvbih0cmFjaywga2V5KSB7XHJcblxyXG5cdFx0XHRnb29kU2VhcmNoID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhLmFydGlzdCA9PSBcIlwiICYmICF0cmFjay5hcnRpc3QubmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEuYXJ0aXN0LCBcImlcIikpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS50aXRsZSA9PSBcIlwiICYmICF0cmFjay5zb25nbmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEudGl0bGUsIFwiaVwiKSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblxyXG5cdFx0XHRpZihnb29kU2VhcmNoKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dm0uZmlsdGVyZWRUcmFja3MucHVzaCh0cmFjayk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdHZtLm1lcmdlZFRyYWNrQXVkaW8gPSBbXTtcclxuXHRcdHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgPSBcIlwiO1xyXG5cclxuXHRcdGdldE1lcmdlZFRyYWNrcygpO1xyXG5cdFx0dm0uZmlsdGVyRGF0YSA9IGZsdFN2Yy5tZXJnZWRGaWx0ZXJEYXRhO1xyXG5cdH1cclxuXHJcblx0Ly9WbSBmdW5jdGlvbnNcclxuXHR2bS5wbGF5ID0gZnVuY3Rpb24odHJhY2tJZCkge1xyXG5cclxuXHRcdGlmKHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgIT0gXCJcIikge1xyXG5cdFx0XHR2bS5wYXVzZSh2bS5jdXJyZW50QXVkaW9UcmFja0lkKTtcclxuXHRcdH1cclxuXHJcblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkID0gdHJhY2tJZDtcclxuXHRcdHZtLm1lcmdlZFRyYWNrQXVkaW9bdHJhY2tJZF0ucGxheSgpO1xyXG5cdH1cclxuXHJcblx0dm0ucGF1c2UgPSBmdW5jdGlvbih0cmFja0lkKSB7XHJcblx0XHR2bS5tZXJnZWRUcmFja0F1ZGlvW3RyYWNrSWRdLnBhdXNlKCk7XHJcblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkID0gXCJcIjtcclxuXHR9XHJcblxyXG5cdC8vV2F0Y2hlc1xyXG5cdCRzY29wZS4kd2F0Y2goXHJcblx0XHRmdW5jdGlvbiAoKSB7IHJldHVybiB2bS5maWx0ZXJEYXRhIH0sIFxyXG5cdFx0ZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0aWYodm0uZmlsdGVyRGF0YSkgXHJcblx0XHRcdHtcclxuXHRcdFx0XHRmaWx0ZXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgdHJ1ZSk7XHJcblxyXG5cclxuXHJcblx0dm0udHJhY2sxID0gbmV3IEF1ZGlvKFwiZGlzdC9hdWRpby9CZWhlbW90aCAtIENvbnF1ZXIgQWxsIC0gRHJ1bS5tcDNcIik7XHJcblx0dm0udHJhY2syID0gbmV3IEF1ZGlvKFwiZGlzdC9hdWRpby9CZWhlbW90aCAtIENvbnF1ZXIgQWxsIC0gR3VpdGFyLm1wM1wiKTtcclxuXHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwicHJvZmlsZUNvbnRyb2xsZXJcIiwgZnVuY3Rpb24odXNlclNlcnZpY2UpIHtcclxuXHRcclxuXHR2YXIgdm0gXHRcdD0gdGhpcztcclxuXHR2YXIgdXNlclN2YyA9IHVzZXJTZXJ2aWNlO1xyXG5cdHZhciB0YXJnZXQgXHQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGRhdGUtcHJvZmlsZS1zcGlubmVyJyk7XHJcblxyXG5cdHZhciBvcHRzID0ge1xyXG5cdFx0XHRsaW5lczogMTMgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XHJcblx0XHQsIGxlbmd0aDogMjggLy8gVGhlIGxlbmd0aCBvZiBlYWNoIGxpbmVcclxuXHRcdCwgd2lkdGg6IDEyIC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xyXG5cdFx0LCByYWRpdXM6IDQyIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxyXG5cdFx0LCBzY2FsZTogMC4xNSAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXHJcblx0XHQsIGNvcm5lcnM6IDEgLy8gQ29ybmVyIHJvdW5kbmVzcyAoMC4uMSlcclxuXHRcdCwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXHJcblx0XHQsIG9wYWNpdHk6IDAuMjUgLy8gT3BhY2l0eSBvZiB0aGUgbGluZXNcclxuXHRcdCwgcm90YXRlOiAwIC8vIFRoZSByb3RhdGlvbiBvZmZzZXRcclxuXHRcdCwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcclxuXHRcdCwgc3BlZWQ6IDEgLy8gUm91bmRzIHBlciBzZWNvbmRcclxuXHRcdCwgdHJhaWw6IDYwIC8vIEFmdGVyZ2xvdyBwZXJjZW50YWdlXHJcblx0XHQsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXHJcblx0XHQsIHpJbmRleDogMmU5IC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxyXG5cdFx0LCBjbGFzc05hbWU6ICdzcGlubmVyJyAvLyBUaGUgQ1NTIGNsYXNzIHRvIGFzc2lnbiB0byB0aGUgc3Bpbm5lclxyXG5cdFx0LCB0b3A6ICc4OSUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdCwgbGVmdDogJzI1LjUlJyAvLyBMZWZ0IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxyXG5cdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XHJcblx0XHQsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxyXG5cdFx0LCBwb3NpdGlvbjogJ2Fic29sdXRlJyAvLyBFbGVtZW50IHBvc2l0aW9uaW5nXHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdHVzZXJTdmMuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0dm0udXNlcm5hbWUgPSBkYXRhLmRhdGEudXNlcm5hbWU7XHJcblx0XHRcdHZtLmVtYWlsIFx0PSBkYXRhLmRhdGEuZW1haWw7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNwaW5uZXIgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XHJcblx0ICAgIHZtLmxvYWRpbmcgXHQ9IHRydWU7XHJcblxyXG5cdFx0dmFyIHVzZXJpbmZvID0ge1xyXG4gICAgICAgICAgICB1c2VybmFtZTogdm0udXNlcm5hbWUsXHJcbiAgICAgICAgICAgIGVtYWlsOiB2bS5lbWFpbFxyXG4gICAgICAgIH1cclxuXHJcblx0XHR1c2VyU3ZjLnVwZGF0ZVVzZXIodXNlcmluZm8pXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRzcGlubmVyLnN0b3AoKTtcclxuXHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0c3Bpbm5lci5zdG9wKCk7XHJcblx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdF9pbml0KCk7XHJcbn0pOyIsImFwcC5jb250cm9sbGVyKFwic29sb0NvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCBiYW5kU2VydmljZSwgc29sb1NlcnZpY2UsIGluc3RydW1lbnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHZtID0gdGhpcztcclxuXHR2YXIgYmFuZFN2YyA9IGJhbmRTZXJ2aWNlO1xyXG5cdHZhciBzb2xvU3ZjID0gc29sb1NlcnZpY2U7XHJcblx0dmFyIGluc3RTdmMgPSBpbnN0cnVtZW50U2VydmljZTtcclxuXHR2YXIgZmx0U3ZjID0gZmlsdGVyU2VydmljZTtcclxuXHJcblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xyXG5cdGZ1bmN0aW9uIHBsYXlBdWRpb0ZpbGUodHJhY2spXHJcblx0e1xyXG5cdFx0dHJhY2sucGxheSgpO1xyXG5cdH1cclxuXHJcblx0ZnVuY3Rpb24gZ2V0U29sb1RyYWNrcygpXHJcblx0e1xyXG5cdFx0c29sb1N2Yy5nZXRUcmFja3MoKVxyXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dm0uc29sb1RyYWNrcyA9IGRhdGEuZGF0YTtcclxuXHRcdFx0XHR2bS5maWx0ZXJlZFRyYWNrcyA9IHZtLnNvbG9UcmFja3M7XHJcblx0XHRcdFx0ZmlsdGVyKCk7XHJcblxyXG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5zb2xvVHJhY2tzLCBmdW5jdGlvbih0cmFjaywga2V5KSB7XHJcblx0XHRcdFx0XHRcdC8vbmV3VHJhY2sgPSBuZXcgQXVkaW8odHJhY2suZmlsZV91cmwpO1xyXG5cdFx0XHRcdFx0XHRuZXdUcmFjayA9IG5ldyBBdWRpbygnaHR0cDovL2Rpc2NvdmVyYmFuZGFwaS5pbnQvcHVibGljL2F1ZGlvLycgKyB0cmFjay5maWxlX3VybCk7XHJcblx0XHRcdFx0XHRcdHZtLnNvbG9UcmFja0F1ZGlvW3RyYWNrLmlkXSA9IG5ld1RyYWNrO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG5cclxuXHRmdW5jdGlvbiBmaWx0ZXIoKVxyXG5cdHtcclxuXHRcdHZtLmZpbHRlcmVkVHJhY2tzID0gW107XHJcblxyXG5cdFx0YW5ndWxhci5mb3JFYWNoKHZtLnNvbG9UcmFja3MsIGZ1bmN0aW9uKHRyYWNrLCBrZXkpXHJcblx0XHR7XHJcblx0XHRcdC8vY29uc29sZS5sb2codHJhY2spO1xyXG5cdFx0XHRnb29kU2VhcmNoID0gdHJ1ZTtcclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhLmFydGlzdCA9PSBcIlwiICYmICF0cmFjay5hcnRpc3QubmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEuYXJ0aXN0LCBcImlcIikpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZighdm0uZmlsdGVyRGF0YS50aXRsZSA9PSBcIlwiICYmICF0cmFjay5zb25nbmFtZS5tYXRjaChuZXcgUmVnRXhwKHZtLmZpbHRlckRhdGEudGl0bGUsIFwiaVwiKSkpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhW3RyYWNrLmluc3RydW1lbnRfaWRdKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Z29vZFNlYXJjaCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0aWYoZ29vZFNlYXJjaClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZtLmZpbHRlcmVkVHJhY2tzLnB1c2godHJhY2spO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vY29uc29sZS5sb2codm0uZmlsdGVyZWRUcmFja3MpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKmZ1bmN0aW9uIGFycmF5T2JqZWN0SW5kZXhPZihteUFycmF5LCBzZWFyY2hUZXJtLCBwcm9wZXJ0eSkge1xyXG4gICAgXHRcclxuICAgIFx0Zm9yKHZhciBpID0gMCwgbGVuID0gbXlBcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIFx0aWYgKG15QXJyYXlbaV1bcHJvcGVydHldID09PSBzZWFyY2hUZXJtKSByZXR1cm4gaTtcclxuICAgIFx0fVxyXG5cclxuICAgIFx0cmV0dXJuIC0xO1xyXG5cdH0qL1xyXG5cclxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdHZtLnNvbG9UcmFja0F1ZGlvID0gW107XHJcblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkID0gXCJcIjtcclxuXHJcblx0XHRnZXRTb2xvVHJhY2tzKCk7XHJcblx0XHR2bS5pbnN0cnVtZW50cyA9IGluc3RTdmMuaW5zdHJ1bWVudHM7XHJcblx0XHR2bS5maWx0ZXJEYXRhID0gZmx0U3ZjLnNvbG9GaWx0ZXJEYXRhO1xyXG5cdFx0dm0udHJhY2tBcnJheSA9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheTtcclxuXHRcdHZtLmJhbmRUcmFja0lkQXJyYXkgPSBiYW5kU3ZjLmdldFRyYWNrSWRBcnJheTtcclxuXHRcdHZtLnRyYWNrQXJyYXlDb3VudCA9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheUNvdW50O1xyXG5cclxuXHRcdC8qYW5ndWxhci5mb3JFYWNoKGJhbmRTdmMudHJhY2tBcnJheSwgZnVuY3Rpb24odHJhY2ssIGtleSkge1xyXG5cdFx0XHR2bS5iYW5kVHJhY2tJZEFycmF5LnB1c2godHJhY2suaWQpO1xyXG5cdFx0fSk7Ki9cclxuXHJcblx0XHQvL3ZtLnRyYWNrMS5wbGF5KCk7XHJcblx0XHQvL3NldFRpbWVvdXQoZnVuY3Rpb24oKXtwbGF5QXVkaW9GaWxlKHZtLnRyYWNrMil9LCA0MDApO1xyXG5cdH1cclxuXHJcblx0Ly9WbSBmdW5jdGlvbnNcclxuXHR2bS5hZGRUb0JhbmQgPSBmdW5jdGlvbih0cmFjaykge1xyXG5cclxuXHRcdGJhbmRTdmMuYWRkVG9UcmFja0FycmF5KHRyYWNrKTtcclxuXHRcdC8qdm0uYmFuZFRyYWNrSWRBcnJheSA9IFtdO1xyXG5cclxuXHRcdGJhbmRTdmMudHJhY2tBcnJheS5wdXNoKHRyYWNrKTtcclxuXHRcdGJhbmRTdmMudHJhY2tBcnJheUNvdW50ICsrO1xyXG5cdFx0YW5ndWxhci5mb3JFYWNoKGJhbmRTdmMudHJhY2tBcnJheSwgZnVuY3Rpb24odHJhY2ssIGtleSkge1xyXG5cdFx0XHR2bS5iYW5kVHJhY2tJZEFycmF5LnB1c2godHJhY2suaWQpO1xyXG5cdFx0fSk7Ki9cclxuXHJcblx0XHRjb25zb2xlLmxvZyhcIlRyYWNrIGFkZGVkIHRvIG5ldyBiYW5kOiBcIiArIHRyYWNrKTtcclxuXHRcdC8vY29uc29sZS5sb2coYmFuZFN2Yy50cmFja0FycmF5KTtcclxuXHRcdC8vY29uc29sZS5sb2codm0uYmFuZFRyYWNrSWRBcnJheSk7XHJcblx0XHQvL2NvbnNvbGUubG9nKHZtLnRyYWNrQXJyYXlDb3VudCgpKTtcclxuXHRcdC8vY29uc29sZS5sb2codm0uYmFuZFRyYWNrSWRBcnJheSgpKTtcclxuXHR9XHJcblxyXG5cdHZtLnJlbW92ZUZyb21CYW5kID0gZnVuY3Rpb24odHJhY2spIHtcclxuXHRcdFxyXG5cdFx0YmFuZFN2Yy5yZW1vdmVGcm9tVHJhY2tBcnJheSh0cmFjayk7XHJcblx0XHQvKmluZGV4ID0gYXJyYXlPYmplY3RJbmRleE9mKGJhbmRTdmMudHJhY2tBcnJheSwgdHJhY2suaWQsIFwiaWRcIik7XHJcblx0XHRpZiAoaW5kZXggPiAtMSkge1xyXG5cdFx0XHRiYW5kU3ZjLnRyYWNrQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdFx0YmFuZFN2Yy50cmFja0FycmF5Q291bnQgLS07XHJcblx0XHRcdHZtLmJhbmRUcmFja0FycmF5ID0gYmFuZFN2Yy50cmFja0FycmF5O1xyXG5cclxuXHRcdFx0aW50SW5kZXggPSB2bS5iYW5kVHJhY2tJZEFycmF5LmluZGV4T2YodHJhY2suaWQpO1xyXG5cdFx0XHRpZiAoaW50SW5kZXggPiAtMSkge1xyXG5cdFx0XHRcdHZtLmJhbmRUcmFja0lkQXJyYXkuc3BsaWNlKGludEluZGV4LCAxKTtcclxuXHRcdFx0fVxyXG5cdFx0fSovXHJcblxyXG5cdFx0Y29uc29sZS5sb2coXCJUcmFjayByZW1vdmVkIGZyb20gbmV3IGJhbmQ6IFwiICsgdHJhY2spO1xyXG5cdFx0Ly9jb25zb2xlLmxvZyhiYW5kU3ZjLnRyYWNrQXJyYXkpO1xyXG5cdH1cclxuXHJcblx0dm0ucGxheSA9IGZ1bmN0aW9uKHRyYWNrSWQpIHtcclxuXHJcblx0XHRpZih2bS5jdXJyZW50QXVkaW9UcmFja0lkICE9IFwiXCIpIHtcclxuXHRcdFx0dm0ucGF1c2Uodm0uY3VycmVudEF1ZGlvVHJhY2tJZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dm0uY3VycmVudEF1ZGlvVHJhY2tJZCA9IHRyYWNrSWQ7XHJcblx0XHR2bS5zb2xvVHJhY2tBdWRpb1t0cmFja0lkXS5wbGF5KCk7XHJcblx0fVxyXG5cclxuXHR2bS5wYXVzZSA9IGZ1bmN0aW9uKHRyYWNrSWQpIHtcclxuXHRcdHZtLnNvbG9UcmFja0F1ZGlvW3RyYWNrSWRdLnBhdXNlKCk7XHJcblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkID0gXCJcIjtcclxuXHR9XHJcblxyXG5cdC8vV2F0Y2hlc1xyXG5cdCRzY29wZS4kd2F0Y2goXHJcblx0XHRmdW5jdGlvbiAoKSB7IHJldHVybiB2bS5maWx0ZXJEYXRhIH0sIFxyXG5cdFx0ZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0aWYodm0uZmlsdGVyRGF0YSkgXHJcblx0XHRcdHtcclxuXHRcdFx0XHRmaWx0ZXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgdHJ1ZSk7XHJcblxyXG5cclxuXHJcblx0Ly92bS50cmFjazEgPSBuZXcgQXVkaW8oJ2h0dHA6Ly9kaXNjb3ZlcmJhbmRhcGkuaW50L3B1YmxpYy9hdWRpby9kcnVtLndhdicpO1xyXG5cdC8vdm0udHJhY2syID0gbmV3IEF1ZGlvKCdodHRwOi8vZGlzY292ZXJiYW5kYXBpLmludC9wdWJsaWMvYXVkaW8vZ3VpdGFyLndhdicpO1xyXG5cclxuXHJcblx0X2luaXQoKTtcclxufSk7IiwiYXBwLmNvbnRyb2xsZXIoXCJ1cGxvYWRDb250cm9sbGVyXCIsIGZ1bmN0aW9uKFVwbG9hZCwgYXJ0aXN0U2VydmljZSwgaW5zdHJ1bWVudFNlcnZpY2UsIHNvbG9TZXJ2aWNlKSB7XHJcbiAgXHJcbiAgdmFyIHZtICAgICAgICAgICAgPSB0aGlzO1xyXG4gIHZhciBzb2xvU3ZjICAgICAgID0gc29sb1NlcnZpY2U7XHJcbiAgdmFyIGFydGlzdFN2YyAgICAgPSBhcnRpc3RTZXJ2aWNlO1xyXG4gIHZhciBpbnN0cnVtZW50U3ZjID0gaW5zdHJ1bWVudFNlcnZpY2U7XHJcbiAgdmFyIHRhcmdldCAgICAgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBsb2FkLXNwaW5uZXInKTtcclxuICBcclxuICB2YXIgb3B0cyA9IHtcclxuICAgICAgbGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xyXG4gICAgLCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXHJcbiAgICAsIHdpZHRoOiAxMiAvLyBUaGUgbGluZSB0aGlja25lc3NcclxuICAgICwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcclxuICAgICwgc2NhbGU6IDAuMzAgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxyXG4gICAgLCBjb3JuZXJzOiAxIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXHJcbiAgICAsIGNvbG9yOiAnIzAwMCcgLy8gI3JnYiBvciAjcnJnZ2JiIG9yIGFycmF5IG9mIGNvbG9yc1xyXG4gICAgLCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXHJcbiAgICAsIHJvdGF0ZTogMCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XHJcbiAgICAsIGRpcmVjdGlvbjogMSAvLyAxOiBjbG9ja3dpc2UsIC0xOiBjb3VudGVyY2xvY2t3aXNlXHJcbiAgICAsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXHJcbiAgICAsIHRyYWlsOiA2MCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxyXG4gICAgLCBmcHM6IDIwIC8vIEZyYW1lcyBwZXIgc2Vjb25kIHdoZW4gdXNpbmcgc2V0VGltZW91dCgpIGFzIGEgZmFsbGJhY2sgZm9yIENTU1xyXG4gICAgLCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcclxuICAgICwgY2xhc3NOYW1lOiAnc3Bpbm5lcicgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcclxuICAgICwgdG9wOiAnNDAlJyAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcbiAgICAsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcbiAgICAsIHNoYWRvdzogZmFsc2UgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcclxuICAgICwgaHdhY2NlbDogZmFsc2UgLy8gV2hldGhlciB0byB1c2UgaGFyZHdhcmUgYWNjZWxlcmF0aW9uXHJcbiAgICAsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xyXG4gICAgICB2bS51cGxvYWRlZCAgICAgICA9IGZhbHNlO1xyXG4gICAgICB2bS5zaG93Zm9ybSAgICAgICA9IGZhbHNlO1xyXG5cclxuICAgICAgdm0uaW5zdHJ1bWVudHMgICAgPSBpbnN0cnVtZW50U3ZjLmdldEluc3RydW1lbnRzKClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSlcclxuICAgICAge1xyXG4gICAgICAgIHZtLmluc3RydW1lbnRzICA9IGRhdGEuZGF0YTtcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpO1xyXG4gICAgICB9LCBmdW5jdGlvbihlcnJvcilcclxuICAgICAge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB2bS5hcnRpc3RzICAgICAgICA9IGFydGlzdFN2Yy5nZXRBcnRpc3RzKClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSlcclxuICAgICAge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSk7XHJcbiAgICAgICAgdm0uYXJ0aXN0cyAgICAgID0gZGF0YS5kYXRhO1xyXG4gICAgICBcclxuICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpXHJcbiAgICAgIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgdm0udXBsb2FkRmlsZSA9IGZ1bmN0aW9uIChmaWxlKSB7XHJcbiAgICAgICAgdmFyIHNwaW5uZXIgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XHJcbiAgICAgICAgdm0ubG9hZGluZyAgPSB0cnVlO1xyXG4gICAgICAgIHZtLnVwbG9hZGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIFVwbG9hZC51cGxvYWQoe1xyXG4gICAgICAgICAgICB1cmw6IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi91cGxvYWRcIixcclxuICAgICAgICAgICAgZmlsZUZvcm1EYXRhTmFtZTogJ3NvbmcnLFxyXG4gICAgICAgICAgICBzZW5kRmllbGRzQXM6ICdmb3JtJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgIHNvbmc6IGZpbGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcclxuICAgICAgICAgICAgdm0uZmlsZW5hbWUgICAgID0gcmVzcC5kYXRhLm5hbWU7XHJcbiAgICAgICAgICAgIHZtLnRyYWNrbGVuZ3RoICA9IHJlc3AuZGF0YS5sZW5ndGg7XHJcbiAgICAgICAgICAgIHNwaW5uZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICB2bS5sb2FkaW5nICAgICAgPSBmYWxzZTtcclxuICAgICAgICAgICAgdm0udXBsb2FkZWQgICAgID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgZm9ybVxyXG4gICAgICAgICAgICB2bS5zaG93Zm9ybSAgICAgPSB0cnVlO1xyXG4gICAgICAgICAgICAkKCdzZWxlY3QnKS5tYXRlcmlhbF9zZWxlY3QoKTtcclxuICAgICAgICB9LCBcclxuICAgICAgICBmdW5jdGlvbiAocmVzcCkge1xyXG4gICAgICAgICAgICB2bS5sb2FkaW5nICA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzcGlubmVyLnN0b3AoKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZhciB1c2VyX2lkID0gSlNPTi5wYXJzZShnZXRDb29raWUoJ3VzZXInKSkudXNlcklkO1xyXG4gICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgbmFtZTogdm0uc29uZ25hbWUsXHJcbiAgICAgICAgICAgIGZpbGVfdXJsOiB2bS5maWxlbmFtZSxcclxuICAgICAgICAgICAgdHJhY2tfbGVuZ3RoOiB2bS50cmFja2xlbmd0aCxcclxuICAgICAgICAgICAgdXNlcl9pZDogdXNlcl9pZCxcclxuICAgICAgICAgICAgaW5zdHJ1bWVudF9pZDogdm0uaW5zdHJ1bWVudHNkcm9wZG93bixcclxuICAgICAgICAgICAgYXJ0aXN0X2lkIDogdm0uYXJ0aXN0c2Ryb3Bkb3duXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgc29sb1N2Yy5pbnNlcnRUcmFjayhkYXRhKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldENvb2tpZShjbmFtZSkge1xyXG4gICAgICAgICAgdmFyIG5hbWUgPSBjbmFtZSArIFwiPVwiO1xyXG4gICAgICAgICAgdmFyIGRlY29kZWRDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTtcclxuICAgICAgICAgIHZhciBjYSA9IGRlY29kZWRDb29raWUuc3BsaXQoJzsnKTtcclxuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPGNhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGMgPSBjYVtpXTtcclxuICAgICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSB7XHJcbiAgICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICB9XHJcbiAgX2luaXQoKTtcclxufSk7IiwiYXBwLmZpbHRlcihcImJhbmRcIiwgZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIGZ1bmN0aW9uKHRyYWNrSWQsIGxpc3QpIHtcclxuXHRcdHZhciByZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG5cdFx0XHJcblx0XHRhbmd1bGFyLmZvckVhY2gobGlzdCwgZnVuY3Rpb24oaWQsIGluZGV4KSB7XHJcblx0XHRcdGlmKGlkID09IHRyYWNrSWQpIHtcclxuXHRcdFx0XHRyZXR1cm5WYWx1ZSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdH1cclxufSk7IiwiYXBwLnNlcnZpY2UoXCJhcnRpc3RTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblx0XHJcblx0Ly9HbG9iYWxzXHJcblx0dmFyIHN2YyBcdFx0XHQ9IHRoaXM7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBnZXREYXRhICh1cmwsIG9wdGlvbnMpIHtcclxuXHJcblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XHJcblxyXG5cdFx0cmV0dXJuICRodHRwLmdldCh1cmwsIG9wdGlvbnMpXHJcblx0fVxyXG5cclxuXHQvL1N2YyBmdW5jdGlvbnNcclxuXHRzdmMuZ2V0QXJ0aXN0cyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL2FydGlzdHNcIjtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcclxuXHR9XHJcbn0pIiwiYXBwLnNlcnZpY2UoXCJhdXRoU2VydmljZVwiLCBmdW5jdGlvbiAoJGF1dGgsICRyb290U2NvcGUsICRjb29raWVzLCAkc3RhdGUsIHVzZXJTZXJ2aWNlKSB7XHJcblx0XHJcblx0dmFyIHN2YyBcdFx0PSB0aGlzO1xyXG5cdHZhciB1c2VyU3ZjIFx0PSB1c2VyU2VydmljZTtcclxuXHJcblx0c3ZjLmlzTG9nZ2VkSW4gXHQ9IG51bGw7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBsb2dpbiAodG9rZW4sIGlkLCB1c2VybmFtZSwgZW1haWwpIHtcclxuXHJcblx0XHR2YXIgZXhwaXJhdGlvblRpbWUgPSBuZXcgRGF0ZSgpO1xyXG5cdFx0ZXhwaXJhdGlvblRpbWUgPSBleHBpcmF0aW9uVGltZS5zZXRUaW1lKGV4cGlyYXRpb25UaW1lLmdldFRpbWUoKSArICh0b2tlbltcImV4cGlyZXNfaW5cIl0gKiAxMDAwKSk7XHJcblx0XHRleHBpcmF0aW9uVGltZSA9IG5ldyBEYXRlKGV4cGlyYXRpb25UaW1lKTtcclxuXHJcblx0XHR2YXIgdXNlckRhdGEgPSB7XHJcblxyXG5cdFx0XHR0b2tlbjogdG9rZW4sXHJcblx0XHRcdHVzZXJJZDogaWQsXHJcblx0XHRcdHVzZXJuYW1lOiB1c2VybmFtZSxcclxuXHRcdFx0ZW1haWw6IGVtYWlsLFxyXG5cdFx0XHQvL2lzQWRtaW46IGRhdGEuZGF0YS5pc0FkbWluXHJcblx0XHR9XHJcblxyXG5cdFx0Ly9jb25zb2xlLmxvZyh1c2VyRGF0YS50b2tlbik7XHJcblxyXG5cdFx0c3ZjLnVzZXIgPSB1c2VyRGF0YTtcclxuXHJcblx0XHQkY29va2llcy5wdXRPYmplY3QoXCJ1c2VyXCIsIHVzZXJEYXRhLCB7IGV4cGlyZXM6IGV4cGlyYXRpb25UaW1lIH0pO1xyXG5cdFx0JHJvb3RTY29wZS5pc0xvZ2dlZEluID0gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0Ly9DaGVjayBpZiByZXR1cm5lZCB1c2VyIGlzIEFkbWluXHJcblx0XHR1c2VyRGF0YS5pc0FkbWluID09IFwiMVwiID8gJHJvb3RTY29wZS5pc0FkbWluID0gdHJ1ZSA6ICRyb290U2NvcGUuaXNBZG1pbiA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0Ly9TdmMgZnVuY3Rpb25zXHJcblx0c3ZjLmxvZ2luID0gZnVuY3Rpb24gKGNyZWRlbnRpYWxzKSB7XHJcblxyXG5cdFx0JGF1dGgubG9naW4oY3JlZGVudGlhbHMpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIFx0Ly8gQXV0aGVudGljYXRpb24gc3VjY2Vzc1xyXG4gICAgICAgIFx0dG9rZW4gXHRcdD0gZGF0YS5kYXRhLnRva2VuO1xyXG4gICAgICAgIFx0aWQgXHRcdFx0PSAwO1xyXG4gICAgICAgIFx0dXNlcm5hbWUgXHQ9IFwiXCI7XHJcbiAgICAgICAgXHRlbWFpbCBcdFx0PSBcIlwiO1xyXG5cclxuXHRcdFx0dXNlclN2Yy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdGlkIFx0XHRcdD0gZGF0YS5kYXRhLmlkO1xyXG5cdFx0XHRcdHVzZXJuYW1lIFx0PSBkYXRhLmRhdGEudXNlcm5hbWU7XHJcblx0XHRcdFx0ZW1haWwgXHRcdD0gZGF0YS5kYXRhLmVtYWlsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGxvZ2luKHRva2VuLCBpZCwgdXNlcm5hbWUsIGVtYWlsKTtcclxuXHRcdFx0XHRzdmMuaXNMb2dnZWRJbiA9IHRydWU7XHJcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG5cdFx0XHRcdHN2Yy5pc0xvZ2dlZEluID0gZmFsc2U7XHJcblx0XHRcdH0pO1xyXG4gICAgICAgIH0sIFxyXG4gICAgICAgIGZ1bmN0aW9uKGVycm9yKXtcclxuICAgICAgICBcdC8vIEF1dGhlbnRpY2F0aW9uIGZhaWxlZFxyXG4gICAgICAgIFx0Y29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgIFx0c3ZjLmlzTG9nZ2VkSW4gPSBmYWxzZTsgXHJcbiAgICAgICAgfSk7XHJcblx0fVxyXG5cclxuXHRzdmMubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdCRhdXRoLmxvZ291dCgpXHJcblx0XHRcdC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG5cdFx0XHRcdCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IGZhbHNlO1xyXG5cdFx0XHRcdCRyb290U2NvcGUuaXNBZG1pbiA9IGZhbHNlO1xyXG5cdFx0XHRcdHN2Yy51c2VyID0gbnVsbDtcclxuXHRcdFx0XHRzdmMuaXNMb2dnZWRJbiA9IG51bGw7XHJcblxyXG5cdFx0XHRcdCRjb29raWVzLnJlbW92ZShcInVzZXJcIik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0JHN0YXRlLmdvKFwiaG9tZVwiKTtcclxuXHRcdFx0fSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcclxuXHRcdFx0fSlcclxuXHR9XHJcblxyXG5cdHN2Yy5yZWdpc3RlciA9IGZ1bmN0aW9uICh1c2VyKSB7XHJcblxyXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi91c2VyXCI7XHJcblxyXG5cdFx0cmV0dXJuICRodHRwLnBvc3QodXJsLCB1c2VyKTtcclxuXHR9XHJcbn0pOyIsImFwcC5zZXJ2aWNlKFwiYmFuZFNlcnZpY2VcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHJcblx0dmFyIHN2YyA9IHRoaXM7XHJcblxyXG5cdHRyYWNrQXJyYXkgPSBbXTtcclxuXHR0cmFja0lkQXJyYXkgPSBbXTtcclxuXHR0cmFja0FycmF5Q291bnQgPSAwO1xyXG5cclxuXHQvL1ByaXZhdGUgZnVuY3Rpb25zXHJcblx0ZnVuY3Rpb24gYXJyYXlPYmplY3RJbmRleE9mKG15QXJyYXksIHNlYXJjaFRlcm0sIHByb3BlcnR5KSB7XHJcbiAgICBcdFxyXG4gICAgXHRmb3IodmFyIGkgPSAwLCBsZW4gPSBteUFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgXHRpZiAobXlBcnJheVtpXVtwcm9wZXJ0eV0gPT09IHNlYXJjaFRlcm0pIHJldHVybiBpO1xyXG4gICAgXHR9XHJcblxyXG4gICAgXHRyZXR1cm4gLTE7XHJcblx0fVxyXG5cdC8vVHJhY2tBcnJheUNvdW50XHJcblx0ZnVuY3Rpb24gaW5jcmVtZW50VHJhY2tBcnJheUNvdW50KCkge1xyXG5cdFx0dHJhY2tBcnJheUNvdW50ICsrO1xyXG5cdFx0cmV0dXJuIHRyYWNrQXJyYXlDb3VudDtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIGRlY3JlbWVudFRyYWNrQXJyYXlDb3VudCgpIHtcclxuXHRcdHRyYWNrQXJyYXlDb3VudCAtLTtcclxuXHRcdHJldHVybiB0cmFja0FycmF5Q291bnQ7XHJcblx0fVxyXG5cclxuXHQvL1RyYWNrSWRBcnJheVxyXG5cdGZ1bmN0aW9uIGFkZFRvVHJhY2tJZEFycmF5KHRyYWNrSWQpIHtcclxuXHRcdHRyYWNrSWRBcnJheS5wdXNoKHRyYWNrSWQpO1xyXG5cdFx0cmV0dXJuIHRyYWNrSWRBcnJheTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIHJlbW92ZUZyb21UcmFja0lkQXJyYXkodHJhY2tJZCkge1xyXG5cdFx0aW5kZXggPSB0cmFja0lkQXJyYXkuaW5kZXhPZih0cmFja0lkKTtcclxuXHRcdGlmKGluZGV4ID4gLTEpIHtcclxuXHRcdFx0dHJhY2tJZEFycmF5LnNwbGljZShpbmRleCwgMSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRyYWNrSWRBcnJheTtcclxuXHR9XHJcblxyXG5cdC8vU3ZjIGZ1bmN0aW9uc1xyXG5cdHN2Yy5nZXRUcmFja0FycmF5Q291bnQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0cmFja0FycmF5Q291bnQ7XHJcblx0fVxyXG5cclxuXHRzdmMuZ2V0VHJhY2tJZEFycmF5ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdHJhY2tJZEFycmF5O1xyXG5cdH1cclxuXHJcblxyXG5cdHN2Yy5hZGRUb1RyYWNrQXJyYXkgPSBmdW5jdGlvbih0cmFjaykge1xyXG5cdFx0dHJhY2tBcnJheS5wdXNoKHRyYWNrKTtcclxuXHRcdGluY3JlbWVudFRyYWNrQXJyYXlDb3VudCgpO1xyXG5cdFx0YWRkVG9UcmFja0lkQXJyYXkodHJhY2suaWQpO1xyXG5cdFx0cmV0dXJuIHRyYWNrQXJyYXk7XHJcblx0fVxyXG5cclxuXHRzdmMucmVtb3ZlRnJvbVRyYWNrQXJyYXkgPSBmdW5jdGlvbih0cmFjaykge1xyXG5cdFx0aW5kZXggPSB0cmFjay5hcnJheU9iamVjdEluZGV4T2YodHJhY2tBcnJheSwgdHJhY2suaWQsIFwiaWRcIik7XHJcblx0XHRpZihpbmRleCA+IC0xKSB7XHJcblx0XHRcdHRyYWNrQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0ZGVjcmVtZW50VHJhY2tBcnJheUNvdW50KCk7XHJcblx0XHRyZW1vdmVGcm9tVHJhY2tJZEFycmF5KHRyYWNrLmlkKTtcclxuXHRcdHJldHVybiB0cmFja0FycmF5O1xyXG5cdH1cclxuXHJcblx0c3ZjLmdldFRyYWNrQXJyYXkgPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0cmFja0FycmF5O1xyXG5cdH1cclxuXHJcblx0XHJcblxyXG5cclxuXHJcblxyXG5cdHN2Yy50ZXN0RnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdGFsZXJ0KFwiVGVzdCBmdW5jdGlvbiBjYWxsZWQgZnJvbSBpbnNpZGUgc2VydmljZSFcIik7XHJcblx0fVxyXG59KSIsImFwcC5zZXJ2aWNlKFwiZmlsdGVyU2VydmljZVwiLCBmdW5jdGlvbihpbnN0cnVtZW50U2VydmljZSkge1xyXG5cdFxyXG5cdHZhciBzdmMgPSB0aGlzO1xyXG5cdHZhciBpbnN0U3ZjID0gaW5zdHJ1bWVudFNlcnZpY2U7XHJcblxyXG5cclxuXHRzdmMuY3JlYXRlU29sb0ZpbHRlckRhdGEgPSBmdW5jdGlvbigpXHJcblx0e1xyXG5cdFx0c3ZjLnNvbG9GaWx0ZXJEYXRhID0ge1x0XCJhcnRpc3RcIjogXCJcIixcclxuXHRcdFx0XHRcdFx0XHRcdFwidGl0bGVcIjogXCJcIixcclxuXHRcdFx0XHRcdFx0XHRcdH07XHJcblxyXG5cdFx0YW5ndWxhci5mb3JFYWNoKGluc3RTdmMuaW5zdHJ1bWVudHMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpXHJcblx0XHR7XHJcblx0XHRcdHN2Yy5zb2xvRmlsdGVyRGF0YVt2YWx1ZS5pZF0gPSB0cnVlO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRzdmMuY3JlYXRlTWVyZ2VkRmlsdGVyRGF0YSA9IGZ1bmN0aW9uKClcclxuXHR7XHJcblx0XHRzdmMubWVyZ2VkRmlsdGVyRGF0YSA9IHtcdFwiYXJ0aXN0XCI6IFwiXCIsXHJcblx0XHRcdFx0XHRcdFx0XHRcdFwidGl0bGVcIjogXCJcIixcclxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcclxuXHR9XHJcblxyXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0c3ZjLmNyZWF0ZVNvbG9GaWx0ZXJEYXRhKCk7XHJcblx0XHRzdmMuY3JlYXRlTWVyZ2VkRmlsdGVyRGF0YSgpO1xyXG5cdH1cclxuXHJcblx0X2luaXQoKTtcclxufSkiLCJhcHAuc2VydmljZShcImluc3RydW1lbnRTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblx0XHJcblx0Ly9HbG9iYWxzXHJcblx0dmFyIHN2YyA9IHRoaXM7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBnZXREYXRhICh1cmwsIG9wdGlvbnMpIHtcclxuXHJcblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XHJcblxyXG5cdFx0cmV0dXJuICRodHRwLmdldCh1cmwsIG9wdGlvbnMpXHJcblx0fVxyXG5cclxuXHQvL1N2YyBmdW5jdGlvbnNcclxuXHRzdmMuZ2V0SW5zdHJ1bWVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi9pbnN0cnVtZW50c1wiO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xyXG5cdH1cclxuXHJcblx0c3ZjLmluc3RydW1lbnRzID0gW3tcclxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIkxlYWQtZ3VpdGFyXCIsXHJcblx0XHRcdFx0XHRcdFx0XCJpZFwiOjFcclxuXHRcdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwiRHJ1bVwiLFxyXG5cdFx0XHRcdFx0XHRcdFwiaWRcIjoyXHJcblx0XHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIkJhc3NcIixcclxuXHRcdFx0XHRcdFx0XHRcImlkXCI6M1xyXG5cdFx0XHRcdFx0XHR9LFxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJLZXlzXCIsXHJcblx0XHRcdFx0XHRcdFx0XCJpZFwiOjRcclxuXHRcdFx0XHRcdFx0fV07XHJcbn0pIiwiYXBwLnNlcnZpY2UoXCJtZXJnZWRTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblx0XHJcblx0Ly9HbG9iYWxzXHJcblx0dmFyIHN2YyA9IHRoaXM7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBnZXREYXRhICh1cmwsIG9wdGlvbnMpIHtcclxuXHJcblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XHJcblxyXG5cdFx0cmV0dXJuICRodHRwLmdldCh1cmwsIG9wdGlvbnMpXHJcblx0fVxyXG5cclxuXHQvL1N2YyBmdW5jdGlvbnNcclxuXHRzdmMuZ2V0VHJhY2tzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvbWVyZ2VkdHJhY2tzXCI7XHJcblx0XHRcclxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XHJcblx0fVxyXG5cclxuXHRzdmMuZ2V0VHJhY2tCeUlkID0gZnVuY3Rpb24gKGlkKSB7XHJcblxyXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi9tZXJnZWR0cmFja3MvXCIgKyBpZDtcclxuXHJcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xyXG5cdH1cclxufSkiLCJhcHAuc2VydmljZShcInNvbG9TZXJ2aWNlXCIsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblx0XHJcblx0Ly9HbG9iYWxzXHJcblx0dmFyIHN2YyA9IHRoaXM7XHJcblxyXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcclxuXHRmdW5jdGlvbiBnZXREYXRhICh1cmwsIG9wdGlvbnMpIHtcclxuXHJcblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XHJcblxyXG5cdFx0cmV0dXJuICRodHRwLmdldCh1cmwsIG9wdGlvbnMpXHJcblx0fVxyXG5cclxuXHQvL1N2YyBmdW5jdGlvbnNcclxuXHRzdmMuZ2V0VHJhY2tzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdHJhY2tzXCI7XHJcblx0XHRcclxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XHJcblx0fVxyXG5cclxuXHRzdmMuZ2V0VHJhY2tCeUlkID0gZnVuY3Rpb24gKGlkKSB7XHJcblxyXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi90cmFja3MvXCIgKyBpZDtcclxuXHJcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xyXG5cdH1cclxuXHJcblx0c3ZjLmluc2VydFRyYWNrID0gZnVuY3Rpb24oZGF0YSlcclxuXHR7XHJcblx0XHRyZXR1cm4gJGh0dHAucG9zdChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdHJhY2tzL2NyZWF0ZVwiLCBkYXRhKTtcclxuXHR9XHJcbn0pIiwiYXBwLnNlcnZpY2UoXCJ1c2VyU2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1x0XHJcblx0XHJcblx0dmFyIHN2YyA9IHRoaXM7XHJcblxyXG5cdHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24oKVxyXG5cdHtcclxuXHRcdHJldHVybiAkaHR0cC5nZXQoQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3VzZXJcIik7XHJcblx0fVxyXG5cclxuXHRzdmMudXBkYXRlVXNlciA9IGZ1bmN0aW9uKGRhdGEpXHJcblx0e1xyXG5cdFx0cmV0dXJuICRodHRwLnBvc3QoQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3VzZXJcIiwgZGF0YSk7XHJcblx0fVxyXG59KSIsImFwcC5kaXJlY3RpdmUoXCJkY2JCYW5kXCIsIGZ1bmN0aW9uKGJhbmRTZXJ2aWNlKSB7XHJcblx0cmV0dXJuIHtcclxuXHRcdHJlc3RyaWN0OiBcIkVcIixcclxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1iYW5kL2RjYi1iYW5kLmh0bWxcIixcclxuXHRcdHJlcGxhY2U6IHRydWUsXHJcblx0XHRzY29wZToge30sXHJcblx0XHRjb250cm9sbGVyQXM6IFwiYmFuZFwiLFxyXG5cdFx0Y29udHJvbGxlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB2bSA9IHRoaXM7XHJcblx0XHRcdHZhciBiYW5kU3ZjID0gYmFuZFNlcnZpY2U7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiBfaW5pdCgpIHtcclxuXHRcdFx0XHR2bS52YWx1ZSA9IFwiTmV3QmFuZFwiO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRfaW5pdCgpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiSGVhZGVyXCIsIGZ1bmN0aW9uKGJhbmRTZXJ2aWNlKSB7XHJcblx0cmV0dXJuIHtcclxuXHRcdHJlc3RyaWN0OiBcIkVcIixcclxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1oZWFkZXIvZGNiLWhlYWRlci5odG1sXCIsXHJcblx0XHRyZXBsYWNlOiB0cnVlLFxyXG5cdFx0c2NvcGU6IHt9LFxyXG5cdFx0Y29udHJvbGxlckFzOiBcImhlYWRcIixcclxuXHRcdGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSwgdXNlclNlcnZpY2UsIGF1dGhTZXJ2aWNlLCAkYXV0aCwgJHJvb3RTY29wZSkge1xyXG5cdFx0XHRcclxuXHRcdFx0dmFyIHZtIFx0XHRcdD0gdGhpcztcclxuXHRcdFx0dmFyIHVzZXJTdmMgXHQ9IHVzZXJTZXJ2aWNlO1xyXG5cdFx0XHR2YXIgYXV0aFN2YyBcdD0gYXV0aFNlcnZpY2U7XHJcblx0XHRcdHZhciBiYW5kU3ZjIFx0PSBiYW5kU2VydmljZTtcclxuXHJcblx0XHRcdGZ1bmN0aW9uIF9pbml0KCkge1xyXG5cdFx0XHRcdHZtLnRyYWNrQXJyYXkgPSBiYW5kU3ZjLmdldFRyYWNrQXJyYXk7XHJcblx0XHRcdFx0dm0udHJhY2tBcnJheUNvdW50ID0gYmFuZFN2Yy5nZXRUcmFja0FycmF5Q291bnQ7XHJcblxyXG5cdFx0XHRcdGlmKCRhdXRoLmlzQXV0aGVudGljYXRlZCgpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHVzZXJTdmMuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuXHRcdFx0XHRcdFx0JHJvb3RTY29wZS51c2VybmFtZSA9IGRhdGEuZGF0YS51c2VybmFtZTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dm0uc2hvd0xvZ2luID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0JCgnI2xvZ2luX21vZGFsJykubW9kYWwoJ29wZW4nKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dm0ubG9nb3V0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGF1dGhTdmMubG9nb3V0KCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZtLnNob3dSZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgpO1xyXG5cdFx0XHRcdCQoJyNyZWdpc3Rlcl9tb2RhbCcpLm1vZGFsKCdvcGVuJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZtLmlzQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdF9pbml0KCk7XHJcblxyXG5cdFx0XHQvL1dhdGNoZXNcclxuXHRcdFx0JHNjb3BlLiR3YXRjaChcclxuXHRcdFx0XHRmdW5jdGlvbiAoKSB7IHJldHVybiBhdXRoU3ZjLnVzZXIgfSwgXHJcblx0XHRcdFx0ZnVuY3Rpb24gKCkge1xyXG5cclxuXHRcdFx0XHRcdHZtLnVzZXIgPSBhdXRoU3ZjLnVzZXI7XHJcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKHZtLnVzZXIpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiUmVnaXN0ZXJcIiwgZnVuY3Rpb24odXNlclNlcnZpY2UpIHtcclxuXHRyZXR1cm4ge1xyXG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxyXG5cdFx0dGVtcGxhdGVVcmw6IFwiYXBwL2RpcmVjdGl2ZXMvZGNiLXJlZ2lzdGVyL2RjYi1yZWdpc3Rlci5odG1sXCIsXHJcblx0XHRyZXBsYWNlOiB0cnVlLFxyXG5cdFx0c2NvcGU6IHt9LFxyXG5cdFx0Y29udHJvbGxlckFzOiBcInJlZ2lzdGVyXCIsXHJcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkYXV0aCwgJHNjb3BlLCAkcm9vdFNjb3BlLCB1c2VyU2VydmljZSwgYXV0aFNlcnZpY2UpIHtcclxuXHRcdFx0dmFyIHZtIFx0XHRcdD0gdGhpcztcclxuXHRcdFx0dmFyIHVzZXJTdmMgXHQ9IHVzZXJTZXJ2aWNlO1xyXG5cdFx0XHR2YXIgYXV0aFN2YyBcdD0gYXV0aFNlcnZpY2U7XHJcblx0XHRcdHZhciB0YXJnZXQgXHRcdD0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZ2lzdGVyLXNwaW5uZXInKTtcclxuXHJcblx0XHRcdHZhciBvcHRzID0ge1xyXG5cdCAgXHRcdFx0bGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xyXG5cdFx0XHRcdCwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxyXG5cdFx0XHRcdCwgd2lkdGg6IDE0IC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xyXG5cdFx0XHRcdCwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcclxuXHRcdFx0XHQsIHNjYWxlOiAwLjQgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxyXG5cdFx0XHRcdCwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxyXG5cdFx0XHRcdCwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXHJcblx0XHRcdFx0LCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXHJcblx0XHRcdFx0LCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxyXG5cdFx0XHRcdCwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcclxuXHRcdFx0XHQsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXHJcblx0XHRcdFx0LCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcclxuXHRcdFx0XHQsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXHJcblx0XHRcdFx0LCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcclxuXHRcdFx0XHQsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXHJcblx0XHRcdFx0LCB0b3A6ICc2MCUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdFx0XHQsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XHJcblx0XHRcdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XHJcblx0XHRcdFx0LCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cclxuXHRcdFx0XHQsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcclxuXHRcdFx0fVxyXG5cclxuXHJcblx0XHRcdFxyXG5cdFx0XHR2bS5yZWdpc3RlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBzcGlubmVyID0gbmV3IFNwaW5uZXIob3B0cykuc3Bpbih0YXJnZXQpO1xyXG5cdCAgICAgICAgXHR2bS5sb2FkaW5nIFx0PSB0cnVlO1xyXG5cclxuXHRcdFx0XHR2YXIgdXNlciA9IHtcclxuXHRcdFx0XHQgIFx0dXNlcm5hbWU6IHZtLnVzZXJuYW1lLFxyXG5cdFx0XHRcdCAgXHRlbWFpbDogdm0uZW1haWwsXHJcblx0XHRcdFx0ICBcdHBhc3N3b3JkOiB2bS5wYXNzd29yZFxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdCRhdXRoLnNpZ251cCh1c2VyKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHQvLyBSZWdpc3RyYXRpb24gc3VjY2Vzc1xyXG5cdFx0XHRcdFx0YXV0aFN2Yy5sb2dpbih1c2VyKTtcclxuXHJcblx0XHQgICAgICAgICAgICAvL1dhdGNoZXNcclxuXHRcdFx0XHRcdHZhciB1bnJlZ2lzdGVyID0gJHNjb3BlLiR3YXRjaChcclxuXHRcdFx0XHRcdFx0ZnVuY3Rpb24gKCkgeyByZXR1cm4gYXV0aFN2Yy5pc0xvZ2dlZEluIH0sIFxyXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdGlmKGF1dGhTdmMuaXNMb2dnZWRJbikgXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0ICAgICAgICBcdCQoJyNyZWdpc3Rlcl9tb2RhbCcpLm1vZGFsKCk7XHJcblx0XHRcdFx0XHRcdFx0XHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgnY2xvc2UnKTtcclxuXHRcdFx0XHRcdCAgICAgICAgXHRzcGlubmVyLnN0b3AoKTtcclxuXHRcdFx0XHRcdCAgICAgICAgXHR1bnJlZ2lzdGVyKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGlmKGF1dGhTdmMuaXNMb2dnZWRJbiA9PT0gZmFsc2UpXHJcblx0XHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdFx0c3Bpbm5lci5zdG9wKCk7XHJcblx0ICAgICAgICBcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdCAgICAgICAgXHRcdFx0XHRcdHVucmVnaXN0ZXIoKTtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH0sIHRydWUpO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdFx0XHQvLyBSZWdpc3RyYXRpb24gZmFpbGVkXHJcblx0XHRcdFx0ICBcdHNwaW5uZXIuc3RvcCgpO1xyXG5cdFx0XHRcdCAgXHR2bS5sb2FkaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0ICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiTG9naW5cIiwgZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHtcclxuXHRcdHJlc3RyaWN0OiBcIkVcIixcclxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1sb2dpbi9kY2ItbG9naW4uaHRtbFwiLFxyXG5cdFx0cmVwbGFjZTogdHJ1ZSxcclxuXHRcdHNjb3BlOiB7fSxcclxuXHRcdGNvbnRyb2xsZXJBczogXCJsb2dpblwiLFxyXG5cdFx0Y29udHJvbGxlcjogZnVuY3Rpb24oJGF1dGgsICRzY29wZSwgJHJvb3RTY29wZSwgdXNlclNlcnZpY2UsIGF1dGhTZXJ2aWNlLCAkY29va2llcykge1xyXG5cdFx0XHR2YXIgdm0gXHRcdFx0PSB0aGlzO1xyXG5cdFx0XHR2YXIgdXNlclN2YyBcdD0gdXNlclNlcnZpY2U7XHJcblx0XHRcdHZhciBhdXRoU3ZjIFx0PSBhdXRoU2VydmljZTtcclxuXHRcdFx0dmFyIHRhcmdldCBcdFx0PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4tc3Bpbm5lcicpO1xyXG5cclxuXHRcdFx0dmFyIG9wdHMgPSB7XHJcblx0ICBcdFx0XHRsaW5lczogMTMgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XHJcblx0XHRcdFx0LCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXHJcblx0XHRcdFx0LCB3aWR0aDogMTQgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXHJcblx0XHRcdFx0LCByYWRpdXM6IDQyIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxyXG5cdFx0XHRcdCwgc2NhbGU6IDAuNCAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXHJcblx0XHRcdFx0LCBjb3JuZXJzOiAxIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXHJcblx0XHRcdFx0LCBjb2xvcjogJyMwMDAnIC8vICNyZ2Igb3IgI3JyZ2diYiBvciBhcnJheSBvZiBjb2xvcnNcclxuXHRcdFx0XHQsIG9wYWNpdHk6IDAuMjUgLy8gT3BhY2l0eSBvZiB0aGUgbGluZXNcclxuXHRcdFx0XHQsIHJvdGF0ZTogMCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XHJcblx0XHRcdFx0LCBkaXJlY3Rpb246IDEgLy8gMTogY2xvY2t3aXNlLCAtMTogY291bnRlcmNsb2Nrd2lzZVxyXG5cdFx0XHRcdCwgc3BlZWQ6IDEgLy8gUm91bmRzIHBlciBzZWNvbmRcclxuXHRcdFx0XHQsIHRyYWlsOiA2MCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxyXG5cdFx0XHRcdCwgZnBzOiAyMCAvLyBGcmFtZXMgcGVyIHNlY29uZCB3aGVuIHVzaW5nIHNldFRpbWVvdXQoKSBhcyBhIGZhbGxiYWNrIGZvciBDU1NcclxuXHRcdFx0XHQsIHpJbmRleDogMmU5IC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxyXG5cdFx0XHRcdCwgY2xhc3NOYW1lOiAnc3Bpbm5lcicgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcclxuXHRcdFx0XHQsIHRvcDogJzYwJScgLy8gVG9wIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxyXG5cdFx0XHRcdCwgbGVmdDogJzUwJScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcclxuXHRcdFx0XHQsIHNoYWRvdzogZmFsc2UgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcclxuXHRcdFx0XHQsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxyXG5cdFx0XHRcdCwgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL1ByaXZhdGUgZnVuY3Rpb25zXHJcblx0XHRcdGZ1bmN0aW9uIGxvZ2luICh0b2tlbiwgaWQsIHVzZXJuYW1lLCBlbWFpbCkge1xyXG5cclxuXHRcdFx0XHR2YXIgZXhwaXJhdGlvblRpbWUgPSBuZXcgRGF0ZSgpO1xyXG5cdFx0XHRcdGV4cGlyYXRpb25UaW1lID0gZXhwaXJhdGlvblRpbWUuc2V0VGltZShleHBpcmF0aW9uVGltZS5nZXRUaW1lKCkgKyAodG9rZW5bXCJleHBpcmVzX2luXCJdICogMTAwMCkpO1xyXG5cdFx0XHRcdGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoZXhwaXJhdGlvblRpbWUpO1xyXG5cclxuXHRcdFx0XHR2YXIgdXNlckRhdGEgPSB7XHJcblxyXG5cdFx0XHRcdFx0dG9rZW46IHRva2VuLFxyXG5cdFx0XHRcdFx0dXNlcklkOiBpZCxcclxuXHRcdFx0XHRcdHVzZXJuYW1lOiB1c2VybmFtZSxcclxuXHRcdFx0XHRcdGVtYWlsOiBlbWFpbCxcclxuXHRcdFx0XHRcdC8vaXNBZG1pbjogZGF0YS5kYXRhLmlzQWRtaW5cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnNvbGUubG9nKHVzZXJEYXRhLnRva2VuKTtcclxuXHJcblx0XHRcdFx0YXV0aFN2Yy51c2VyID0gdXNlckRhdGE7XHJcblxyXG5cdFx0XHRcdCRjb29raWVzLnB1dE9iamVjdChcInVzZXJcIiwgdXNlckRhdGEsIHsgZXhwaXJlczogZXhwaXJhdGlvblRpbWUgfSk7XHJcblx0XHRcdFx0JHJvb3RTY29wZS5pc0xvZ2dlZEluID0gdHJ1ZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvL0NoZWNrIGlmIHJldHVybmVkIHVzZXIgaXMgQWRtaW5cclxuXHRcdFx0XHR1c2VyRGF0YS5pc0FkbWluID09IFwiMVwiID8gJHJvb3RTY29wZS5pc0FkbWluID0gdHJ1ZSA6ICRyb290U2NvcGUuaXNBZG1pbiA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cclxuXHRcdFx0Ly9WbSBmdW5jdGlvbnNcclxuXHQgICAgICAgIHZtLmxvZ2luID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgICBcdHZhciBzcGlubmVyID0gbmV3IFNwaW5uZXIob3B0cykuc3Bpbih0YXJnZXQpO1xyXG5cdCAgICAgICAgXHR2bS5sb2FkaW5nIFx0PSB0cnVlO1xyXG5cclxuXHQgICAgICAgICAgICB2YXIgY3JlZGVudGlhbHMgPSB7XHJcblx0ICAgICAgICAgICAgICAgIGVtYWlsOiB2bS5lbWFpbCxcclxuXHQgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHZtLnBhc3N3b3JkXHJcblx0ICAgICAgICAgICAgfVxyXG5cdCAgICAgICAgICAgIFxyXG5cdCAgICAgICAgICAgIGF1dGhTdmMubG9naW4oY3JlZGVudGlhbHMpO1xyXG5cclxuXHQgICAgICAgICAgICAvL1dhdGNoZXNcclxuXHRcdFx0XHR2YXIgdW5yZWdpc3RlciA9ICRzY29wZS4kd2F0Y2goXHJcblx0XHRcdFx0XHRmdW5jdGlvbiAoKSB7IHJldHVybiBhdXRoU3ZjLmlzTG9nZ2VkSW4gfSwgXHJcblx0XHRcdFx0XHRmdW5jdGlvbiAoKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRpZihhdXRoU3ZjLmlzTG9nZ2VkSW4pIFxyXG5cdFx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdCAgICAgICAgXHQkKCcjbG9naW5fbW9kYWwnKS5tb2RhbCgpO1xyXG5cdFx0XHRcdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCdjbG9zZScpO1xyXG5cdFx0XHRcdCAgICAgICAgXHRzcGlubmVyLnN0b3AoKTtcclxuXHRcdFx0XHQgICAgICAgIFx0dW5yZWdpc3RlcigpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGlmKGF1dGhTdmMuaXNMb2dnZWRJbiA9PT0gZmFsc2UpXHJcblx0XHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0XHRzcGlubmVyLnN0b3AoKTtcclxuICAgICAgICBcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIFx0XHRcdFx0XHR1bnJlZ2lzdGVyKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIHRydWUpO1xyXG5cdCAgICAgICAgfVxyXG5cdFx0fVxyXG5cdH1cclxufSkiXX0=
