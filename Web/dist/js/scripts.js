var app=angular.module("app",["ui.router","satellizer","ngCookies","ngFileUpload"]),CONSTANTS=function(){var e={};return e.PUBLIC_BASE_URL="http://discoverband.api",e.API_BASE_URL="http://discoverband.api/api",e}();app.config(["$stateProvider","$urlRouterProvider","$authProvider","$httpProvider",function(e,r,t,n){t.loginUrl=CONSTANTS.API_BASE_URL+"/login",t.signupUrl=CONSTANTS.API_BASE_URL+"/register",r.otherwise("/"),e.state("home",{url:"/",templateUrl:"app/pages/home.html",controller:"homeController as home"}).state("solo",{url:"/solo",templateUrl:"app/pages/solo.html",controller:"soloController as solo"}).state("merged",{url:"/merged",templateUrl:"app/pages/merged.html",controller:"mergedController as merged"}).state("band",{url:"/band",templateUrl:"app/pages/band.html",controller:"bandController as band"}).state("merge",{url:"/merge",templateUrl:"app/pages/merge.html",controller:"mergeController as merge"}).state("profile",{url:"/profile",templateUrl:"app/pages/profile.html",controller:"profileController as profile",data:{requiresLoggedIn:!0}}).state("upload",{url:"/upload",templateUrl:"app/pages/upload.html",controller:"uploadController as upload",data:{requiresLoggedIn:!0}})}]).run(["$rootScope","$location","$auth","$state",function(e,r,t,n){function o(e){return!e.data||!e.data.requiresLoggedIn||t.isAuthenticated()}var a="/";e.$on("$stateChangeStart",function(e,t,i,c,s){var l=t.url;i&&(l=n.href(t,i),l=l.replace("#","")),o(t)?r.path(l):(console.log("notLoggedIn"),r.path(a))})}]),app.controller("bandController",["bandService",function(e){function r(){t.trackArray=n.getTrackArray}var t=this,n=e;r()}]),app.controller("homeController",["instrumentService","filterService",function(e,r){function t(){n.filterData=o.soloFilterData}var n=this,o=r;t()}]),app.controller("mergeController",["bandService","mergedService","$state",function(e,r,t){function n(){o.tracks=a.getTrackArray(),o.showTracks=!1,o.thereAreTracks=!1,o.loadedTracks=[],o.savedTime=[],o.trimAmounts=[],o.tracks.length>0&&(o.thereAreTracks=!0)}var o=this,a=e,i=r,c=[];o.load=function(){if(o.thereAreTracks){for(var e=o.tracks.length-1;e>=0;e--){var r=o.tracks[e].id;c[r]=WaveSurfer.create({container:"#waveform"+r,waveColor:"green",progressColor:"purple"}),c[r].load(CONSTANTS.API_BASE_URL+"/audio/"+o.tracks[e].file_url),o.loadedTracks.push({track_id:r,trim_amount:0,user_id:o.tracks[e].user.id}),console.log(o.loadedTracks)}o.showTracks=!0}},o.playPause=function(e){c[e].isPlaying()||(o.savedTime[e]=c[e].getCurrentTime(),console.log(o.savedTime)),c[e].playPause(),c[e].zoom(50)},o.trim=function(e){for(var r=c[e].getCurrentTime(),t=o.loadedTracks.length-1;t>=0;t--)o.loadedTracks[t].track_id===e&&(o.loadedTracks[t].trim_amount=r,o.trimAmounts[e]=Math.round(100*r)/100)},o.playPauseAll=function(){for(var e=o.loadedTracks.length-1;e>=0;e--){var r=o.loadedTracks[e].track_id;c[r].isPlaying()||(o.savedTime[r]=c[r].getCurrentTime()),c[r].playPause(),c[r].zoom(50)}},o.toPrevious=function(){for(var e=o.loadedTracks.length-1;e>=0;e--){var r=o.loadedTracks[e].track_id,t=o.savedTime[r],n=c[r].getDuration(),a=t/n;c[r].seekAndCenter(a)}},o.toStart=function(e){c[e].seekAndCenter(0)},o.save=function(){$("#processing_modal").modal(),$("#processing_modal").modal("open"),i.mergeTracks(o.loadedTracks).then(function(e){$("#processing_modal").modal("close"),t.go("merged")},function(e){console.log(e)})},n()}]),app.controller("mergedController",["$scope","mergedService","filterService",function(e,r,t){function n(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),n=t.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(r))return a.substring(r.length,a.length)}return""}function o(){r.getTracks().then(function(e){s.mergedTracks=e.data,s.filteredTracks=s.mergedTracks,i(),angular.forEach(s.mergedTracks,function(e,r){newTrack=new Audio(CONSTANTS.PUBLIC_BASE_URL+"/audio/"+e.file_url),s.mergedTrackAudio[e.id]=newTrack});for(var r=s.mergedTracks.length-1;r>=0;r--)s.voteCountPerTrack[s.mergedTracks[r].id]=s.mergedTracks[r].merged_track_votes.length},function(e){console.log(e)})}function a(){null!=d&&r.getUserVotes(d).then(function(e){console.log(e),s.votedtracks=e.data;for(var r=s.votedtracks.length-1;r>=0;r--)s.votedTrackArray.push(s.votedtracks[r].merged_track_id);console.log(s.votedTrackArray)},function(e){console.log(e)})}function i(){s.filteredTracks=[],angular.forEach(s.mergedTracks,function(e,r){goodSearch=!0,""!=!s.filterData.artist||e.artist.name.match(new RegExp(s.filterData.artist,"i"))||(goodSearch=!1),""!=!s.filterData.title||e.songname.match(new RegExp(s.filterData.title,"i"))||(goodSearch=!1),goodSearch&&s.filteredTracks.push(e)})}function c(){s.mergedTrackAudio=[],s.currentAudioTrackId="",o(),a(),s.filterData=u.mergedFilterData,s.voteCountPerTrack=[],s.coloredHands=[],s.votedTrackArray=[]}var s=this,l=r,u=t,d=null;if(JSON.parse(n("user")).userId)var d=JSON.parse(n("user")).userId;s.play=function(e){""!=s.currentAudioTrackId&&s.pause(s.currentAudioTrackId),s.currentAudioTrackId=e,s.mergedTrackAudio[e].play()},s.pause=function(e){s.mergedTrackAudio[e].pause(),s.currentAudioTrackId=""},s.download=function(e){window.open(CONSTANTS.API_BASE_URL+"/mergedtracks/"+e+"/download","_blank","")},s.upVote=function(e){var r={track_id:e,user_id:d};l.insertVote(r).then(function(r){"OK"==r.data.status?(s.voteCountPerTrack[e]++,s.votedTrackArray.push(e)):console.log("already voted")},function(e){console.log(e)})},e.$watch(function(){return s.filterData},function(){s.filterData&&i()},!0),c()}]),app.controller("profileController",["userService",function(e){function r(){n.getUser().then(function(e){t.username=e.data.username,t.email=e.data.email})}var t=this,n=e,o=document.getElementById("update-profile-spinner"),a={lines:13,length:28,width:12,radius:42,scale:.15,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"89%",left:"25.5%",shadow:!1,hwaccel:!1,position:"absolute"};t.update=function(){var e=new Spinner(a).spin(o);t.loading=!0;var r={username:t.username,email:t.email};n.updateUser(r).then(function(r){e.stop(),t.loading=!1},function(r){e.stop(),t.loading=!1})},r()}]),app.controller("soloController",["$scope","bandService","soloService","instrumentService","filterService",function(e,r,t,n,o){function a(){u.getTracks().then(function(e){s.soloTracks=e.data,s.filteredTracks=s.soloTracks,i(),angular.forEach(s.soloTracks,function(e,r){newTrack=new Audio(CONSTANTS.PUBLIC_BASE_URL+"/audio/"+e.file_url),s.soloTrackAudio[e.id]=newTrack})},function(e){console.log(e)})}function i(){s.filteredTracks=[],angular.forEach(s.soloTracks,function(e,r){goodSearch=!0,""!=!s.filterData.artist||e.artist.name.match(new RegExp(s.filterData.artist,"i"))||(goodSearch=!1),""!=!s.filterData.title||e.songname.match(new RegExp(s.filterData.title,"i"))||(goodSearch=!1),s.filterData[e.instrument_id]||(goodSearch=!1),goodSearch&&s.filteredTracks.push(e)}),0===s.filteredTracks.length?s.showNoResultsFound=!0:s.showNoResultsFound=!1}function c(){s.soloTrackAudio=[],s.currentAudioTrackId="",s.showNoResultsFound=!1,d.getInstruments().then(function(e){s.instruments=e.data},function(e){console.log(e)}),a(),s.filterData=g.soloFilterData,s.trackArray=l.getTrackArray,s.bandTrackIdArray=l.getTrackIdArray,s.trackArrayCount=l.getTrackArrayCount}var s=this,l=r,u=t,d=n,g=o;s.addToBand=function(e){l.addToTrackArray(e),console.log(e)},s.removeFromBand=function(e){l.removeFromTrackArray(e),console.log("Track removed from new band: "+e)},s.play=function(e){""!=s.currentAudioTrackId&&s.pause(s.currentAudioTrackId),s.currentAudioTrackId=e,s.soloTrackAudio[e].play()},s.pause=function(e){s.soloTrackAudio[e].pause(),s.currentAudioTrackId=""},e.$watch(function(){return s.filterData},function(){s.filterData&&i()},!0),c()}]),app.controller("uploadController",["Upload","artistService","instrumentService","soloService","$state",function(e,r,t,n,o){function a(){c.uploaded=!1,c.showform=!1,c.instruments=u.getInstruments().then(function(e){c.instruments=e.data,console.log(e.data)},function(e){console.log(e)}),c.artists=l.getArtists().then(function(e){console.log(e.data),c.artists=e.data},function(e){console.log(e)})}function i(e){for(var r=e+"=",t=decodeURIComponent(document.cookie),n=t.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(r))return a.substring(r.length,a.length)}return""}var c=this,s=n,l=r,u=t,d=document.getElementById("upload-spinner"),g={lines:13,length:28,width:12,radius:42,scale:.3,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"40%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};c.uploadFile=function(r){var t=new Spinner(g).spin(d);c.loading=!0,c.uploaded=!1,c.showform=!0,$("select").material_select(),e.upload({url:CONSTANTS.API_BASE_URL+"/upload",fileFormDataName:"song",sendFieldsAs:"form",data:{song:r}}).then(function(e){c.filename=e.data.name,c.tracklength=e.data.length,t.stop(),c.loading=!1,c.uploaded=!0},function(e){c.loading=!1,t.stop(),c.uploadfailed=!0})},c.save=function(){var e=JSON.parse(i("user")).userId,r={name:c.songname,file_url:c.filename,track_length:c.tracklength,user_id:e,instrument_id:c.instrumentsdropdown,artist_id:c.artistname};s.insertTrack(r).then(function(e){o.go("solo"),console.log(e)},function(e){console.log(e)})},a()}]),app.filter("band",function(){return function(e,r){var t=!1;return angular.forEach(r,function(r,n){r==e&&(t=!0)}),t}}),app.service("artistService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getArtists=function(){var e=CONSTANTS.API_BASE_URL+"/artists";return r(e)}}]),app.service("authService",["$auth","$rootScope","$cookies","$state","userService",function(e,r,t,n,o){function a(e,n,o,a){var c=new Date;c=c.setTime(c.getTime()+1e3*e.expires_in),c=new Date(c);var s={token:e,userId:n,username:o,email:a};i.user=s,t.putObject("user",s,{expires:c}),r.isLoggedIn=!0,"1"==s.isAdmin?r.isAdmin=!0:r.isAdmin=!1}var i=this,c=o;i.isLoggedIn=!1,i.login=function(r){e.login(r).then(function(e){token=e.data.token,id=0,username="",email="",c.getUser().then(function(e){id=e.data.id,username=e.data.username,email=e.data.email,a(token,id,username,email),i.isLoggedIn=!0},function(e){console.log(e),i.isLoggedIn=!1})},function(e){console.log(e),i.isLoggedIn=!1})},i.logout=function(){e.logout().then(function(e){r.isLoggedIn=!1,r.isAdmin=!1,i.user=null,i.isLoggedIn=null,t.remove("user"),n.go("home")},function(e){console.log(e)})},i.register=function(e){var r=CONSTANTS.API_BASE_URL+"/user";return $http.post(r,e)}}]),app.service("bandService",function(){function e(e,r,t){for(var n=0,o=e.length;n<o;n++)if(e[n][t]===r)return n;return-1}function r(){return trackArrayCount++,trackArrayCount}function t(){return trackArrayCount--,trackArrayCount}function n(e){return trackIdArray.push(e),trackIdArray}function o(e){return index=trackIdArray.indexOf(e),index>-1&&trackIdArray.splice(index,1),trackIdArray}var a=this;trackArray=[],trackIdArray=[],trackArrayCount=0,a.getTrackArrayCount=function(){return trackArrayCount},a.getTrackIdArray=function(){return trackIdArray},a.addToTrackArray=function(e){return trackArray.push(e),r(),n(e.id),trackArray},a.removeFromTrackArray=function(r){return index=e(trackArray,r.id,"id"),index>-1&&trackArray.splice(index,1),t(),o(r.id),trackArray},a.getTrackArray=function(){return trackArray},a.testFunction=function(){alert("Test function called from inside service!")}}),app.service("filterService",["instrumentService",function(e){function r(){t.createSoloFilterData(),t.createMergedFilterData()}var t=this,n=e;t.createSoloFilterData=function(){t.soloFilterData={artist:"",title:""},angular.forEach(n.instruments,function(e,r){t.soloFilterData[e.id]=!0})},t.createMergedFilterData=function(){t.mergedFilterData={artist:"",title:""}},r()}]),app.service("instrumentService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getInstruments=function(){var e=CONSTANTS.API_BASE_URL+"/instruments";return r(e)},t.instruments=[{name:"Lead-guitar",id:1},{name:"Rythm-guitar",id:2},{name:"Drum",id:3},{name:"Bass",id:4},{name:"Bass",id:5},{name:"Keys",id:6}]}]),app.service("mergedService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/mergedtracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/mergedtracks/"+e;return r(t)},t.mergeTracks=function(r){return e.post(CONSTANTS.API_BASE_URL+"/mergedtracks/create",r)},t.insertVote=function(r){return e.post(CONSTANTS.API_BASE_URL+"/vote/create",r)},t.download=function(e){var t=CONSTANTS.API_BASE_URL+"/mergedtracks/"+e+"/download";return r(t)},t.getUserVotes=function(e){var t=CONSTANTS.API_BASE_URL+"/votes/"+e;return r(t)}}]),app.service("soloService",["$http",function(e){function r(r,t){return t?"":t={},e.get(r,t)}var t=this;t.getTracks=function(){var e=CONSTANTS.API_BASE_URL+"/tracks";return r(e)},t.getTrackById=function(e){var t=CONSTANTS.API_BASE_URL+"/tracks/"+e;return r(t)},t.insertTrack=function(r){return e.post(CONSTANTS.API_BASE_URL+"/tracks/create",r)}}]),app.service("userService",["$http",function(e){var r=this;r.getUser=function(){return e.get(CONSTANTS.API_BASE_URL+"/user")},r.updateUser=function(r){return e.post(CONSTANTS.API_BASE_URL+"/user",r)}}]),app.directive("dcbBand",["bandService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-band/dcb-band.html",replace:!0,scope:{},controllerAs:"band",controller:["$auth","$scope","$rootScope",function(r,t,n){function o(){a.trackArray=i.getTrackArray,a.bandTrackIdArray=i.getTrackIdArray,a.trackArrayCount=i.getTrackArrayCount}var a=this,i=e;a.removeFromBand=function(e){i.removeFromTrackArray(e),console.log("Track removed from new band: "+e)},o()}]}}]),app.directive("dcbHeader",["bandService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-header/dcb-header.html",replace:!0,scope:{},controllerAs:"head",controller:["$scope","userService","authService","$auth","$rootScope",function(r,t,n,o,a){function i(){c.trackArray=u.getTrackArray,c.trackArrayCount=u.getTrackArrayCount,o.isAuthenticated()&&s.getUser().then(function(e){a.username=e.data.username})}var c=this,s=t,l=n,u=e;c.showLogin=function(){$("#login_modal").modal(),$("#login_modal").modal("open")},c.logout=function(){l.logout()},c.showRegister=function(){$("#register_modal").modal(),$("#register_modal").modal("open")},c.showBand=function(){$("#band_modal").modal(),$("#band_modal").modal("open")},c.isAuthenticated=function(){return o.isAuthenticated()},i(),r.$watch(function(){return l.user},function(){c.user=l.user})}]}}]),app.directive("dcbLogin",function(){return{restrict:"E",templateUrl:"app/directives/dcb-login/dcb-login.html",replace:!0,scope:{},controllerAs:"login",controller:["$auth","$scope","$rootScope","userService","authService","$cookies",function(e,r,t,n,o,a){var i=this,c=o,s=document.getElementById("login-spinner"),l={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};i.login=function(){var e=new Spinner(l).spin(s);i.loading=!0,console.log(i.loading);var t={email:i.email,password:i.password};c.login(t);r.$watch(function(){return c.isLoggedIn},function(){c.isLoggedIn&&(i.loading=!1,$("#login_modal").modal(),$("#login_modal").modal("close"),e.stop()),c.isLoggedIn||(e.stop(),i.loading=!1)},!0)}}]}}),app.directive("dcbMergeprocessing",function(){return{restrict:"E",templateUrl:"app/directives/dcb-mergeprocessing/dcb-mergeprocessing.html",replace:!0,scope:{},controllerAs:"processing",controller:["$interval",function(e){var r=this,t=document.getElementById("processing-spinner"),n={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"40%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"},o=["Tuning instruments...","Adjusting amp settings...","Soundchecking...","Recording...","Mixing sound...","Finishing up..."],a=(new Spinner(n).spin(t),0);e(function(){$("#processing_modal").is(":visible")&&(r.text=o[a],a++,a>=o.length-1&&(a=0))},4e3)}]}}),app.directive("dcbRegister",["userService",function(e){return{restrict:"E",templateUrl:"app/directives/dcb-register/dcb-register.html",replace:!0,scope:{},controllerAs:"register",controller:["$auth","$scope","$rootScope","userService","authService",function(e,r,t,n,o){var a=this,i=o,c=document.getElementById("register-spinner"),s={lines:13,length:28,width:14,radius:42,scale:.4,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"60%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};a.register=function(){var t=new Spinner(s).spin(c);a.loading=!0;var n={username:a.username,email:a.email,password:a.password};e.signup(n).then(function(e){i.login(n);var o=r.$watch(function(){return i.isLoggedIn},function(){i.isLoggedIn&&(a.loading=!1,$("#register_modal").modal(),$("#register_modal").modal("close"),t.stop(),o()),i.isLoggedIn===!1&&(t.stop(),a.loading=!1,o())},!0)})["catch"](function(e){t.stop(),a.loading=!1,console.log(e)})}}]}}]),app.directive("dcbSticky",["$window",function(e){var r=angular.element(e);return{restrict:"A",link:function(e,t,n){var o=n.dcbSticky,a=t.offset().top;r.on("scroll",function(e){r.scrollTop()>=a?t.addClass(o):t.removeClass(o)})}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbmZpZy5qcyIsInJvdXRlcy5qcyIsImJhbmRDb250cm9sbGVyLmpzIiwiaG9tZUNvbnRyb2xsZXIuanMiLCJtZXJnZUNvbnRyb2xsZXIuanMiLCJtZXJnZWRDb250cm9sbGVyLmpzIiwicHJvZmlsZUNvbnRyb2xsZXIuanMiLCJzb2xvQ29udHJvbGxlci5qcyIsInVwbG9hZENvbnRyb2xsZXIuanMiLCJiYW5kRmlsdGVyLmpzIiwiYXJ0aXN0U2VydmljZS5qcyIsImF1dGhTZXJ2aWNlLmpzIiwiYmFuZFNlcnZpY2UuanMiLCJmaWx0ZXJTZXJ2aWNlLmpzIiwiaW5zdHJ1bWVudFNlcnZpY2UuanMiLCJtZXJnZWRTZXJ2aWNlLmpzIiwic29sb1NlcnZpY2UuanMiLCJ1c2VyU2VydmljZS5qcyIsImRjYi1iYW5kL2RjYi1iYW5kLmpzIiwiZGNiLWhlYWRlci9kY2ItaGVhZGVyLmpzIiwiZGNiLWxvZ2luL2RjYi1sb2dpbi5qcyIsImRjYi1tZXJnZXByb2Nlc3NpbmcvZGNiLW1lcmdlcHJvY2Vzc2luZy5qcyIsImRjYi1yZWdpc3Rlci9kY2ItcmVnaXN0ZXIuanMiLCJkY2Itc3RpY2t5L2RjYi1zdGlja3kuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsIkNPTlNUQU5UUyIsIlBVQkxJQ19CQVNFX1VSTCIsIkFQSV9CQVNFX1VSTCIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGF1dGhQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCJsb2dpblVybCIsInNpZ251cFVybCIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiZGF0YSIsInJlcXVpcmVzTG9nZ2VkSW4iLCJydW4iLCIkcm9vdFNjb3BlIiwiJGxvY2F0aW9uIiwiJGF1dGgiLCIkc3RhdGUiLCJpc0F1dGhvcml6ZWQiLCJ0b1N0YXRlIiwiaXNBdXRoZW50aWNhdGVkIiwicmVkaXJlY3RTdGF0ZSIsIiRvbiIsImUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJuZXh0IiwiaHJlZiIsInJlcGxhY2UiLCJwYXRoIiwiY29uc29sZSIsImxvZyIsImJhbmRTZXJ2aWNlIiwiX2luaXQiLCJ2bSIsInRyYWNrQXJyYXkiLCJiYW5kU3ZjIiwiZ2V0VHJhY2tBcnJheSIsInRoaXMiLCJpbnN0cnVtZW50U2VydmljZSIsImZpbHRlclNlcnZpY2UiLCJmaWx0ZXJEYXRhIiwiZmx0U3ZjIiwic29sb0ZpbHRlckRhdGEiLCJtZXJnZWRTZXJ2aWNlIiwidHJhY2tzIiwic2hvd1RyYWNrcyIsInRoZXJlQXJlVHJhY2tzIiwibG9hZGVkVHJhY2tzIiwic2F2ZWRUaW1lIiwidHJpbUFtb3VudHMiLCJsZW5ndGgiLCJtZXJnZWRTdmMiLCJ3YXZlc3VyZmVyIiwibG9hZCIsImkiLCJ0cmFja19pZCIsImlkIiwiV2F2ZVN1cmZlciIsImNyZWF0ZSIsImNvbnRhaW5lciIsIndhdmVDb2xvciIsInByb2dyZXNzQ29sb3IiLCJmaWxlX3VybCIsInB1c2giLCJ0cmltX2Ftb3VudCIsInVzZXJfaWQiLCJ1c2VyIiwicGxheVBhdXNlIiwiaXNQbGF5aW5nIiwiZ2V0Q3VycmVudFRpbWUiLCJ6b29tIiwidHJpbSIsInRpbWVUb1RyaW0iLCJNYXRoIiwicm91bmQiLCJwbGF5UGF1c2VBbGwiLCJ0b1ByZXZpb3VzIiwicHJldmlvdXNUaW1lIiwidG90YWxUaW1lIiwiZ2V0RHVyYXRpb24iLCJwcm9ncmVzcyIsInNlZWtBbmRDZW50ZXIiLCJ0b1N0YXJ0Iiwic2F2ZSIsIiQiLCJtb2RhbCIsIm1lcmdlVHJhY2tzIiwidGhlbiIsImdvIiwiZXJyb3IiLCIkc2NvcGUiLCJnZXRDb29raWUiLCJjbmFtZSIsIm5hbWUiLCJkZWNvZGVkQ29va2llIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZG9jdW1lbnQiLCJjb29raWUiLCJjYSIsInNwbGl0IiwiYyIsImNoYXJBdCIsInN1YnN0cmluZyIsImluZGV4T2YiLCJnZXRNZXJnZWRUcmFja3MiLCJnZXRUcmFja3MiLCJtZXJnZWRUcmFja3MiLCJmaWx0ZXJlZFRyYWNrcyIsImZpbHRlciIsImZvckVhY2giLCJ0cmFjayIsImtleSIsIm5ld1RyYWNrIiwiQXVkaW8iLCJtZXJnZWRUcmFja0F1ZGlvIiwidm90ZUNvdW50UGVyVHJhY2siLCJtZXJnZWRfdHJhY2tfdm90ZXMiLCJnZXRVc2VyVm90ZXMiLCJ2b3RlZHRyYWNrcyIsInZvdGVkVHJhY2tBcnJheSIsIm1lcmdlZF90cmFja19pZCIsImdvb2RTZWFyY2giLCJhcnRpc3QiLCJtYXRjaCIsIlJlZ0V4cCIsInRpdGxlIiwic29uZ25hbWUiLCJjdXJyZW50QXVkaW9UcmFja0lkIiwibWVyZ2VkRmlsdGVyRGF0YSIsImNvbG9yZWRIYW5kcyIsIm1nZFN2YyIsIkpTT04iLCJwYXJzZSIsInVzZXJJZCIsInBsYXkiLCJ0cmFja0lkIiwicGF1c2UiLCJkb3dubG9hZCIsIndpbmRvdyIsIm9wZW4iLCJ1cFZvdGUiLCJpbnNlcnRWb3RlIiwic3RhdHVzIiwiJHdhdGNoIiwidXNlclNlcnZpY2UiLCJ1c2VyU3ZjIiwiZ2V0VXNlciIsInVzZXJuYW1lIiwiZW1haWwiLCJ0YXJnZXQiLCJnZXRFbGVtZW50QnlJZCIsIm9wdHMiLCJsaW5lcyIsIndpZHRoIiwicmFkaXVzIiwic2NhbGUiLCJjb3JuZXJzIiwiY29sb3IiLCJvcGFjaXR5Iiwicm90YXRlIiwiZGlyZWN0aW9uIiwic3BlZWQiLCJ0cmFpbCIsImZwcyIsInpJbmRleCIsImNsYXNzTmFtZSIsInRvcCIsImxlZnQiLCJzaGFkb3ciLCJod2FjY2VsIiwicG9zaXRpb24iLCJ1cGRhdGUiLCJzcGlubmVyIiwiU3Bpbm5lciIsInNwaW4iLCJsb2FkaW5nIiwidXNlcmluZm8iLCJ1cGRhdGVVc2VyIiwic3RvcCIsInNvbG9TZXJ2aWNlIiwiZ2V0U29sb1RyYWNrcyIsInNvbG9TdmMiLCJzb2xvVHJhY2tzIiwic29sb1RyYWNrQXVkaW8iLCJpbnN0cnVtZW50X2lkIiwic2hvd05vUmVzdWx0c0ZvdW5kIiwiaW5zdFN2YyIsImdldEluc3RydW1lbnRzIiwiaW5zdHJ1bWVudHMiLCJiYW5kVHJhY2tJZEFycmF5IiwiZ2V0VHJhY2tJZEFycmF5IiwidHJhY2tBcnJheUNvdW50IiwiZ2V0VHJhY2tBcnJheUNvdW50IiwiYWRkVG9CYW5kIiwiYWRkVG9UcmFja0FycmF5IiwicmVtb3ZlRnJvbUJhbmQiLCJyZW1vdmVGcm9tVHJhY2tBcnJheSIsIlVwbG9hZCIsImFydGlzdFNlcnZpY2UiLCJ1cGxvYWRlZCIsInNob3dmb3JtIiwiaW5zdHJ1bWVudFN2YyIsImFydGlzdHMiLCJhcnRpc3RTdmMiLCJnZXRBcnRpc3RzIiwidXBsb2FkRmlsZSIsImZpbGUiLCJtYXRlcmlhbF9zZWxlY3QiLCJ1cGxvYWQiLCJmaWxlRm9ybURhdGFOYW1lIiwic2VuZEZpZWxkc0FzIiwic29uZyIsInJlc3AiLCJmaWxlbmFtZSIsInRyYWNrbGVuZ3RoIiwidXBsb2FkZmFpbGVkIiwidHJhY2tfbGVuZ3RoIiwiaW5zdHJ1bWVudHNkcm9wZG93biIsImFydGlzdF9pZCIsImFydGlzdG5hbWUiLCJpbnNlcnRUcmFjayIsImxpc3QiLCJyZXR1cm5WYWx1ZSIsImluZGV4Iiwic2VydmljZSIsIiRodHRwIiwiZ2V0RGF0YSIsIm9wdGlvbnMiLCJnZXQiLCJzdmMiLCIkY29va2llcyIsImxvZ2luIiwidG9rZW4iLCJleHBpcmF0aW9uVGltZSIsIkRhdGUiLCJzZXRUaW1lIiwiZ2V0VGltZSIsInVzZXJEYXRhIiwicHV0T2JqZWN0IiwiZXhwaXJlcyIsImlzTG9nZ2VkSW4iLCJpc0FkbWluIiwiY3JlZGVudGlhbHMiLCJsb2dvdXQiLCJyZW1vdmUiLCJyZWdpc3RlciIsInBvc3QiLCJhcnJheU9iamVjdEluZGV4T2YiLCJteUFycmF5Iiwic2VhcmNoVGVybSIsInByb3BlcnR5IiwibGVuIiwiaW5jcmVtZW50VHJhY2tBcnJheUNvdW50IiwiZGVjcmVtZW50VHJhY2tBcnJheUNvdW50IiwiYWRkVG9UcmFja0lkQXJyYXkiLCJ0cmFja0lkQXJyYXkiLCJyZW1vdmVGcm9tVHJhY2tJZEFycmF5Iiwic3BsaWNlIiwidGVzdEZ1bmN0aW9uIiwiYWxlcnQiLCJjcmVhdGVTb2xvRmlsdGVyRGF0YSIsImNyZWF0ZU1lcmdlZEZpbHRlckRhdGEiLCJ2YWx1ZSIsImdldFRyYWNrQnlJZCIsImRpcmVjdGl2ZSIsInJlc3RyaWN0Iiwic2NvcGUiLCJjb250cm9sbGVyQXMiLCJhdXRoU2VydmljZSIsImF1dGhTdmMiLCJzaG93TG9naW4iLCJzaG93UmVnaXN0ZXIiLCJzaG93QmFuZCIsInBhc3N3b3JkIiwiJGludGVydmFsIiwidGV4dEFycmF5IiwiY3VycmVudEluZGV4IiwiaXMiLCJ0ZXh0Iiwic2lnbnVwIiwicmVzcG9uc2UiLCJ1bnJlZ2lzdGVyIiwiJHdpbmRvdyIsIiR3aW4iLCJlbGVtZW50IiwibGluayIsImF0dHJzIiwidG9wQ2xhc3MiLCJkY2JTdGlja3kiLCJvZmZzZXRUb3AiLCJvZmZzZXQiLCJvbiIsInNjcm9sbFRvcCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLEtBQU1DLFFBQVFDLE9BQU8sT0FDdkIsWUFDQSxhQUNBLFlBQ0EsaUJDSkVDLFVBQWEsV0FFaEIsR0FBSUQsS0FLSixPQUhHQSxHQUFPRSxnQkFBa0IsMEJBQzVCRixFQUFPRyxhQUFlLDhCQUVmSCxJQ1BSRixLQUFJTSxRQUFBLGlCQUFBLHFCQUFBLGdCQUFBLGdCQUFPLFNBQVNDLEVBQWdCQyxFQUFvQkMsRUFBZUMsR0FFckVELEVBQWNFLFNBQWNSLFVBQVVFLGFBQWUsU0FDckRJLEVBQWNHLFVBQWNULFVBQVVFLGFBQWUsWUFDckRHLEVBQW1CSyxVQUFVLEtBRTdCTixFQUNHTyxNQUFNLFFBQ0xDLElBQUssSUFDTEMsWUFBYSxzQkFDYkMsV0FBWSwyQkFFZEgsTUFBTSxRQUNKQyxJQUFLLFFBQ0xDLFlBQWEsc0JBQ2JDLFdBQVksMkJBRWJILE1BQU0sVUFDTEMsSUFBSyxVQUNMQyxZQUFhLHdC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QU1ySyxFQUdkLElBQUl1TixHQUFhL0wsRUFBT3FELE9BQ3ZCLFdBQWMsTUFBTzhILEdBQVE3QixZQUM3QixXQUVJNkIsRUFBUTdCLGFBRVYvTSxFQUFHOEksU0FBVSxFQUNQM0YsRUFBRSxtQkFBbUJDLFFBQzNCRCxFQUFFLG1CQUFtQkMsTUFBTSxTQUNyQnVGLEVBQVFNLE9BQ1J1RyxLQUVKWixFQUFRN0IsY0FBZSxJQUV6QnBFLEVBQVFNLE9BQ0ZqSixFQUFHOEksU0FBVSxFQUNiMEcsT0FFTCxLQXZCTDNRLFNBeUJPLFNBQVMwUSxHQUViNUcsRUFBUU0sT0FDUmpKLEVBQUc4SSxTQUFVLEVBQ1psSixRQUFRQyxJQUFJMFAsWUM3RXBCalMsSUFBSWlSLFVBQVUsYUFBQSxVQUFhLFNBQVNrQixHQUNuQyxHQUFJQyxHQUFPblMsUUFBUW9TLFFBQVFGLEVBRTNCLFFBQ0NqQixTQUFVLElBQ1ZvQixLQUFNLFNBQVVuQixFQUFPa0IsRUFBU0UsR0FDMUIsR0FBSUMsR0FBV0QsRUFBTUUsVUFDakJDLEVBQVlMLEVBQVFNLFNBQVM1SCxHQUVqQ3FILEdBQUtRLEdBQUcsU0FBVSxTQUFVOVEsR0FDdEJzUSxFQUFLUyxhQUFlSCxFQUN0QkwsRUFBUVMsU0FBU04sR0FFakJILEVBQVFVLFlBQVlQIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIiwgW1xuXHRcdFwidWkucm91dGVyXCIsXG5cdFx0XCJzYXRlbGxpemVyXCIsXG5cdFx0XCJuZ0Nvb2tpZXNcIixcblx0XHRcIm5nRmlsZVVwbG9hZFwiXG5cdF0pOyIsInZhciBDT05TVEFOVFMgPSAoZnVuY3Rpb24gKCkge1xuXHRcblx0dmFyIG1vZHVsZSA9IHt9O1xuXG4gICAgbW9kdWxlLlBVQkxJQ19CQVNFX1VSTCA9IFwiaHR0cDovL2Rpc2NvdmVyYmFuZC5hcGlcIjtcblx0bW9kdWxlLkFQSV9CQVNFX1VSTCA9IFwiaHR0cDovL2Rpc2NvdmVyYmFuZC5hcGkvYXBpXCI7XG5cblx0cmV0dXJuIG1vZHVsZTtcbn0oKSk7IiwiYXBwLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkYXV0aFByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKSB7XG4gIFxuICAkYXV0aFByb3ZpZGVyLmxvZ2luVXJsICAgID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArICcvbG9naW4nO1xuICAkYXV0aFByb3ZpZGVyLnNpZ251cFVybCAgID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArICcvcmVnaXN0ZXInO1xuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcblxuICAkc3RhdGVQcm92aWRlclxuICAgIC5zdGF0ZSgnaG9tZScsIHtcbiAgICAgIHVybDogXCIvXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvaG9tZS5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcImhvbWVDb250cm9sbGVyIGFzIGhvbWVcIlxuICAgIH0pXG4gIFx0LnN0YXRlKCdzb2xvJywge1xuICAgICAgdXJsOiBcIi9zb2xvXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvc29sby5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcInNvbG9Db250cm9sbGVyIGFzIHNvbG9cIlxuICAgIH0pXG4gICAgLnN0YXRlKCdtZXJnZWQnLCB7XG4gICAgICB1cmw6IFwiL21lcmdlZFwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL21lcmdlZC5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcIm1lcmdlZENvbnRyb2xsZXIgYXMgbWVyZ2VkXCJcbiAgICB9KVxuICAgIC5zdGF0ZSgnYmFuZCcsIHtcbiAgICAgIHVybDogXCIvYmFuZFwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL2JhbmQuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJiYW5kQ29udHJvbGxlciBhcyBiYW5kXCJcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVyZ2UnLCB7XG4gICAgICB1cmw6IFwiL21lcmdlXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvbWVyZ2UuaHRtbFwiLFxuICAgICAgY29udHJvbGxlcjogXCJtZXJnZUNvbnRyb2xsZXIgYXMgbWVyZ2VcIlxuICAgIH0pXG4gICAgLnN0YXRlKCdwcm9maWxlJywge1xuICAgICAgdXJsOiBcIi9wcm9maWxlXCIsXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvcGFnZXMvcHJvZmlsZS5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcInByb2ZpbGVDb250cm9sbGVyIGFzIHByb2ZpbGVcIixcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgcmVxdWlyZXNMb2dnZWRJbjogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCd1cGxvYWQnLCB7XG4gICAgICB1cmw6IFwiL3VwbG9hZFwiLFxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL3BhZ2VzL3VwbG9hZC5odG1sXCIsXG4gICAgICBjb250cm9sbGVyOiBcInVwbG9hZENvbnRyb2xsZXIgYXMgdXBsb2FkXCIsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHJlcXVpcmVzTG9nZ2VkSW46IHRydWVcbiAgICAgIH1cbiAgICB9KVxufSlcbi5ydW4oZnVuY3Rpb24gKCRyb290U2NvcGUsICRsb2NhdGlvbiwgJGF1dGgsICRzdGF0ZSkgeyBcblxuICAvL0dsb2JhbHNcbiAgdmFyIHJlZGlyZWN0U3RhdGUgPSBcIi9cIjtcblxuICAvL1JlZGlyZWN0IHJvdXRlcyBpZiBub3QgYWRtaW5cbiAgJHJvb3RTY29wZS4kb24oXCIkc3RhdGVDaGFuZ2VTdGFydFwiLCBmdW5jdGlvbiAoZSwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xuXG4gICAgdmFyIG5leHQgPSB0b1N0YXRlLnVybDtcblxuICAgIC8vU3RyaXAgaGFzaGJhbmdzIHVzaW5nIFJlZ0V4XG4gICAgaWYodG9QYXJhbXMpIFxuICAgIHtcbiAgICAgIG5leHQgPSAkc3RhdGUuaHJlZih0b1N0YXRlLCB0b1BhcmFtcyk7XG4gICAgICBuZXh0ID0gbmV4dC5yZXBsYWNlKFwiI1wiLCBcIlwiKTtcbiAgICB9XG5cbiAgICBpZiAoaXNBdXRob3JpemVkKHRvU3RhdGUpKVxuICAgIHtcbiAgICAgICRsb2NhdGlvbi5wYXRoKG5leHQpO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgY29uc29sZS5sb2coXCJub3RMb2dnZWRJblwiKTtcbiAgICAgICRsb2NhdGlvbi5wYXRoKHJlZGlyZWN0U3RhdGUpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy9Qcml2YXRlIGZ1bmN0aW9uc1xuICBmdW5jdGlvbiBpc0F1dGhvcml6ZWQgKHRvU3RhdGUpIHtcblxuICAgIGlmKHRvU3RhdGUuZGF0YSAmJiB0b1N0YXRlLmRhdGEucmVxdWlyZXNMb2dnZWRJbilcbiAgICAgIHJldHVybiAkYXV0aC5pc0F1dGhlbnRpY2F0ZWQoKTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufSk7IiwiYXBwLmNvbnRyb2xsZXIoXCJiYW5kQ29udHJvbGxlclwiLCBmdW5jdGlvbihiYW5kU2VydmljZSkge1xuXHRcblx0dmFyIHZtIFx0XHQ9IHRoaXM7XG5cdHZhciBiYW5kU3ZjID0gYmFuZFNlcnZpY2U7XG5cblx0ZnVuY3Rpb24gX2luaXQoKSB7XG5cdFx0dm0udHJhY2tBcnJheSA9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheTtcblx0fVxuXG5cdF9pbml0KCk7XG59KTsiLCJhcHAuY29udHJvbGxlcihcImhvbWVDb250cm9sbGVyXCIsIGZ1bmN0aW9uKGluc3RydW1lbnRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XG5cdFxuXHR2YXIgdm0gPSB0aGlzO1xuXHR2YXIgaW5zdFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xuXHR2YXIgZmx0U3ZjID0gZmlsdGVyU2VydmljZTtcblxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcblx0XHR2bS5maWx0ZXJEYXRhID0gZmx0U3ZjLnNvbG9GaWx0ZXJEYXRhO1xuXHR9XG5cblx0X2luaXQoKTtcbn0pOyIsImFwcC5jb250cm9sbGVyKFwibWVyZ2VDb250cm9sbGVyXCIsIGZ1bmN0aW9uKGJhbmRTZXJ2aWNlLCBtZXJnZWRTZXJ2aWNlLCAkc3RhdGUpIHtcblx0dmFyIHZtIFx0XHRcdD0gdGhpcztcblx0dmFyIGJhbmRTdmMgXHQ9IGJhbmRTZXJ2aWNlO1xuXHR2YXIgbWVyZ2VkU3ZjIFx0PSBtZXJnZWRTZXJ2aWNlO1xuXHR2YXIgd2F2ZXN1cmZlciBcdD0gW107XG5cblx0ZnVuY3Rpb24gX2luaXQoKSB7XG5cdFx0dm0udHJhY2tzIFx0XHRcdD0gYmFuZFN2Yy5nZXRUcmFja0FycmF5KCk7XG5cdFx0dm0uc2hvd1RyYWNrcyBcdFx0PSBmYWxzZTtcblx0XHR2bS50aGVyZUFyZVRyYWNrc1x0PSBmYWxzZTtcblx0XHR2bS5sb2FkZWRUcmFja3MgXHQ9IFtdO1xuXHRcdHZtLnNhdmVkVGltZSBcdFx0PSBbXTtcblx0XHR2bS50cmltQW1vdW50cyAgXHQ9IFtdO1xuXG5cdFx0aWYodm0udHJhY2tzLmxlbmd0aCA+IDApXG5cdFx0e1xuXHRcdFx0dm0udGhlcmVBcmVUcmFja3NcdD0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHR2bS5sb2FkID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYodm0udGhlcmVBcmVUcmFja3MpXG5cdFx0e1xuXHRcdFx0Zm9yICh2YXIgaSA9IHZtLnRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHR2YXIgdHJhY2tfaWQgPSB2bS50cmFja3NbaV0uaWQ7XG5cblx0XHRcdFx0d2F2ZXN1cmZlclt0cmFja19pZF0gPSBXYXZlU3VyZmVyLmNyZWF0ZSh7XG5cdFx0ICAgIFx0XHRjb250YWluZXI6ICcjd2F2ZWZvcm0nK3RyYWNrX2lkLFxuXHRcdCAgICBcdFx0d2F2ZUNvbG9yOiAnZ3JlZW4nLFxuXHRcdCAgICBcdFx0cHJvZ3Jlc3NDb2xvcjogJ3B1cnBsZSdcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0d2F2ZXN1cmZlclt0cmFja19pZF0ubG9hZChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgJy9hdWRpby8nICsgdm0udHJhY2tzW2ldLmZpbGVfdXJsKTtcblxuXHRcdFx0XHR2bS5sb2FkZWRUcmFja3MucHVzaCh7XG5cdCAgICAgICAgICAgIFx0dHJhY2tfaWQ6IHRyYWNrX2lkLFxuXHQgICAgICAgICAgICBcdHRyaW1fYW1vdW50OiAwLFxuXHQgICAgICAgICAgICBcdHVzZXJfaWQ6IHZtLnRyYWNrc1tpXS51c2VyLmlkXG5cdCAgICAgICAgXHR9KTtcblxuXHQgICAgICAgIFx0Y29uc29sZS5sb2codm0ubG9hZGVkVHJhY2tzKTtcblx0XHRcdH1cblx0XHRcdHZtLnNob3dUcmFja3MgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdHZtLnBsYXlQYXVzZSA9IGZ1bmN0aW9uKGlkKSB7XG5cdFx0aWYoIXdhdmVzdXJmZXJbaWRdLmlzUGxheWluZygpKVxuXHRcdHtcblx0XHRcdHZtLnNhdmVkVGltZVtpZF0gPSB3YXZlc3VyZmVyW2lkXS5nZXRDdXJyZW50VGltZSgpO1xuXHRcdFx0Y29uc29sZS5sb2codm0uc2F2ZWRUaW1lKTtcblx0XHR9XG5cblx0XHR3YXZlc3VyZmVyW2lkXS5wbGF5UGF1c2UoKTtcblx0XHR3YXZlc3VyZmVyW2lkXS56b29tKDUwKTtcblx0fVxuXG5cdHZtLnRyaW0gPSBmdW5jdGlvbihpZCkge1xuXHRcdHZhciB0aW1lVG9UcmltID0gd2F2ZXN1cmZlcltpZF0uZ2V0Q3VycmVudFRpbWUoKTtcblx0XHRmb3IgKHZhciBpID0gdm0ubG9hZGVkVHJhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRpZih2bS5sb2FkZWRUcmFja3NbaV0udHJhY2tfaWQgPT09IGlkKVxuXHRcdFx0e1xuXHRcdFx0XHR2bS5sb2FkZWRUcmFja3NbaV0udHJpbV9hbW91bnQgXHQ9IHRpbWVUb1RyaW07XG5cdFx0XHRcdHZtLnRyaW1BbW91bnRzW2lkXSBcdFx0XHRcdD0gTWF0aC5yb3VuZCh0aW1lVG9UcmltICogMTAwKSAvIDEwMDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXG5cdHZtLnBsYXlQYXVzZUFsbCA9IGZ1bmN0aW9uKCkge1xuXHRcdGZvciAodmFyIGkgPSB2bS5sb2FkZWRUcmFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdHZhciBpZCA9IHZtLmxvYWRlZFRyYWNrc1tpXS50cmFja19pZDtcblx0XHRcdGlmKCF3YXZlc3VyZmVyW2lkXS5pc1BsYXlpbmcoKSlcblx0XHRcdHtcblx0XHRcdFx0dm0uc2F2ZWRUaW1lW2lkXSA9IHdhdmVzdXJmZXJbaWRdLmdldEN1cnJlbnRUaW1lKCk7XG5cdFx0XHR9XG5cbiAgICBcdFx0d2F2ZXN1cmZlcltpZF0ucGxheVBhdXNlKCk7XG4gICAgXHRcdHdhdmVzdXJmZXJbaWRdLnpvb20oNTApO1xuXHRcdH1cblx0fVxuXG5cdHZtLnRvUHJldmlvdXMgPSBmdW5jdGlvbigpIHtcblx0XHRmb3IgKHZhciBpID0gdm0ubG9hZGVkVHJhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHR2YXIgaWQgPSB2bS5sb2FkZWRUcmFja3NbaV0udHJhY2tfaWQ7XG5cdFx0XHR2YXIgcHJldmlvdXNUaW1lIFx0PSB2bS5zYXZlZFRpbWVbaWRdO1xuXHRcdFx0dmFyIHRvdGFsVGltZVx0XHQ9IHdhdmVzdXJmZXJbaWRdLmdldER1cmF0aW9uKCk7XG5cdFx0XHR2YXIgcHJvZ3Jlc3MgPSBwcmV2aW91c1RpbWUgLyB0b3RhbFRpbWU7XG5cdFx0XHR3YXZlc3VyZmVyW2lkXS5zZWVrQW5kQ2VudGVyKHByb2dyZXNzKTtcblx0XHR9XG5cdH1cblxuXHR2bS50b1N0YXJ0ID0gZnVuY3Rpb24oaWQpIHtcblx0XHR3YXZlc3VyZmVyW2lkXS5zZWVrQW5kQ2VudGVyKDApO1xuXHR9XG5cblx0XG5cdHZtLnNhdmUgPSBmdW5jdGlvbigpIHtcblx0XHQkKCcjcHJvY2Vzc2luZ19tb2RhbCcpLm1vZGFsKCk7XG5cdFx0JCgnI3Byb2Nlc3NpbmdfbW9kYWwnKS5tb2RhbCgnb3BlbicpO1xuXHRcdFxuXHRcdG1lcmdlZFN2Yy5tZXJnZVRyYWNrcyh2bS5sb2FkZWRUcmFja3MpXG5cdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSlcbiAgICAgICAge1xuICAgICAgICBcdCQoJyNwcm9jZXNzaW5nX21vZGFsJykubW9kYWwoJ2Nsb3NlJyk7XG4gICAgICAgIFx0JHN0YXRlLmdvKFwibWVyZ2VkXCIpO1xuXG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKVxuICAgICAgICB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcblx0fVxuXG5cdF9pbml0KCk7XG59KTsiLCJhcHAuY29udHJvbGxlcihcIm1lcmdlZENvbnRyb2xsZXJcIiwgZnVuY3Rpb24oJHNjb3BlLCBtZXJnZWRTZXJ2aWNlLCBmaWx0ZXJTZXJ2aWNlKSB7XG5cdFxuXHR2YXIgdm0gIFx0XHQ9IHRoaXM7XG5cdHZhciBtZ2RTdmMgXHRcdD0gbWVyZ2VkU2VydmljZTtcblx0dmFyIGZsdFN2YyBcdFx0PSBmaWx0ZXJTZXJ2aWNlO1xuXHR2YXIgdXNlcl9pZFx0XHQ9IG51bGw7XG5cblx0aWYoSlNPTi5wYXJzZShnZXRDb29raWUoJ3VzZXInKSkudXNlcklkKVxuXHR7XG5cdFx0dmFyIHVzZXJfaWQgXHQ9IEpTT04ucGFyc2UoZ2V0Q29va2llKCd1c2VyJykpLnVzZXJJZDtcblx0fVxuXHRcblxuXHQvL1ByaXZhdGUgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIHBsYXlBdWRpb0ZpbGUodHJhY2spXG5cdHtcblx0XHR0cmFjay5wbGF5KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRDb29raWUoY25hbWUpIHtcbiAgICAgICAgICB2YXIgbmFtZSA9IGNuYW1lICsgXCI9XCI7XG4gICAgICAgICAgdmFyIGRlY29kZWRDb29raWUgPSBkZWNvZGVVUklDb21wb25lbnQoZG9jdW1lbnQuY29va2llKTtcbiAgICAgICAgICB2YXIgY2EgPSBkZWNvZGVkQ29va2llLnNwbGl0KCc7Jyk7XG4gICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8Y2EubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgdmFyIGMgPSBjYVtpXTtcbiAgICAgICAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApID09ICcgJykge1xuICAgICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjLmluZGV4T2YobmFtZSkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWUubGVuZ3RoLCBjLmxlbmd0aCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB9XG5cblx0ZnVuY3Rpb24gZ2V0TWVyZ2VkVHJhY2tzKCkge1xuXHRcdG1lcmdlZFNlcnZpY2UuZ2V0VHJhY2tzKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0dm0ubWVyZ2VkVHJhY2tzID0gZGF0YS5kYXRhO1xuXHRcdFx0XHR2bS5maWx0ZXJlZFRyYWNrcyA9IHZtLm1lcmdlZFRyYWNrcztcblx0XHRcdFx0ZmlsdGVyKCk7XG5cblx0XHRcdFx0YW5ndWxhci5mb3JFYWNoKHZtLm1lcmdlZFRyYWNrcywgZnVuY3Rpb24odHJhY2ssIGtleSkge1xuXHRcdFx0XHRcdG5ld1RyYWNrID0gbmV3IEF1ZGlvKENPTlNUQU5UUy5QVUJMSUNfQkFTRV9VUkwgKyAnL2F1ZGlvLycgKyB0cmFjay5maWxlX3VybCk7XG5cdFx0XHRcdFx0dm0ubWVyZ2VkVHJhY2tBdWRpb1t0cmFjay5pZF0gPSBuZXdUcmFjaztcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Zm9yICh2YXIgaSA9IHZtLm1lcmdlZFRyYWNrcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdHZtLnZvdGVDb3VudFBlclRyYWNrW3ZtLm1lcmdlZFRyYWNrc1tpXS5pZF0gPSB2bS5tZXJnZWRUcmFja3NbaV0ubWVyZ2VkX3RyYWNrX3ZvdGVzLmxlbmd0aDtcblx0XHRcdFx0fVxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFVzZXJWb3RlcygpIHtcblx0XHRpZih1c2VyX2lkICE9IG51bGwpXG5cdFx0e1xuXHRcdFx0bWVyZ2VkU2VydmljZS5nZXRVc2VyVm90ZXModXNlcl9pZClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHRcdHZtLnZvdGVkdHJhY2tzID0gZGF0YS5kYXRhO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gdm0udm90ZWR0cmFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHR2bS52b3RlZFRyYWNrQXJyYXkucHVzaCh2bS52b3RlZHRyYWNrc1tpXS5tZXJnZWRfdHJhY2tfaWQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnNvbGUubG9nKHZtLnZvdGVkVHJhY2tBcnJheSk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGZpbHRlcigpIHtcblx0XHRcblx0XHR2bS5maWx0ZXJlZFRyYWNrcyA9IFtdO1xuXG5cdFx0YW5ndWxhci5mb3JFYWNoKHZtLm1lcmdlZFRyYWNrcywgZnVuY3Rpb24odHJhY2ssIGtleSkge1xuXG5cdFx0XHRnb29kU2VhcmNoID0gdHJ1ZTtcblxuXHRcdFx0aWYoIXZtLmZpbHRlckRhdGEuYXJ0aXN0ID09IFwiXCIgJiYgIXRyYWNrLmFydGlzdC5uYW1lLm1hdGNoKG5ldyBSZWdFeHAodm0uZmlsdGVyRGF0YS5hcnRpc3QsIFwiaVwiKSkpXG5cdFx0XHR7XG5cdFx0XHRcdGdvb2RTZWFyY2ggPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYoIXZtLmZpbHRlckRhdGEudGl0bGUgPT0gXCJcIiAmJiAhdHJhY2suc29uZ25hbWUubWF0Y2gobmV3IFJlZ0V4cCh2bS5maWx0ZXJEYXRhLnRpdGxlLCBcImlcIikpKVxuXHRcdFx0e1xuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XG5cdFx0XHR9XG5cblxuXHRcdFx0aWYoZ29vZFNlYXJjaClcblx0XHRcdHtcblx0XHRcdFx0dm0uZmlsdGVyZWRUcmFja3MucHVzaCh0cmFjayk7XG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xuXHRcdHZtLm1lcmdlZFRyYWNrQXVkaW8gXHQ9IFtdO1xuXHRcdHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgXHQ9IFwiXCI7XG5cdFx0Z2V0TWVyZ2VkVHJhY2tzKCk7XG5cdFx0Z2V0VXNlclZvdGVzKCk7XG5cdFx0dm0uZmlsdGVyRGF0YSBcdFx0XHQ9IGZsdFN2Yy5tZXJnZWRGaWx0ZXJEYXRhO1xuXHRcdHZtLnZvdGVDb3VudFBlclRyYWNrIFx0PSBbXTtcblx0XHR2bS5jb2xvcmVkSGFuZHMgXHRcdD0gW107XG5cdFx0dm0udm90ZWRUcmFja0FycmF5IFx0XHQ9IFtdO1xuXHR9XG5cblx0Ly9WbSBmdW5jdGlvbnNcblx0dm0ucGxheSA9IGZ1bmN0aW9uKHRyYWNrSWQpIHtcblxuXHRcdGlmKHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgIT0gXCJcIikge1xuXHRcdFx0dm0ucGF1c2Uodm0uY3VycmVudEF1ZGlvVHJhY2tJZCk7XG5cdFx0fVxuXG5cdFx0dm0uY3VycmVudEF1ZGlvVHJhY2tJZCA9IHRyYWNrSWQ7XG5cdFx0dm0ubWVyZ2VkVHJhY2tBdWRpb1t0cmFja0lkXS5wbGF5KCk7XG5cdH1cblxuXHR2bS5wYXVzZSA9IGZ1bmN0aW9uKHRyYWNrSWQpIHtcblx0XHR2bS5tZXJnZWRUcmFja0F1ZGlvW3RyYWNrSWRdLnBhdXNlKCk7XG5cdFx0dm0uY3VycmVudEF1ZGlvVHJhY2tJZCA9IFwiXCI7XG5cdH1cblxuXHR2bS5kb3dubG9hZCA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgXHR3aW5kb3cub3BlbihDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgJy9tZXJnZWR0cmFja3MvJyArIGlkICsgJy9kb3dubG9hZCcsICdfYmxhbmsnLCAnJyk7ICBcblx0fVxuXG5cdHZtLnVwVm90ZSA9IGZ1bmN0aW9uKGlkKSB7XG5cdCAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIHRyYWNrX2lkOiBpZCxcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJfaWRcblx0ICAgIH1cblxuXHQgICAgbWdkU3ZjLmluc2VydFZvdGUoZGF0YSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSlcbiAgICAgICAge1xuICAgICAgICBcdGlmKGRhdGEuZGF0YS5zdGF0dXMgPT0gXCJPS1wiKVxuICAgICAgICBcdHtcbiAgICAgICAgXHRcdHZtLnZvdGVDb3VudFBlclRyYWNrW2lkXSsrO1xuICAgICAgICBcdFx0dm0udm90ZWRUcmFja0FycmF5LnB1c2goaWQpO1xuICAgICAgICBcdH1cbiAgICAgICAgXHRlbHNlXG4gICAgICAgIFx0e1xuICAgICAgICBcdFx0Y29uc29sZS5sb2coJ2FscmVhZHkgdm90ZWQnKTtcbiAgICAgICAgXHR9XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKVxuICAgICAgICB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcblx0fVxuXG5cdC8vV2F0Y2hlc1xuXHQkc2NvcGUuJHdhdGNoKFxuXHRcdGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZtLmZpbHRlckRhdGEgfSwgXG5cdFx0ZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRpZih2bS5maWx0ZXJEYXRhKSBcblx0XHRcdHtcblx0XHRcdFx0ZmlsdGVyKCk7XG5cdFx0XHR9XG5cdFx0fSwgdHJ1ZSk7XG5cblx0X2luaXQoKTtcbn0pOyIsImFwcC5jb250cm9sbGVyKFwicHJvZmlsZUNvbnRyb2xsZXJcIiwgZnVuY3Rpb24odXNlclNlcnZpY2UpIHtcblx0XG5cdHZhciB2bSBcdFx0PSB0aGlzO1xuXHR2YXIgdXNlclN2YyA9IHVzZXJTZXJ2aWNlO1xuXHR2YXIgdGFyZ2V0IFx0PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXBkYXRlLXByb2ZpbGUtc3Bpbm5lcicpO1xuXG5cdHZhciBvcHRzID0ge1xuXHRcdFx0bGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xuXHRcdCwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxuXHRcdCwgd2lkdGg6IDEyIC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xuXHRcdCwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcblx0XHQsIHNjYWxlOiAwLjE1IC8vIFNjYWxlcyBvdmVyYWxsIHNpemUgb2YgdGhlIHNwaW5uZXJcblx0XHQsIGNvcm5lcnM6IDEgLy8gQ29ybmVyIHJvdW5kbmVzcyAoMC4uMSlcblx0XHQsIGNvbG9yOiAnIzAwMCcgLy8gI3JnYiBvciAjcnJnZ2JiIG9yIGFycmF5IG9mIGNvbG9yc1xuXHRcdCwgb3BhY2l0eTogMC4yNSAvLyBPcGFjaXR5IG9mIHRoZSBsaW5lc1xuXHRcdCwgcm90YXRlOiAwIC8vIFRoZSByb3RhdGlvbiBvZmZzZXRcblx0XHQsIGRpcmVjdGlvbjogMSAvLyAxOiBjbG9ja3dpc2UsIC0xOiBjb3VudGVyY2xvY2t3aXNlXG5cdFx0LCBzcGVlZDogMSAvLyBSb3VuZHMgcGVyIHNlY29uZFxuXHRcdCwgdHJhaWw6IDYwIC8vIEFmdGVyZ2xvdyBwZXJjZW50YWdlXG5cdFx0LCBmcHM6IDIwIC8vIEZyYW1lcyBwZXIgc2Vjb25kIHdoZW4gdXNpbmcgc2V0VGltZW91dCgpIGFzIGEgZmFsbGJhY2sgZm9yIENTU1xuXHRcdCwgekluZGV4OiAyZTkgLy8gVGhlIHotaW5kZXggKGRlZmF1bHRzIHRvIDIwMDAwMDAwMDApXG5cdFx0LCBjbGFzc05hbWU6ICdzcGlubmVyJyAvLyBUaGUgQ1NTIGNsYXNzIHRvIGFzc2lnbiB0byB0aGUgc3Bpbm5lclxuXHRcdCwgdG9wOiAnODklJyAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG5cdFx0LCBsZWZ0OiAnMjUuNSUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG5cdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XG5cdFx0LCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cblx0XHQsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcblx0fVxuXG5cdGZ1bmN0aW9uIF9pbml0KCkge1xuXHRcdHVzZXJTdmMuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdHZtLnVzZXJuYW1lID0gZGF0YS5kYXRhLnVzZXJuYW1lO1xuXHRcdFx0dm0uZW1haWwgXHQ9IGRhdGEuZGF0YS5lbWFpbDtcblx0XHR9KTtcblx0fVxuXG5cdHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBzcGlubmVyID0gbmV3IFNwaW5uZXIob3B0cykuc3Bpbih0YXJnZXQpO1xuXHQgICAgdm0ubG9hZGluZyBcdD0gdHJ1ZTtcblxuXHRcdHZhciB1c2VyaW5mbyA9IHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB2bS51c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiB2bS5lbWFpbFxuICAgICAgICB9XG5cblx0XHR1c2VyU3ZjLnVwZGF0ZVVzZXIodXNlcmluZm8pXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKVxuXHRcdFx0e1xuXHRcdFx0XHRzcGlubmVyLnN0b3AoKTtcblx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpXG5cdFx0XHR7XG5cdFx0XHRcdHNwaW5uZXIuc3RvcCgpO1xuXHRcdFx0XHR2bS5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHR9KTtcblx0fVxuXG5cdF9pbml0KCk7XG59KTsiLCJhcHAuY29udHJvbGxlcihcInNvbG9Db250cm9sbGVyXCIsIGZ1bmN0aW9uKCRzY29wZSwgYmFuZFNlcnZpY2UsIHNvbG9TZXJ2aWNlLCBpbnN0cnVtZW50U2VydmljZSwgZmlsdGVyU2VydmljZSkge1xuXHRcblx0dmFyIHZtID0gdGhpcztcblx0dmFyIGJhbmRTdmMgPSBiYW5kU2VydmljZTtcblx0dmFyIHNvbG9TdmMgPSBzb2xvU2VydmljZTtcblx0dmFyIGluc3RTdmMgPSBpbnN0cnVtZW50U2VydmljZTtcblx0dmFyIGZsdFN2YyA9IGZpbHRlclNlcnZpY2U7XG5cblx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xuXHRmdW5jdGlvbiBwbGF5QXVkaW9GaWxlKHRyYWNrKVxuXHR7XG5cdFx0dHJhY2sucGxheSgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0U29sb1RyYWNrcygpXG5cdHtcblx0XHRzb2xvU3ZjLmdldFRyYWNrcygpXG5cdFx0XHQudGhlbihmdW5jdGlvbihkYXRhKVxuXHRcdFx0e1xuXHRcdFx0XHR2bS5zb2xvVHJhY2tzID0gZGF0YS5kYXRhO1xuXHRcdFx0XHR2bS5maWx0ZXJlZFRyYWNrcyA9IHZtLnNvbG9UcmFja3M7XG5cdFx0XHRcdGZpbHRlcigpO1xuXG5cdFx0XHRcdGFuZ3VsYXIuZm9yRWFjaCh2bS5zb2xvVHJhY2tzLCBmdW5jdGlvbih0cmFjaywga2V5KSB7XG5cdFx0XHRcdFx0XHQvL25ld1RyYWNrID0gbmV3IEF1ZGlvKHRyYWNrLmZpbGVfdXJsKTtcblx0XHRcdFx0XHRcdG5ld1RyYWNrID0gbmV3IEF1ZGlvKENPTlNUQU5UUy5QVUJMSUNfQkFTRV9VUkwgKyAnL2F1ZGlvLycgKyB0cmFjay5maWxlX3VybCk7XG5cdFx0XHRcdFx0XHR2bS5zb2xvVHJhY2tBdWRpb1t0cmFjay5pZF0gPSBuZXdUcmFjaztcblx0XHRcdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZmlsdGVyKClcblx0e1xuXHRcdHZtLmZpbHRlcmVkVHJhY2tzID0gW107XG5cblx0XHRhbmd1bGFyLmZvckVhY2godm0uc29sb1RyYWNrcywgZnVuY3Rpb24odHJhY2ssIGtleSlcblx0XHR7XG5cdFx0XHRnb29kU2VhcmNoID0gdHJ1ZTtcblxuXHRcdFx0aWYoIXZtLmZpbHRlckRhdGEuYXJ0aXN0ID09IFwiXCIgJiYgIXRyYWNrLmFydGlzdC5uYW1lLm1hdGNoKG5ldyBSZWdFeHAodm0uZmlsdGVyRGF0YS5hcnRpc3QsIFwiaVwiKSkpXG5cdFx0XHR7XG5cdFx0XHRcdGdvb2RTZWFyY2ggPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0aWYoIXZtLmZpbHRlckRhdGEudGl0bGUgPT0gXCJcIiAmJiAhdHJhY2suc29uZ25hbWUubWF0Y2gobmV3IFJlZ0V4cCh2bS5maWx0ZXJEYXRhLnRpdGxlLCBcImlcIikpKVxuXHRcdFx0e1xuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGlmKCF2bS5maWx0ZXJEYXRhW3RyYWNrLmluc3RydW1lbnRfaWRdKVxuXHRcdFx0e1xuXHRcdFx0XHRnb29kU2VhcmNoID0gZmFsc2U7XG5cdFx0XHR9XG5cblxuXHRcdFx0aWYoZ29vZFNlYXJjaClcblx0XHRcdHtcblx0XHRcdFx0dm0uZmlsdGVyZWRUcmFja3MucHVzaCh0cmFjayk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRpZih2bS5maWx0ZXJlZFRyYWNrcy5sZW5ndGggPT09IDApIFxuXHRcdHtcblx0XHRcdHZtLnNob3dOb1Jlc3VsdHNGb3VuZCA9IHRydWU7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHR2bS5zaG93Tm9SZXN1bHRzRm91bmQgPSBmYWxzZTtcblx0XHR9XG5cdH1cblxuXHQvKmZ1bmN0aW9uIGFycmF5T2JqZWN0SW5kZXhPZihteUFycmF5LCBzZWFyY2hUZXJtLCBwcm9wZXJ0eSkge1xuICAgIFx0XG4gICAgXHRmb3IodmFyIGkgPSAwLCBsZW4gPSBteUFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIFx0aWYgKG15QXJyYXlbaV1bcHJvcGVydHldID09PSBzZWFyY2hUZXJtKSByZXR1cm4gaTtcbiAgICBcdH1cblxuICAgIFx0cmV0dXJuIC0xO1xuXHR9Ki9cblxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcblx0XHR2bS5zb2xvVHJhY2tBdWRpbyBcdFx0PSBbXTtcblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkIFx0PSBcIlwiO1xuXHRcdHZtLnNob3dOb1Jlc3VsdHNGb3VuZCBcdD0gZmFsc2U7XG5cblx0XHRpbnN0U3ZjLmdldEluc3RydW1lbnRzKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKGRhdGEpXG5cdFx0XHR7XG5cdFx0XHRcdHZtLmluc3RydW1lbnRzID0gZGF0YS5kYXRhO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpXG5cdFx0XHR7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pO1xuXG5cdFx0Z2V0U29sb1RyYWNrcygpO1xuXHRcdHZtLmZpbHRlckRhdGEgXHRcdFx0PSBmbHRTdmMuc29sb0ZpbHRlckRhdGE7XG5cdFx0dm0udHJhY2tBcnJheSBcdFx0XHQ9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheTtcblx0XHR2bS5iYW5kVHJhY2tJZEFycmF5IFx0PSBiYW5kU3ZjLmdldFRyYWNrSWRBcnJheTtcblx0XHR2bS50cmFja0FycmF5Q291bnQgXHRcdD0gYmFuZFN2Yy5nZXRUcmFja0FycmF5Q291bnQ7XHRcblx0fVxuXG5cdC8vVm0gZnVuY3Rpb25zXG5cdHZtLmFkZFRvQmFuZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XG5cblx0XHRiYW5kU3ZjLmFkZFRvVHJhY2tBcnJheSh0cmFjayk7XG5cdFx0Lyp2bS5iYW5kVHJhY2tJZEFycmF5ID0gW107XG5cblx0XHRiYW5kU3ZjLnRyYWNrQXJyYXkucHVzaCh0cmFjayk7XG5cdFx0YmFuZFN2Yy50cmFja0FycmF5Q291bnQgKys7XG5cdFx0YW5ndWxhci5mb3JFYWNoKGJhbmRTdmMudHJhY2tBcnJheSwgZnVuY3Rpb24odHJhY2ssIGtleSkge1xuXHRcdFx0dm0uYmFuZFRyYWNrSWRBcnJheS5wdXNoKHRyYWNrLmlkKTtcblx0XHR9KTsqL1xuXG5cdFx0Y29uc29sZS5sb2codHJhY2spO1xuXHR9XG5cblx0dm0ucmVtb3ZlRnJvbUJhbmQgPSBmdW5jdGlvbih0cmFjaykge1xuXHRcdFxuXHRcdGJhbmRTdmMucmVtb3ZlRnJvbVRyYWNrQXJyYXkodHJhY2spO1xuXHRcdC8qaW5kZXggPSBhcnJheU9iamVjdEluZGV4T2YoYmFuZFN2Yy50cmFja0FycmF5LCB0cmFjay5pZCwgXCJpZFwiKTtcblx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0YmFuZFN2Yy50cmFja0FycmF5LnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRiYW5kU3ZjLnRyYWNrQXJyYXlDb3VudCAtLTtcblx0XHRcdHZtLmJhbmRUcmFja0FycmF5ID0gYmFuZFN2Yy50cmFja0FycmF5O1xuXG5cdFx0XHRpbnRJbmRleCA9IHZtLmJhbmRUcmFja0lkQXJyYXkuaW5kZXhPZih0cmFjay5pZCk7XG5cdFx0XHRpZiAoaW50SW5kZXggPiAtMSkge1xuXHRcdFx0XHR2bS5iYW5kVHJhY2tJZEFycmF5LnNwbGljZShpbnRJbmRleCwgMSk7XG5cdFx0XHR9XG5cdFx0fSovXG5cblx0XHRjb25zb2xlLmxvZyhcIlRyYWNrIHJlbW92ZWQgZnJvbSBuZXcgYmFuZDogXCIgKyB0cmFjayk7XG5cdFx0Ly9jb25zb2xlLmxvZyhiYW5kU3ZjLnRyYWNrQXJyYXkpO1xuXHR9XG5cblx0dm0ucGxheSA9IGZ1bmN0aW9uKHRyYWNrSWQpIHtcblxuXHRcdGlmKHZtLmN1cnJlbnRBdWRpb1RyYWNrSWQgIT0gXCJcIikge1xuXHRcdFx0dm0ucGF1c2Uodm0uY3VycmVudEF1ZGlvVHJhY2tJZCk7XG5cdFx0fVxuXG5cdFx0dm0uY3VycmVudEF1ZGlvVHJhY2tJZCA9IHRyYWNrSWQ7XG5cdFx0dm0uc29sb1RyYWNrQXVkaW9bdHJhY2tJZF0ucGxheSgpO1xuXHR9XG5cblx0dm0ucGF1c2UgPSBmdW5jdGlvbih0cmFja0lkKSB7XG5cdFx0dm0uc29sb1RyYWNrQXVkaW9bdHJhY2tJZF0ucGF1c2UoKTtcblx0XHR2bS5jdXJyZW50QXVkaW9UcmFja0lkID0gXCJcIjtcblx0fVxuXG5cdC8vV2F0Y2hlc1xuXHQkc2NvcGUuJHdhdGNoKFxuXHRcdGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZtLmZpbHRlckRhdGEgfSwgXG5cdFx0ZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYodm0uZmlsdGVyRGF0YSkgXG5cdFx0XHR7XG5cdFx0XHRcdGZpbHRlcigpO1x0XHRcblx0XHRcdH1cblx0XHR9LCB0cnVlKTtcblxuXHRfaW5pdCgpO1xufSk7IiwiYXBwLmNvbnRyb2xsZXIoXCJ1cGxvYWRDb250cm9sbGVyXCIsIGZ1bmN0aW9uKFVwbG9hZCwgYXJ0aXN0U2VydmljZSwgaW5zdHJ1bWVudFNlcnZpY2UsIHNvbG9TZXJ2aWNlLCAkc3RhdGUpIHtcbiAgXG4gIHZhciB2bSAgICAgICAgICAgID0gdGhpcztcbiAgdmFyIHNvbG9TdmMgICAgICAgPSBzb2xvU2VydmljZTtcbiAgdmFyIGFydGlzdFN2YyAgICAgPSBhcnRpc3RTZXJ2aWNlO1xuICB2YXIgaW5zdHJ1bWVudFN2YyA9IGluc3RydW1lbnRTZXJ2aWNlO1xuICB2YXIgdGFyZ2V0ICAgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1cGxvYWQtc3Bpbm5lcicpO1xuICBcbiAgdmFyIG9wdHMgPSB7XG4gICAgICBsaW5lczogMTMgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XG4gICAgLCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXG4gICAgLCB3aWR0aDogMTIgLy8gVGhlIGxpbmUgdGhpY2tuZXNzXG4gICAgLCByYWRpdXM6IDQyIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxuICAgICwgc2NhbGU6IDAuMzAgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxuICAgICwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxuICAgICwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXG4gICAgLCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXG4gICAgLCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxuICAgICwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcbiAgICAsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXG4gICAgLCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcbiAgICAsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXG4gICAgLCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcbiAgICAsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXG4gICAgLCB0b3A6ICc0MCUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcbiAgICAsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG4gICAgLCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XG4gICAgLCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cbiAgICAsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcbiAgfVxuXG4gIGZ1bmN0aW9uIF9pbml0KCkge1xuICAgICAgdm0udXBsb2FkZWQgICAgICAgPSBmYWxzZTtcbiAgICAgIHZtLnNob3dmb3JtICAgICAgID0gZmFsc2U7XG5cbiAgICAgIHZtLmluc3RydW1lbnRzICAgID0gaW5zdHJ1bWVudFN2Yy5nZXRJbnN0cnVtZW50cygpXG4gICAgICAudGhlbihmdW5jdGlvbihkYXRhKVxuICAgICAge1xuICAgICAgICB2bS5pbnN0cnVtZW50cyAgPSBkYXRhLmRhdGE7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YSk7XG4gICAgICB9LCBmdW5jdGlvbihlcnJvcilcbiAgICAgIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSk7XG5cbiAgICAgIHZtLmFydGlzdHMgICAgICAgID0gYXJ0aXN0U3ZjLmdldEFydGlzdHMoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSlcbiAgICAgIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YS5kYXRhKTtcbiAgICAgICAgdm0uYXJ0aXN0cyAgICAgID0gZGF0YS5kYXRhO1xuICAgICAgXG4gICAgICB9LCBmdW5jdGlvbihlcnJvcilcbiAgICAgIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgfSk7XG4gIH1cblxuICB2bS51cGxvYWRGaWxlID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgdmFyIHNwaW5uZXIgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XG4gICAgICAgIHZtLmxvYWRpbmcgID0gdHJ1ZTtcbiAgICAgICAgdm0udXBsb2FkZWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIGZvcm1cbiAgICAgICAgdm0uc2hvd2Zvcm0gICAgID0gdHJ1ZTtcbiAgICAgICAgJCgnc2VsZWN0JykubWF0ZXJpYWxfc2VsZWN0KCk7XG5cbiAgICAgICAgVXBsb2FkLnVwbG9hZCh7XG4gICAgICAgICAgICB1cmw6IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi91cGxvYWRcIixcbiAgICAgICAgICAgIGZpbGVGb3JtRGF0YU5hbWU6ICdzb25nJyxcbiAgICAgICAgICAgIHNlbmRGaWVsZHNBczogJ2Zvcm0nLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBzb25nOiBmaWxlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgICB2bS5maWxlbmFtZSAgICAgPSByZXNwLmRhdGEubmFtZTtcbiAgICAgICAgICAgIHZtLnRyYWNrbGVuZ3RoICA9IHJlc3AuZGF0YS5sZW5ndGg7XG4gICAgICAgICAgICBzcGlubmVyLnN0b3AoKTtcbiAgICAgICAgICAgIHZtLmxvYWRpbmcgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgdm0udXBsb2FkZWQgICAgID0gdHJ1ZTtcbiAgICAgICAgfSwgXG4gICAgICAgIGZ1bmN0aW9uIChyZXNwKSB7XG4gICAgICAgICAgICB2bS5sb2FkaW5nICA9IGZhbHNlO1xuICAgICAgICAgICAgc3Bpbm5lci5zdG9wKCk7XG4gICAgICAgICAgICB2bS51cGxvYWRmYWlsZWQgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdm0uc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB1c2VyX2lkID0gSlNPTi5wYXJzZShnZXRDb29raWUoJ3VzZXInKSkudXNlcklkO1xuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgICAgICBuYW1lOiB2bS5zb25nbmFtZSxcbiAgICAgICAgICAgIGZpbGVfdXJsOiB2bS5maWxlbmFtZSxcbiAgICAgICAgICAgIHRyYWNrX2xlbmd0aDogdm0udHJhY2tsZW5ndGgsXG4gICAgICAgICAgICB1c2VyX2lkOiB1c2VyX2lkLFxuICAgICAgICAgICAgaW5zdHJ1bWVudF9pZDogdm0uaW5zdHJ1bWVudHNkcm9wZG93bixcbiAgICAgICAgICAgIGFydGlzdF9pZCA6IHZtLmFydGlzdG5hbWVcbiAgICAgICAgfVxuXG4gICAgICBzb2xvU3ZjLmluc2VydFRyYWNrKGRhdGEpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpXG4gICAgICAgIHtcbiAgICAgICAgICAkc3RhdGUuZ28oXCJzb2xvXCIpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcilcbiAgICAgICAge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0Q29va2llKGNuYW1lKSB7XG4gICAgICAgICAgdmFyIG5hbWUgPSBjbmFtZSArIFwiPVwiO1xuICAgICAgICAgIHZhciBkZWNvZGVkQ29va2llID0gZGVjb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmNvb2tpZSk7XG4gICAgICAgICAgdmFyIGNhID0gZGVjb2RlZENvb2tpZS5zcGxpdCgnOycpO1xuICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIHZhciBjID0gY2FbaV07XG4gICAgICAgICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpIHtcbiAgICAgICAgICAgICAgICAgIGMgPSBjLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWUpID09IDApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuICBfaW5pdCgpO1xufSk7IiwiYXBwLmZpbHRlcihcImJhbmRcIiwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiBmdW5jdGlvbih0cmFja0lkLCBsaXN0KSB7XG5cdFx0dmFyIHJldHVyblZhbHVlID0gZmFsc2U7XG5cdFx0XG5cdFx0YW5ndWxhci5mb3JFYWNoKGxpc3QsIGZ1bmN0aW9uKGlkLCBpbmRleCkge1xuXHRcdFx0aWYoaWQgPT0gdHJhY2tJZCkge1xuXHRcdFx0XHRyZXR1cm5WYWx1ZSA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHJldHVyblZhbHVlO1xuXHR9XG59KTsiLCJhcHAuc2VydmljZShcImFydGlzdFNlcnZpY2VcIiwgZnVuY3Rpb24oJGh0dHApIHtcblx0XG5cdC8vR2xvYmFsc1xuXHR2YXIgc3ZjIFx0XHRcdD0gdGhpcztcblxuXHQvL1ByaXZhdGUgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIGdldERhdGEgKHVybCwgb3B0aW9ucykge1xuXG5cdFx0IW9wdGlvbnMgPyBvcHRpb25zID0ge30gOiBcIlwiO1xuXG5cdFx0cmV0dXJuICRodHRwLmdldCh1cmwsIG9wdGlvbnMpXG5cdH1cblxuXHQvL1N2YyBmdW5jdGlvbnNcblx0c3ZjLmdldEFydGlzdHMgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL2FydGlzdHNcIjtcblx0XHRcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xuXHR9XG59KSIsImFwcC5zZXJ2aWNlKFwiYXV0aFNlcnZpY2VcIiwgZnVuY3Rpb24gKCRhdXRoLCAkcm9vdFNjb3BlLCAkY29va2llcywgJHN0YXRlLCB1c2VyU2VydmljZSkge1xuXHRcblx0dmFyIHN2YyBcdFx0PSB0aGlzO1xuXHR2YXIgdXNlclN2YyBcdD0gdXNlclNlcnZpY2U7XG5cblx0c3ZjLmlzTG9nZ2VkSW4gXHQ9IGZhbHNlO1xuXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gbG9naW4gKHRva2VuLCBpZCwgdXNlcm5hbWUsIGVtYWlsKSB7XG5cblx0XHR2YXIgZXhwaXJhdGlvblRpbWUgPSBuZXcgRGF0ZSgpO1xuXHRcdGV4cGlyYXRpb25UaW1lID0gZXhwaXJhdGlvblRpbWUuc2V0VGltZShleHBpcmF0aW9uVGltZS5nZXRUaW1lKCkgKyAodG9rZW5bXCJleHBpcmVzX2luXCJdICogMTAwMCkpO1xuXHRcdGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoZXhwaXJhdGlvblRpbWUpO1xuXG5cdFx0dmFyIHVzZXJEYXRhID0ge1xuXG5cdFx0XHR0b2tlbjogdG9rZW4sXG5cdFx0XHR1c2VySWQ6IGlkLFxuXHRcdFx0dXNlcm5hbWU6IHVzZXJuYW1lLFxuXHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0Ly9pc0FkbWluOiBkYXRhLmRhdGEuaXNBZG1pblxuXHRcdH1cblxuXHRcdC8vY29uc29sZS5sb2codXNlckRhdGEudG9rZW4pO1xuXG5cdFx0c3ZjLnVzZXIgPSB1c2VyRGF0YTtcblxuXHRcdCRjb29raWVzLnB1dE9iamVjdChcInVzZXJcIiwgdXNlckRhdGEsIHsgZXhwaXJlczogZXhwaXJhdGlvblRpbWUgfSk7XG5cdFx0JHJvb3RTY29wZS5pc0xvZ2dlZEluID0gdHJ1ZTtcblx0XHRcblx0XHQvL0NoZWNrIGlmIHJldHVybmVkIHVzZXIgaXMgQWRtaW5cblx0XHR1c2VyRGF0YS5pc0FkbWluID09IFwiMVwiID8gJHJvb3RTY29wZS5pc0FkbWluID0gdHJ1ZSA6ICRyb290U2NvcGUuaXNBZG1pbiA9IGZhbHNlO1xuXHR9XG5cblx0Ly9TdmMgZnVuY3Rpb25zXG5cdHN2Yy5sb2dpbiA9IGZ1bmN0aW9uIChjcmVkZW50aWFscykge1xuXG5cdFx0JGF1dGgubG9naW4oY3JlZGVudGlhbHMpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBcdC8vIEF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NcbiAgICAgICAgXHR0b2tlbiBcdFx0PSBkYXRhLmRhdGEudG9rZW47XG4gICAgICAgIFx0aWQgXHRcdFx0PSAwO1xuICAgICAgICBcdHVzZXJuYW1lIFx0PSBcIlwiO1xuICAgICAgICBcdGVtYWlsIFx0XHQ9IFwiXCI7XG5cblx0XHRcdHVzZXJTdmMuZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0aWQgXHRcdFx0PSBkYXRhLmRhdGEuaWQ7XG5cdFx0XHRcdHVzZXJuYW1lIFx0PSBkYXRhLmRhdGEudXNlcm5hbWU7XG5cdFx0XHRcdGVtYWlsIFx0XHQ9IGRhdGEuZGF0YS5lbWFpbDtcblx0XHRcdFx0XG5cdFx0XHRcdGxvZ2luKHRva2VuLCBpZCwgdXNlcm5hbWUsIGVtYWlsKTtcblx0XHRcdFx0c3ZjLmlzTG9nZ2VkSW4gPSB0cnVlO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0XHRzdmMuaXNMb2dnZWRJbiA9IGZhbHNlO1xuXHRcdFx0fSk7XG4gICAgICAgIH0sIFxuICAgICAgICBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgIFx0Ly8gQXV0aGVudGljYXRpb24gZmFpbGVkXG4gICAgICAgIFx0Y29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICBcdHN2Yy5pc0xvZ2dlZEluID0gZmFsc2U7IFxuICAgICAgICB9KTtcblx0fVxuXG5cdHN2Yy5sb2dvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0JGF1dGgubG9nb3V0KClcblx0XHRcdC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cblx0XHRcdFx0JHJvb3RTY29wZS5pc0xvZ2dlZEluID0gZmFsc2U7XG5cdFx0XHRcdCRyb290U2NvcGUuaXNBZG1pbiA9IGZhbHNlO1xuXHRcdFx0XHRzdmMudXNlciA9IG51bGw7XG5cdFx0XHRcdHN2Yy5pc0xvZ2dlZEluID0gbnVsbDtcblxuXHRcdFx0XHQkY29va2llcy5yZW1vdmUoXCJ1c2VyXCIpO1xuXHRcdFx0XHRcblx0XHRcdFx0JHN0YXRlLmdvKFwiaG9tZVwiKTtcblx0XHRcdH0sIGZ1bmN0aW9uIChlcnJvcikge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pXG5cdH1cblxuXHRzdmMucmVnaXN0ZXIgPSBmdW5jdGlvbiAodXNlcikge1xuXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi91c2VyXCI7XG5cblx0XHRyZXR1cm4gJGh0dHAucG9zdCh1cmwsIHVzZXIpO1xuXHR9XG59KTsiLCJhcHAuc2VydmljZShcImJhbmRTZXJ2aWNlXCIsIGZ1bmN0aW9uKCkge1xuXHRcblx0dmFyIHN2YyA9IHRoaXM7XG5cblx0dHJhY2tBcnJheSA9IFtdO1xuXHR0cmFja0lkQXJyYXkgPSBbXTtcblx0dHJhY2tBcnJheUNvdW50ID0gMDtcblxuXHQvL1ByaXZhdGUgZnVuY3Rpb25zXG5cdGZ1bmN0aW9uIGFycmF5T2JqZWN0SW5kZXhPZihteUFycmF5LCBzZWFyY2hUZXJtLCBwcm9wZXJ0eSkge1xuICAgIFx0XG4gICAgXHRmb3IodmFyIGkgPSAwLCBsZW4gPSBteUFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIFx0aWYgKG15QXJyYXlbaV1bcHJvcGVydHldID09PSBzZWFyY2hUZXJtKSByZXR1cm4gaTtcbiAgICBcdH1cblxuICAgIFx0cmV0dXJuIC0xO1xuXHR9XG5cdC8vVHJhY2tBcnJheUNvdW50XG5cdGZ1bmN0aW9uIGluY3JlbWVudFRyYWNrQXJyYXlDb3VudCgpIHtcblx0XHR0cmFja0FycmF5Q291bnQgKys7XG5cdFx0cmV0dXJuIHRyYWNrQXJyYXlDb3VudDtcblx0fVxuXG5cdGZ1bmN0aW9uIGRlY3JlbWVudFRyYWNrQXJyYXlDb3VudCgpIHtcblx0XHR0cmFja0FycmF5Q291bnQgLS07XG5cdFx0cmV0dXJuIHRyYWNrQXJyYXlDb3VudDtcblx0fVxuXG5cdC8vVHJhY2tJZEFycmF5XG5cdGZ1bmN0aW9uIGFkZFRvVHJhY2tJZEFycmF5KHRyYWNrSWQpIHtcblx0XHR0cmFja0lkQXJyYXkucHVzaCh0cmFja0lkKTtcblx0XHRyZXR1cm4gdHJhY2tJZEFycmF5O1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlRnJvbVRyYWNrSWRBcnJheSh0cmFja0lkKSB7XG5cdFx0aW5kZXggPSB0cmFja0lkQXJyYXkuaW5kZXhPZih0cmFja0lkKTtcblx0XHRpZihpbmRleCA+IC0xKSB7XG5cdFx0XHR0cmFja0lkQXJyYXkuc3BsaWNlKGluZGV4LCAxKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJhY2tJZEFycmF5O1xuXHR9XG5cblx0Ly9TdmMgZnVuY3Rpb25zXG5cdHN2Yy5nZXRUcmFja0FycmF5Q291bnQgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdHJhY2tBcnJheUNvdW50O1xuXHR9XG5cblx0c3ZjLmdldFRyYWNrSWRBcnJheSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0cmFja0lkQXJyYXk7XG5cdH1cblxuXG5cdHN2Yy5hZGRUb1RyYWNrQXJyYXkgPSBmdW5jdGlvbih0cmFjaykge1xuXHRcdHRyYWNrQXJyYXkucHVzaCh0cmFjayk7XG5cdFx0aW5jcmVtZW50VHJhY2tBcnJheUNvdW50KCk7XG5cdFx0YWRkVG9UcmFja0lkQXJyYXkodHJhY2suaWQpO1xuXHRcdHJldHVybiB0cmFja0FycmF5O1xuXHR9XG5cblx0c3ZjLnJlbW92ZUZyb21UcmFja0FycmF5ID0gZnVuY3Rpb24odHJhY2spIHtcblx0XHRpbmRleCA9IGFycmF5T2JqZWN0SW5kZXhPZih0cmFja0FycmF5LCB0cmFjay5pZCwgXCJpZFwiKTtcblx0XHRpZihpbmRleCA+IC0xKSB7XG5cdFx0XHR0cmFja0FycmF5LnNwbGljZShpbmRleCwgMSk7XG5cdFx0fVxuXHRcdFxuXHRcdGRlY3JlbWVudFRyYWNrQXJyYXlDb3VudCgpO1xuXHRcdHJlbW92ZUZyb21UcmFja0lkQXJyYXkodHJhY2suaWQpO1xuXHRcdHJldHVybiB0cmFja0FycmF5O1xuXHR9XG5cblx0c3ZjLmdldFRyYWNrQXJyYXkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdHJhY2tBcnJheTtcblx0fVxuXG5cdFxuXG5cblxuXG5cdHN2Yy50ZXN0RnVuY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XHRhbGVydChcIlRlc3QgZnVuY3Rpb24gY2FsbGVkIGZyb20gaW5zaWRlIHNlcnZpY2UhXCIpO1xuXHR9XG59KSIsImFwcC5zZXJ2aWNlKFwiZmlsdGVyU2VydmljZVwiLCBmdW5jdGlvbihpbnN0cnVtZW50U2VydmljZSkge1xuXHRcblx0dmFyIHN2YyA9IHRoaXM7XG5cdHZhciBpbnN0U3ZjID0gaW5zdHJ1bWVudFNlcnZpY2U7XG5cblxuXHRzdmMuY3JlYXRlU29sb0ZpbHRlckRhdGEgPSBmdW5jdGlvbigpXG5cdHtcblx0XHRzdmMuc29sb0ZpbHRlckRhdGEgPSB7XHRcImFydGlzdFwiOiBcIlwiLFxuXHRcdFx0XHRcdFx0XHRcdFwidGl0bGVcIjogXCJcIixcblx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0YW5ndWxhci5mb3JFYWNoKGluc3RTdmMuaW5zdHJ1bWVudHMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpXG5cdFx0e1xuXHRcdFx0c3ZjLnNvbG9GaWx0ZXJEYXRhW3ZhbHVlLmlkXSA9IHRydWU7XG5cdFx0fSk7XG5cdH1cblxuXHRzdmMuY3JlYXRlTWVyZ2VkRmlsdGVyRGF0YSA9IGZ1bmN0aW9uKClcblx0e1xuXHRcdHN2Yy5tZXJnZWRGaWx0ZXJEYXRhID0ge1x0XCJhcnRpc3RcIjogXCJcIixcblx0XHRcdFx0XHRcdFx0XHRcdFwidGl0bGVcIjogXCJcIixcblx0XHRcdFx0XHRcdFx0XHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBfaW5pdCgpIHtcblx0XHRzdmMuY3JlYXRlU29sb0ZpbHRlckRhdGEoKTtcblx0XHRzdmMuY3JlYXRlTWVyZ2VkRmlsdGVyRGF0YSgpO1xuXHR9XG5cblx0X2luaXQoKTtcbn0pIiwiYXBwLnNlcnZpY2UoXCJpbnN0cnVtZW50U2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1xuXHRcblx0Ly9HbG9iYWxzXG5cdHZhciBzdmMgPSB0aGlzO1xuXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gZ2V0RGF0YSAodXJsLCBvcHRpb25zKSB7XG5cblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XG5cblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcblx0fVxuXG5cdC8vU3ZjIGZ1bmN0aW9uc1xuXHRzdmMuZ2V0SW5zdHJ1bWVudHMgPSBmdW5jdGlvbiAoKSB7XG5cblx0XHR2YXIgdXJsID0gQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL2luc3RydW1lbnRzXCI7XG5cdFx0XG5cdFx0cmV0dXJuIGdldERhdGEodXJsKTtcblx0fVxuXG5cdC8vIEluaXRpYWwgdmFsdWVzICh3aWxsIGJlIG92ZXJ3cml0dGUgYnkgZGIgdmFsdWVzKVxuXHRzdmMuaW5zdHJ1bWVudHMgPSBbe1xuIFx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJMZWFkLWd1aXRhclwiLFxuIFx0XHRcdFx0XHRcdFx0XCJpZFwiOjFcbiBcdFx0XHRcdFx0XHR9LFxuIFx0XHRcdFx0XHRcdHtcbiBcdFx0XHRcdFx0XHRcdFwibmFtZVwiOlwiUnl0aG0tZ3VpdGFyXCIsXG4gXHRcdFx0XHRcdFx0XHRcImlkXCI6MlxuIFx0XHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFx0e1xuIFx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJEcnVtXCIsXG4gXHRcdFx0XHRcdFx0XHRcImlkXCI6M1xuIFx0XHRcdFx0XHRcdH0sXG4gXHRcdFx0XHRcdFx0e1xuIFx0XHRcdFx0XHRcdFx0XCJuYW1lXCI6XCJCYXNzXCIsXG5cdFx0XHRcdFx0XHRcdFwiaWRcIjo0XG4gXHRcdFx0XHRcdFx0fSxcbiBcdFx0XHRcdFx0XHR7XG4gXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIkJhc3NcIixcblx0XHRcdFx0XHRcdFx0XCJpZFwiOjVcbiBcdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcIm5hbWVcIjpcIktleXNcIixcbiBcdFx0XHRcdFx0XHRcdFwiaWRcIjo2XG4gXHRcdFx0XHRcdFx0fV07XG59KSIsImFwcC5zZXJ2aWNlKFwibWVyZ2VkU2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1xuXHRcblx0Ly9HbG9iYWxzXG5cdHZhciBzdmMgPSB0aGlzO1xuXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gZ2V0RGF0YSAodXJsLCBvcHRpb25zKSB7XG5cblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XG5cblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcblx0fVxuXG5cdC8vU3ZjIGZ1bmN0aW9uc1xuXHRzdmMuZ2V0VHJhY2tzID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi9tZXJnZWR0cmFja3NcIjtcblx0XHRcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xuXHR9XG5cblx0c3ZjLmdldFRyYWNrQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi9tZXJnZWR0cmFja3MvXCIgKyBpZDtcblxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XG5cdH1cblxuXHRzdmMubWVyZ2VUcmFja3MgPSBmdW5jdGlvbihkYXRhKVxuXHR7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL21lcmdlZHRyYWNrcy9jcmVhdGVcIiwgZGF0YSk7XG5cdH1cblxuXHRzdmMuaW5zZXJ0Vm90ZSA9IGZ1bmN0aW9uKGRhdGEpXG5cdHtcblx0XHRyZXR1cm4gJGh0dHAucG9zdChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdm90ZS9jcmVhdGVcIiwgZGF0YSk7XG5cdH1cblxuXHRzdmMuZG93bmxvYWQgPSBmdW5jdGlvbiAoaWQpIHtcblxuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvbWVyZ2VkdHJhY2tzL1wiICsgaWQgKyBcIi9kb3dubG9hZFwiO1xuXHRcdFxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XG5cdH1cblxuXHRzdmMuZ2V0VXNlclZvdGVzID0gZnVuY3Rpb24odXNlcl9pZCkge1xuXHRcdHZhciB1cmwgPSBDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdm90ZXMvXCIgKyB1c2VyX2lkO1xuXHRcdFxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XG5cdH1cbn0pIiwiYXBwLnNlcnZpY2UoXCJzb2xvU2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1xuXHRcblx0Ly9HbG9iYWxzXG5cdHZhciBzdmMgPSB0aGlzO1xuXG5cdC8vUHJpdmF0ZSBmdW5jdGlvbnNcblx0ZnVuY3Rpb24gZ2V0RGF0YSAodXJsLCBvcHRpb25zKSB7XG5cblx0XHQhb3B0aW9ucyA/IG9wdGlvbnMgPSB7fSA6IFwiXCI7XG5cblx0XHRyZXR1cm4gJGh0dHAuZ2V0KHVybCwgb3B0aW9ucylcblx0fVxuXG5cdC8vU3ZjIGZ1bmN0aW9uc1xuXHRzdmMuZ2V0VHJhY2tzID0gZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi90cmFja3NcIjtcblx0XHRcblx0XHRyZXR1cm4gZ2V0RGF0YSh1cmwpO1xuXHR9XG5cblx0c3ZjLmdldFRyYWNrQnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuXG5cdFx0dmFyIHVybCA9IENPTlNUQU5UUy5BUElfQkFTRV9VUkwgKyBcIi90cmFja3MvXCIgKyBpZDtcblxuXHRcdHJldHVybiBnZXREYXRhKHVybCk7XG5cdH1cblxuXHRzdmMuaW5zZXJ0VHJhY2sgPSBmdW5jdGlvbihkYXRhKVxuXHR7XG5cdFx0cmV0dXJuICRodHRwLnBvc3QoQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3RyYWNrcy9jcmVhdGVcIiwgZGF0YSk7XG5cdH1cbn0pIiwiYXBwLnNlcnZpY2UoXCJ1c2VyU2VydmljZVwiLCBmdW5jdGlvbigkaHR0cCkge1x0XG5cdFxuXHR2YXIgc3ZjID0gdGhpcztcblxuXHRzdmMuZ2V0VXNlciA9IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiAkaHR0cC5nZXQoQ09OU1RBTlRTLkFQSV9CQVNFX1VSTCArIFwiL3VzZXJcIik7XG5cdH1cblxuXHRzdmMudXBkYXRlVXNlciA9IGZ1bmN0aW9uKGRhdGEpXG5cdHtcblx0XHRyZXR1cm4gJGh0dHAucG9zdChDT05TVEFOVFMuQVBJX0JBU0VfVVJMICsgXCIvdXNlclwiLCBkYXRhKTtcblx0fVxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiQmFuZFwiLCBmdW5jdGlvbihiYW5kU2VydmljZSkge1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkVcIixcblx0XHR0ZW1wbGF0ZVVybDogXCJhcHAvZGlyZWN0aXZlcy9kY2ItYmFuZC9kY2ItYmFuZC5odG1sXCIsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0Y29udHJvbGxlckFzOiBcImJhbmRcIixcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkYXV0aCwgJHNjb3BlLCAkcm9vdFNjb3BlKSB7XG5cdFx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdFx0dmFyIGJhbmRTdmMgPSBiYW5kU2VydmljZTtcblxuXHRcdFx0ZnVuY3Rpb24gX2luaXQoKSB7XG5cdFx0XHRcdHZtLnRyYWNrQXJyYXkgXHRcdFx0PSBiYW5kU3ZjLmdldFRyYWNrQXJyYXk7XG5cdFx0XHRcdHZtLmJhbmRUcmFja0lkQXJyYXkgXHQ9IGJhbmRTdmMuZ2V0VHJhY2tJZEFycmF5O1xuXHRcdFx0XHR2bS50cmFja0FycmF5Q291bnQgXHRcdD0gYmFuZFN2Yy5nZXRUcmFja0FycmF5Q291bnQ7XG5cblx0XHRcdFx0Ly9jb25zb2xlLmxvZyh2bS50cmFja0FycmF5Q291bnQpO1xuXHRcdFx0fVxuXG5cdFx0XHR2bS5yZW1vdmVGcm9tQmFuZCA9IGZ1bmN0aW9uKHRyYWNrKSB7XG5cdFx0XG5cdFx0XHRcdGJhbmRTdmMucmVtb3ZlRnJvbVRyYWNrQXJyYXkodHJhY2spO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiVHJhY2sgcmVtb3ZlZCBmcm9tIG5ldyBiYW5kOiBcIiArIHRyYWNrKTtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhiYW5kU3ZjLnRyYWNrQXJyYXkpO1xuXHRcdFx0fVxuXG5cdFx0XHRfaW5pdCgpO1xuXHRcdH1cblx0fVxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiSGVhZGVyXCIsIGZ1bmN0aW9uKGJhbmRTZXJ2aWNlKSB7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxuXHRcdHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1oZWFkZXIvZGNiLWhlYWRlci5odG1sXCIsXG5cdFx0cmVwbGFjZTogdHJ1ZSxcblx0XHRzY29wZToge30sXG5cdFx0Y29udHJvbGxlckFzOiBcImhlYWRcIixcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUsIHVzZXJTZXJ2aWNlLCBhdXRoU2VydmljZSwgJGF1dGgsICRyb290U2NvcGUpIHtcblx0XHRcdFxuXHRcdFx0dmFyIHZtIFx0XHRcdD0gdGhpcztcblx0XHRcdHZhciB1c2VyU3ZjIFx0PSB1c2VyU2VydmljZTtcblx0XHRcdHZhciBhdXRoU3ZjIFx0PSBhdXRoU2VydmljZTtcblx0XHRcdHZhciBiYW5kU3ZjIFx0PSBiYW5kU2VydmljZTtcblxuXHRcdFx0ZnVuY3Rpb24gX2luaXQoKSB7XG5cdFx0XHRcdHZtLnRyYWNrQXJyYXkgPSBiYW5kU3ZjLmdldFRyYWNrQXJyYXk7XG5cdFx0XHRcdHZtLnRyYWNrQXJyYXlDb3VudCA9IGJhbmRTdmMuZ2V0VHJhY2tBcnJheUNvdW50O1xuXG5cdFx0XHRcdGlmKCRhdXRoLmlzQXV0aGVudGljYXRlZCgpKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dXNlclN2Yy5nZXRVc2VyKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRcdFx0JHJvb3RTY29wZS51c2VybmFtZSA9IGRhdGEuZGF0YS51c2VybmFtZTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHR2bS5zaG93TG9naW4gPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCk7XG5cdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCdvcGVuJyk7XG5cdFx0XHR9XG5cblx0XHRcdHZtLmxvZ291dCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YXV0aFN2Yy5sb2dvdXQoKTtcblx0XHRcdH1cblxuXHRcdFx0dm0uc2hvd1JlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgpO1xuXHRcdFx0XHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgnb3BlbicpO1xuXHRcdFx0fVxuXG5cdFx0XHR2bS5zaG93QmFuZCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JCgnI2JhbmRfbW9kYWwnKS5tb2RhbCgpO1xuXHRcdFx0XHQkKCcjYmFuZF9tb2RhbCcpLm1vZGFsKCdvcGVuJyk7XG5cdFx0XHR9XG5cblx0XHRcdHZtLmlzQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gJGF1dGguaXNBdXRoZW50aWNhdGVkKCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRfaW5pdCgpO1xuXG5cdFx0XHQvL1dhdGNoZXNcblx0XHRcdCRzY29wZS4kd2F0Y2goXG5cdFx0XHRcdGZ1bmN0aW9uICgpIHsgcmV0dXJuIGF1dGhTdmMudXNlciB9LCBcblx0XHRcdFx0ZnVuY3Rpb24gKCkge1xuXG5cdFx0XHRcdFx0dm0udXNlciA9IGF1dGhTdmMudXNlcjtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKHZtLnVzZXIpO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cdH1cbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYkxvZ2luXCIsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkVcIixcblx0XHR0ZW1wbGF0ZVVybDogXCJhcHAvZGlyZWN0aXZlcy9kY2ItbG9naW4vZGNiLWxvZ2luLmh0bWxcIixcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRjb250cm9sbGVyQXM6IFwibG9naW5cIixcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkYXV0aCwgJHNjb3BlLCAkcm9vdFNjb3BlLCB1c2VyU2VydmljZSwgYXV0aFNlcnZpY2UsICRjb29raWVzKSB7XG5cdFx0XHR2YXIgdm0gXHRcdFx0PSB0aGlzO1xuXHRcdFx0dmFyIHVzZXJTdmMgXHQ9IHVzZXJTZXJ2aWNlO1xuXHRcdFx0dmFyIGF1dGhTdmMgXHQ9IGF1dGhTZXJ2aWNlO1xuXHRcdFx0dmFyIHRhcmdldCBcdFx0PSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naW4tc3Bpbm5lcicpO1xuXG5cdFx0XHR2YXIgb3B0cyA9IHtcblx0ICBcdFx0XHRsaW5lczogMTMgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XG5cdFx0XHRcdCwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxuXHRcdFx0XHQsIHdpZHRoOiAxNCAvLyBUaGUgbGluZSB0aGlja25lc3Ncblx0XHRcdFx0LCByYWRpdXM6IDQyIC8vIFRoZSByYWRpdXMgb2YgdGhlIGlubmVyIGNpcmNsZVxuXHRcdFx0XHQsIHNjYWxlOiAwLjQgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxuXHRcdFx0XHQsIGNvcm5lcnM6IDEgLy8gQ29ybmVyIHJvdW5kbmVzcyAoMC4uMSlcblx0XHRcdFx0LCBjb2xvcjogJyMwMDAnIC8vICNyZ2Igb3IgI3JyZ2diYiBvciBhcnJheSBvZiBjb2xvcnNcblx0XHRcdFx0LCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXG5cdFx0XHRcdCwgcm90YXRlOiAwIC8vIFRoZSByb3RhdGlvbiBvZmZzZXRcblx0XHRcdFx0LCBkaXJlY3Rpb246IDEgLy8gMTogY2xvY2t3aXNlLCAtMTogY291bnRlcmNsb2Nrd2lzZVxuXHRcdFx0XHQsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXG5cdFx0XHRcdCwgdHJhaWw6IDYwIC8vIEFmdGVyZ2xvdyBwZXJjZW50YWdlXG5cdFx0XHRcdCwgZnBzOiAyMCAvLyBGcmFtZXMgcGVyIHNlY29uZCB3aGVuIHVzaW5nIHNldFRpbWVvdXQoKSBhcyBhIGZhbGxiYWNrIGZvciBDU1Ncblx0XHRcdFx0LCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcblx0XHRcdFx0LCBjbGFzc05hbWU6ICdzcGlubmVyJyAvLyBUaGUgQ1NTIGNsYXNzIHRvIGFzc2lnbiB0byB0aGUgc3Bpbm5lclxuXHRcdFx0XHQsIHRvcDogJzYwJScgLy8gVG9wIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudFxuXHRcdFx0XHQsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG5cdFx0XHRcdCwgc2hhZG93OiBmYWxzZSAvLyBXaGV0aGVyIHRvIHJlbmRlciBhIHNoYWRvd1xuXHRcdFx0XHQsIGh3YWNjZWw6IGZhbHNlIC8vIFdoZXRoZXIgdG8gdXNlIGhhcmR3YXJlIGFjY2VsZXJhdGlvblxuXHRcdFx0XHQsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcblx0XHRcdH1cblxuXHRcdFx0Ly9Qcml2YXRlIGZ1bmN0aW9uc1xuXHRcdFx0ZnVuY3Rpb24gbG9naW4gKHRva2VuLCBpZCwgdXNlcm5hbWUsIGVtYWlsKSB7XG5cblx0XHRcdFx0dmFyIGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoKTtcblx0XHRcdFx0ZXhwaXJhdGlvblRpbWUgPSBleHBpcmF0aW9uVGltZS5zZXRUaW1lKGV4cGlyYXRpb25UaW1lLmdldFRpbWUoKSArICh0b2tlbltcImV4cGlyZXNfaW5cIl0gKiAxMDAwKSk7XG5cdFx0XHRcdGV4cGlyYXRpb25UaW1lID0gbmV3IERhdGUoZXhwaXJhdGlvblRpbWUpO1xuXG5cdFx0XHRcdHZhciB1c2VyRGF0YSA9IHtcblxuXHRcdFx0XHRcdHRva2VuOiB0b2tlbixcblx0XHRcdFx0XHR1c2VySWQ6IGlkLFxuXHRcdFx0XHRcdHVzZXJuYW1lOiB1c2VybmFtZSxcblx0XHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdFx0Ly9pc0FkbWluOiBkYXRhLmRhdGEuaXNBZG1pblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y29uc29sZS5sb2codXNlckRhdGEudG9rZW4pO1xuXG5cdFx0XHRcdGF1dGhTdmMudXNlciA9IHVzZXJEYXRhO1xuXG5cdFx0XHRcdCRjb29raWVzLnB1dE9iamVjdChcInVzZXJcIiwgdXNlckRhdGEsIHsgZXhwaXJlczogZXhwaXJhdGlvblRpbWUgfSk7XG5cdFx0XHRcdCRyb290U2NvcGUuaXNMb2dnZWRJbiA9IHRydWU7XG5cdFx0XHRcdFxuXHRcdFx0XHQvL0NoZWNrIGlmIHJldHVybmVkIHVzZXIgaXMgQWRtaW5cblx0XHRcdFx0dXNlckRhdGEuaXNBZG1pbiA9PSBcIjFcIiA/ICRyb290U2NvcGUuaXNBZG1pbiA9IHRydWUgOiAkcm9vdFNjb3BlLmlzQWRtaW4gPSBmYWxzZTtcblx0XHRcdH1cblxuXG5cdFx0XHQvL1ZtIGZ1bmN0aW9uc1xuXHQgICAgICAgIHZtLmxvZ2luID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgXHR2YXIgc3Bpbm5lciA9IG5ldyBTcGlubmVyKG9wdHMpLnNwaW4odGFyZ2V0KTtcblx0ICAgICAgICBcdHZtLmxvYWRpbmcgXHQ9IHRydWU7XG5cdCAgICAgICAgXHRjb25zb2xlLmxvZyh2bS5sb2FkaW5nKTtcblxuXHQgICAgICAgICAgICB2YXIgY3JlZGVudGlhbHMgPSB7XG5cdCAgICAgICAgICAgICAgICBlbWFpbDogdm0uZW1haWwsXG5cdCAgICAgICAgICAgICAgICBwYXNzd29yZDogdm0ucGFzc3dvcmRcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBcblx0ICAgICAgICAgICAgYXV0aFN2Yy5sb2dpbihjcmVkZW50aWFscyk7XG5cdCAgICAgICAgICAgIFxuXHQgICAgICAgICAgICAvL1dhdGNoZXNcblx0XHRcdFx0dmFyIHVucmVnaXN0ZXIgPSAkc2NvcGUuJHdhdGNoKFxuXHRcdFx0XHQgXHRmdW5jdGlvbiAoKSB7IHJldHVybiBhdXRoU3ZjLmlzTG9nZ2VkSW4gfSwgXG5cdFx0XHRcdCBcdGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGlmKGF1dGhTdmMuaXNMb2dnZWRJbikgXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0ICAgICAgICBcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCk7XG5cdFx0XHRcdFx0XHRcdCQoJyNsb2dpbl9tb2RhbCcpLm1vZGFsKCdjbG9zZScpO1xuXHRcdFx0XHQgICAgICAgIFx0c3Bpbm5lci5zdG9wKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZighYXV0aFN2Yy5pc0xvZ2dlZEluKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRzcGlubmVyLnN0b3AoKTtcblx0XHRcdFx0XHRcdFx0dm0ubG9hZGluZyA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRydWUpO1xuXHQgICAgICAgIH1cblx0XHR9XG5cdH1cbn0pIiwiYXBwLmRpcmVjdGl2ZShcImRjYk1lcmdlcHJvY2Vzc2luZ1wiLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogXCJFXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9kaXJlY3RpdmVzL2RjYi1tZXJnZXByb2Nlc3NpbmcvZGNiLW1lcmdlcHJvY2Vzc2luZy5odG1sXCIsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHNjb3BlOiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcInByb2Nlc3NpbmdcIixcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJGludGVydmFsKSBcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHZtICAgICAgICAgID0gdGhpcztcbiAgICAgICAgICAgIHZhciB0YXJnZXQgICAgICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jZXNzaW5nLXNwaW5uZXInKTtcblxuICAgICAgICAgICAgdmFyIG9wdHMgPSB7XG4gICAgICAgICAgICAgICAgbGluZXM6IDEzIC8vIFRoZSBudW1iZXIgb2YgbGluZXMgdG8gZHJhd1xuICAgICAgICAgICAgICAgICwgbGVuZ3RoOiAyOCAvLyBUaGUgbGVuZ3RoIG9mIGVhY2ggbGluZVxuICAgICAgICAgICAgICAgICwgd2lkdGg6IDE0IC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xuICAgICAgICAgICAgICAgICwgcmFkaXVzOiA0MiAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcbiAgICAgICAgICAgICAgICAsIHNjYWxlOiAwLjQgLy8gU2NhbGVzIG92ZXJhbGwgc2l6ZSBvZiB0aGUgc3Bpbm5lclxuICAgICAgICAgICAgICAgICwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxuICAgICAgICAgICAgICAgICwgY29sb3I6ICcjMDAwJyAvLyAjcmdiIG9yICNycmdnYmIgb3IgYXJyYXkgb2YgY29sb3JzXG4gICAgICAgICAgICAgICAgLCBvcGFjaXR5OiAwLjI1IC8vIE9wYWNpdHkgb2YgdGhlIGxpbmVzXG4gICAgICAgICAgICAgICAgLCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxuICAgICAgICAgICAgICAgICwgZGlyZWN0aW9uOiAxIC8vIDE6IGNsb2Nrd2lzZSwgLTE6IGNvdW50ZXJjbG9ja3dpc2VcbiAgICAgICAgICAgICAgICAsIHNwZWVkOiAxIC8vIFJvdW5kcyBwZXIgc2Vjb25kXG4gICAgICAgICAgICAgICAgLCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcbiAgICAgICAgICAgICAgICAsIGZwczogMjAgLy8gRnJhbWVzIHBlciBzZWNvbmQgd2hlbiB1c2luZyBzZXRUaW1lb3V0KCkgYXMgYSBmYWxsYmFjayBmb3IgQ1NTXG4gICAgICAgICAgICAgICAgLCB6SW5kZXg6IDJlOSAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcbiAgICAgICAgICAgICAgICAsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXG4gICAgICAgICAgICAgICAgLCB0b3A6ICc0MCUnIC8vIFRvcCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcbiAgICAgICAgICAgICAgICAsIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG4gICAgICAgICAgICAgICAgLCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XG4gICAgICAgICAgICAgICAgLCBod2FjY2VsOiBmYWxzZSAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cbiAgICAgICAgICAgICAgICAsIHBvc2l0aW9uOiAnYWJzb2x1dGUnIC8vIEVsZW1lbnQgcG9zaXRpb25pbmdcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRleHRBcnJheSAgICAgICA9IFtcbiAgICAgICAgICAgICAgICBcIlR1bmluZyBpbnN0cnVtZW50cy4uLlwiLCBcbiAgICAgICAgICAgICAgICBcIkFkanVzdGluZyBhbXAgc2V0dGluZ3MuLi5cIiwgXG4gICAgICAgICAgICAgICAgXCJTb3VuZGNoZWNraW5nLi4uXCIsIFxuICAgICAgICAgICAgICAgIFwiUmVjb3JkaW5nLi4uXCIsIFxuICAgICAgICAgICAgICAgIFwiTWl4aW5nIHNvdW5kLi4uXCIsIFxuICAgICAgICAgICAgICAgIFwiRmluaXNoaW5nIHVwLi4uXCJcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIHZhciBzcGlubmVyICAgICAgICAgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XG4gICAgICAgICAgICB2YXIgY3VycmVudEluZGV4ICAgID0gMDtcblxuICAgICAgICAgICAgJGludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmKCQoJyNwcm9jZXNzaW5nX21vZGFsJykuaXMoXCI6dmlzaWJsZVwiKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZtLnRleHQgPSB0ZXh0QXJyYXlbY3VycmVudEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEluZGV4Kys7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudEluZGV4ID49IHRleHRBcnJheS5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgNDAwMCk7XG4gICAgICAgIH1cbiAgICB9XG59KSIsImFwcC5kaXJlY3RpdmUoXCJkY2JSZWdpc3RlclwiLCBmdW5jdGlvbih1c2VyU2VydmljZSkge1xuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiBcIkVcIixcblx0XHR0ZW1wbGF0ZVVybDogXCJhcHAvZGlyZWN0aXZlcy9kY2ItcmVnaXN0ZXIvZGNiLXJlZ2lzdGVyLmh0bWxcIixcblx0XHRyZXBsYWNlOiB0cnVlLFxuXHRcdHNjb3BlOiB7fSxcblx0XHRjb250cm9sbGVyQXM6IFwicmVnaXN0ZXJcIixcblx0XHRjb250cm9sbGVyOiBmdW5jdGlvbigkYXV0aCwgJHNjb3BlLCAkcm9vdFNjb3BlLCB1c2VyU2VydmljZSwgYXV0aFNlcnZpY2UpIHtcblx0XHRcdHZhciB2bSBcdFx0XHQ9IHRoaXM7XG5cdFx0XHR2YXIgdXNlclN2YyBcdD0gdXNlclNlcnZpY2U7XG5cdFx0XHR2YXIgYXV0aFN2YyBcdD0gYXV0aFNlcnZpY2U7XG5cdFx0XHR2YXIgdGFyZ2V0IFx0XHQ9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWdpc3Rlci1zcGlubmVyJyk7XG5cblx0XHRcdHZhciBvcHRzID0ge1xuXHQgIFx0XHRcdGxpbmVzOiAxMyAvLyBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIGRyYXdcblx0XHRcdFx0LCBsZW5ndGg6IDI4IC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXG5cdFx0XHRcdCwgd2lkdGg6IDE0IC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xuXHRcdFx0XHQsIHJhZGl1czogNDIgLy8gVGhlIHJhZGl1cyBvZiB0aGUgaW5uZXIgY2lyY2xlXG5cdFx0XHRcdCwgc2NhbGU6IDAuNCAvLyBTY2FsZXMgb3ZlcmFsbCBzaXplIG9mIHRoZSBzcGlubmVyXG5cdFx0XHRcdCwgY29ybmVyczogMSAvLyBDb3JuZXIgcm91bmRuZXNzICgwLi4xKVxuXHRcdFx0XHQsIGNvbG9yOiAnIzAwMCcgLy8gI3JnYiBvciAjcnJnZ2JiIG9yIGFycmF5IG9mIGNvbG9yc1xuXHRcdFx0XHQsIG9wYWNpdHk6IDAuMjUgLy8gT3BhY2l0eSBvZiB0aGUgbGluZXNcblx0XHRcdFx0LCByb3RhdGU6IDAgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxuXHRcdFx0XHQsIGRpcmVjdGlvbjogMSAvLyAxOiBjbG9ja3dpc2UsIC0xOiBjb3VudGVyY2xvY2t3aXNlXG5cdFx0XHRcdCwgc3BlZWQ6IDEgLy8gUm91bmRzIHBlciBzZWNvbmRcblx0XHRcdFx0LCB0cmFpbDogNjAgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2Vcblx0XHRcdFx0LCBmcHM6IDIwIC8vIEZyYW1lcyBwZXIgc2Vjb25kIHdoZW4gdXNpbmcgc2V0VGltZW91dCgpIGFzIGEgZmFsbGJhY2sgZm9yIENTU1xuXHRcdFx0XHQsIHpJbmRleDogMmU5IC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxuXHRcdFx0XHQsIGNsYXNzTmFtZTogJ3NwaW5uZXInIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXG5cdFx0XHRcdCwgdG9wOiAnNjAlJyAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50XG5cdFx0XHRcdCwgbGVmdDogJzUwJScgLy8gTGVmdCBwb3NpdGlvbiByZWxhdGl2ZSB0byBwYXJlbnRcblx0XHRcdFx0LCBzaGFkb3c6IGZhbHNlIC8vIFdoZXRoZXIgdG8gcmVuZGVyIGEgc2hhZG93XG5cdFx0XHRcdCwgaHdhY2NlbDogZmFsc2UgLy8gV2hldGhlciB0byB1c2UgaGFyZHdhcmUgYWNjZWxlcmF0aW9uXG5cdFx0XHRcdCwgcG9zaXRpb246ICdhYnNvbHV0ZScgLy8gRWxlbWVudCBwb3NpdGlvbmluZ1xuXHRcdFx0fVxuXG5cblx0XHRcdFxuXHRcdFx0dm0ucmVnaXN0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHNwaW5uZXIgPSBuZXcgU3Bpbm5lcihvcHRzKS5zcGluKHRhcmdldCk7XG5cdCAgICAgICAgXHR2bS5sb2FkaW5nIFx0PSB0cnVlO1xuXG5cdFx0XHRcdHZhciB1c2VyID0ge1xuXHRcdFx0XHQgIFx0dXNlcm5hbWU6IHZtLnVzZXJuYW1lLFxuXHRcdFx0XHQgIFx0ZW1haWw6IHZtLmVtYWlsLFxuXHRcdFx0XHQgIFx0cGFzc3dvcmQ6IHZtLnBhc3N3b3JkXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0JGF1dGguc2lnbnVwKHVzZXIpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcblx0XHRcdFx0XHQvLyBSZWdpc3RyYXRpb24gc3VjY2Vzc1xuXHRcdFx0XHRcdGF1dGhTdmMubG9naW4odXNlcik7XG5cblx0XHQgICAgICAgICAgICAvL1dhdGNoZXNcblx0XHRcdFx0XHR2YXIgdW5yZWdpc3RlciA9ICRzY29wZS4kd2F0Y2goXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiAoKSB7IHJldHVybiBhdXRoU3ZjLmlzTG9nZ2VkSW4gfSwgXG5cdFx0XHRcdFx0XHRmdW5jdGlvbiAoKSB7XG5cblx0XHRcdFx0XHRcdFx0aWYoYXV0aFN2Yy5pc0xvZ2dlZEluKSBcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcblx0XHRcdFx0XHQgICAgICAgIFx0JCgnI3JlZ2lzdGVyX21vZGFsJykubW9kYWwoKTtcblx0XHRcdFx0XHRcdFx0XHQkKCcjcmVnaXN0ZXJfbW9kYWwnKS5tb2RhbCgnY2xvc2UnKTtcblx0XHRcdFx0XHQgICAgICAgIFx0c3Bpbm5lci5zdG9wKCk7XG5cdFx0XHRcdFx0ICAgICAgICBcdHVucmVnaXN0ZXIoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRpZihhdXRoU3ZjLmlzTG9nZ2VkSW4gPT09IGZhbHNlKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0c3Bpbm5lci5zdG9wKCk7XG5cdCAgICAgICAgXHRcdFx0XHRcdHZtLmxvYWRpbmcgPSBmYWxzZTtcblx0ICAgICAgICBcdFx0XHRcdFx0dW5yZWdpc3RlcigpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9LCB0cnVlKTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0Ly8gUmVnaXN0cmF0aW9uIGZhaWxlZFxuXHRcdFx0XHQgIFx0c3Bpbm5lci5zdG9wKCk7XG5cdFx0XHRcdCAgXHR2bS5sb2FkaW5nID0gZmFsc2U7XG5cdFx0XHRcdCAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSkiLCJhcHAuZGlyZWN0aXZlKFwiZGNiU3RpY2t5XCIsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcblx0dmFyICR3aW4gPSBhbmd1bGFyLmVsZW1lbnQoJHdpbmRvdyk7IC8vIHdyYXAgd2luZG93IG9iamVjdCBhcyBqUXVlcnkgb2JqZWN0XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJBXCIsXG5cdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuXHQgICAgICBcdHZhciB0b3BDbGFzcyA9IGF0dHJzLmRjYlN0aWNreSwgLy8gZ2V0IENTUyBjbGFzcyBmcm9tIGRpcmVjdGl2ZSdzIGF0dHJpYnV0ZSB2YWx1ZVxuXHQgICAgICAgICAgXHRvZmZzZXRUb3AgPSBlbGVtZW50Lm9mZnNldCgpLnRvcDsgLy8gZ2V0IGVsZW1lbnQncyBvZmZzZXQgdG9wIHJlbGF0aXZlIHRvIGRvY3VtZW50XG5cblx0ICAgICAgXHQkd2luLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoZSkge1xuXHRcdCAgICAgICAgaWYgKCR3aW4uc2Nyb2xsVG9wKCkgPj0gb2Zmc2V0VG9wKSB7XG5cdFx0ICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3ModG9wQ2xhc3MpO1xuXHRcdCAgICAgICAgfSBlbHNlIHtcblx0XHQgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyh0b3BDbGFzcyk7XG5cdFx0ICAgICAgICB9XG5cdCAgICAgIFx0fSk7XG5cdCAgXHR9XG5cdH1cbn0pIl19
